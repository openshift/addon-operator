2022-05-24T18:42:19.574858642Z I0524 18:42:19.574631       1 cmd.go:92] &{<nil> true {false} installer true map[cert-configmaps:0xc000313f40 cert-dir:0xc0002ac1e0 cert-secrets:0xc000313ea0 configmaps:0xc000313a40 namespace:0xc000313860 optional-cert-configmaps:0xc0002ac140 optional-cert-secrets:0xc0002ac000 optional-configmaps:0xc000313b80 optional-secrets:0xc000313ae0 pod:0xc000313900 pod-manifest-dir:0xc000313cc0 resource-dir:0xc000313c20 revision:0xc0003137c0 secrets:0xc0003139a0 v:0xc00015a820] [0xc00015a820 0xc0003137c0 0xc000313860 0xc000313900 0xc000313c20 0xc000313cc0 0xc000313a40 0xc000313b80 0xc0003139a0 0xc000313ae0 0xc0002ac1e0 0xc000313f40 0xc0002ac140 0xc000313ea0 0xc0002ac000] [] map[add-dir-header:0xc00015a0a0 alsologtostderr:0xc00015a140 cert-configmaps:0xc000313f40 cert-dir:0xc0002ac1e0 cert-secrets:0xc000313ea0 configmaps:0xc000313a40 help:0xc00015abe0 kubeconfig:0xc0004e3f40 log-backtrace-at:0xc00015a280 log-dir:0xc00015a320 log-file:0xc00015a3c0 log-file-max-size:0xc00015a460 log-flush-frequency:0xc00015a1e0 logtostderr:0xc00015a500 namespace:0xc000313860 one-output:0xc00015a5a0 optional-cert-configmaps:0xc0002ac140 optional-cert-secrets:0xc0002ac000 optional-configmaps:0xc000313b80 optional-secrets:0xc000313ae0 pod:0xc000313900 pod-manifest-dir:0xc000313cc0 pod-manifests-lock-file:0xc000313e00 resource-dir:0xc000313c20 revision:0xc0003137c0 secrets:0xc0003139a0 skip-headers:0xc00015a640 skip-log-headers:0xc00015a6e0 stderrthreshold:0xc00015a780 timeout-duration:0xc000313d60 v:0xc00015a820 vmodule:0xc00015a8c0] [0xc0004e3f40 0xc0003137c0 0xc000313860 0xc000313900 0xc0003139a0 0xc000313a40 0xc000313ae0 0xc000313b80 0xc000313c20 0xc000313cc0 0xc000313d60 0xc000313e00 0xc000313ea0 0xc000313f40 0xc0002ac000 0xc0002ac140 0xc0002ac1e0 0xc00015a0a0 0xc00015a140 0xc00015a280 0xc00015a320 0xc00015a3c0 0xc00015a460 0xc00015a1e0 0xc00015a500 0xc00015a5a0 0xc00015a640 0xc00015a6e0 0xc00015a780 0xc00015a820 0xc00015a8c0 0xc00015abe0] [0xc00015a0a0 0xc00015a140 0xc000313f40 0xc0002ac1e0 0xc000313ea0 0xc000313a40 0xc00015abe0 0xc0004e3f40 0xc00015a280 0xc00015a320 0xc00015a3c0 0xc00015a460 0xc00015a1e0 0xc00015a500 0xc000313860 0xc00015a5a0 0xc0002ac140 0xc0002ac000 0xc000313b80 0xc000313ae0 0xc000313900 0xc000313cc0 0xc000313e00 0xc000313c20 0xc0003137c0 0xc0003139a0 0xc00015a640 0xc00015a6e0 0xc00015a780 0xc000313d60 0xc00015a820 0xc00015a8c0] map[104:0xc00015abe0 118:0xc00015a820] [] -1 0 0xc0008d5bf0 true 0xa27c00 []}
2022-05-24T18:42:19.575102752Z I0524 18:42:19.575080       1 cmd.go:93] (*installerpod.InstallOptions)(0xc00028ad00)({
2022-05-24T18:42:19.575102752Z  KubeConfig: (string) "",
2022-05-24T18:42:19.575102752Z  KubeClient: (kubernetes.Interface) <nil>,
2022-05-24T18:42:19.575102752Z  Revision: (string) (len=2) "11",
2022-05-24T18:42:19.575102752Z  NodeName: (string) "",
2022-05-24T18:42:19.575102752Z  Namespace: (string) (len=24) "openshift-kube-apiserver",
2022-05-24T18:42:19.575102752Z  PodConfigMapNamePrefix: (string) (len=18) "kube-apiserver-pod",
2022-05-24T18:42:19.575102752Z  SecretNamePrefixes: ([]string) (len=3 cap=4) {
2022-05-24T18:42:19.575102752Z   (string) (len=11) "etcd-client",
2022-05-24T18:42:19.575102752Z   (string) (len=34) "localhost-recovery-serving-certkey",
2022-05-24T18:42:19.575102752Z   (string) (len=31) "localhost-recovery-client-token"
2022-05-24T18:42:19.575102752Z  },
2022-05-24T18:42:19.575102752Z  OptionalSecretNamePrefixes: ([]string) (len=2 cap=2) {
2022-05-24T18:42:19.575102752Z   (string) (len=17) "encryption-config",
2022-05-24T18:42:19.575102752Z   (string) (len=21) "webhook-authenticator"
2022-05-24T18:42:19.575102752Z  },
2022-05-24T18:42:19.575102752Z  ConfigMapNamePrefixes: ([]string) (len=8 cap=8) {
2022-05-24T18:42:19.575102752Z   (string) (len=18) "kube-apiserver-pod",
2022-05-24T18:42:19.575102752Z   (string) (len=6) "config",
2022-05-24T18:42:19.575102752Z   (string) (len=37) "kube-apiserver-cert-syncer-kubeconfig",
2022-05-24T18:42:19.575102752Z   (string) (len=28) "bound-sa-token-signing-certs",
2022-05-24T18:42:19.575102752Z   (string) (len=15) "etcd-serving-ca",
2022-05-24T18:42:19.575102752Z   (string) (len=18) "kubelet-serving-ca",
2022-05-24T18:42:19.575102752Z   (string) (len=22) "sa-token-signing-certs",
2022-05-24T18:42:19.575102752Z   (string) (len=29) "kube-apiserver-audit-policies"
2022-05-24T18:42:19.575102752Z  },
2022-05-24T18:42:19.575102752Z  OptionalConfigMapNamePrefixes: ([]string) (len=3 cap=4) {
2022-05-24T18:42:19.575102752Z   (string) (len=14) "oauth-metadata",
2022-05-24T18:42:19.575102752Z   (string) (len=12) "cloud-config",
2022-05-24T18:42:19.575102752Z   (string) (len=24) "kube-apiserver-server-ca"
2022-05-24T18:42:19.575102752Z  },
2022-05-24T18:42:19.575102752Z  CertSecretNames: ([]string) (len=10 cap=16) {
2022-05-24T18:42:19.575102752Z   (string) (len=17) "aggregator-client",
2022-05-24T18:42:19.575102752Z   (string) (len=30) "localhost-serving-cert-certkey",
2022-05-24T18:42:19.575102752Z   (string) (len=31) "service-network-serving-certkey",
2022-05-24T18:42:19.575102752Z   (string) (len=37) "external-loadbalancer-serving-certkey",
2022-05-24T18:42:19.575102752Z   (string) (len=37) "internal-loadbalancer-serving-certkey",
2022-05-24T18:42:19.575102752Z   (string) (len=33) "bound-service-account-signing-key",
2022-05-24T18:42:19.575102752Z   (string) (len=40) "control-plane-node-admin-client-cert-key",
2022-05-24T18:42:19.575102752Z   (string) (len=31) "check-endpoints-client-cert-key",
2022-05-24T18:42:19.575102752Z   (string) (len=14) "kubelet-client",
2022-05-24T18:42:19.575102752Z   (string) (len=16) "node-kubeconfigs"
2022-05-24T18:42:19.575102752Z  },
2022-05-24T18:42:19.575102752Z  OptionalCertSecretNamePrefixes: ([]string) (len=11 cap=16) {
2022-05-24T18:42:19.575102752Z   (string) (len=17) "user-serving-cert",
2022-05-24T18:42:19.575102752Z   (string) (len=21) "user-serving-cert-000",
2022-05-24T18:42:19.575102752Z   (string) (len=21) "user-serving-cert-001",
2022-05-24T18:42:19.575102752Z   (string) (len=21) "user-serving-cert-002",
2022-05-24T18:42:19.575102752Z   (string) (len=21) "user-serving-cert-003",
2022-05-24T18:42:19.575102752Z   (string) (len=21) "user-serving-cert-004",
2022-05-24T18:42:19.575102752Z   (string) (len=21) "user-serving-cert-005",
2022-05-24T18:42:19.575102752Z   (string) (len=21) "user-serving-cert-006",
2022-05-24T18:42:19.575102752Z   (string) (len=21) "user-serving-cert-007",
2022-05-24T18:42:19.575102752Z   (string) (len=21) "user-serving-cert-008",
2022-05-24T18:42:19.575102752Z   (string) (len=21) "user-serving-cert-009"
2022-05-24T18:42:19.575102752Z  },
2022-05-24T18:42:19.575102752Z  CertConfigMapNamePrefixes: ([]string) (len=4 cap=4) {
2022-05-24T18:42:19.575102752Z   (string) (len=20) "aggregator-client-ca",
2022-05-24T18:42:19.575102752Z   (string) (len=9) "client-ca",
2022-05-24T18:42:19.575102752Z   (string) (len=29) "control-plane-node-kubeconfig",
2022-05-24T18:42:19.575102752Z   (string) (len=26) "check-endpoints-kubeconfig"
2022-05-24T18:42:19.575102752Z  },
2022-05-24T18:42:19.575102752Z  OptionalCertConfigMapNamePrefixes: ([]string) (len=1 cap=1) {
2022-05-24T18:42:19.575102752Z   (string) (len=17) "trusted-ca-bundle"
2022-05-24T18:42:19.575102752Z  },
2022-05-24T18:42:19.575102752Z  CertDir: (string) (len=57) "/etc/kubernetes/static-pod-resources/kube-apiserver-certs",
2022-05-24T18:42:19.575102752Z  ResourceDir: (string) (len=36) "/etc/kubernetes/static-pod-resources",
2022-05-24T18:42:19.575102752Z  PodManifestDir: (string) (len=25) "/etc/kubernetes/manifests",
2022-05-24T18:42:19.575102752Z  Timeout: (time.Duration) 2m0s,
2022-05-24T18:42:19.575102752Z  StaticPodManifestsLockFile: (string) "",
2022-05-24T18:42:19.575102752Z  PodMutationFns: ([]installerpod.PodMutationFunc) <nil>,
2022-05-24T18:42:19.575102752Z  KubeletVersion: (string) ""
2022-05-24T18:42:19.575102752Z })
2022-05-24T18:42:50.611514677Z I0524 18:42:50.611474       1 cmd.go:437] Got kubelet version 1.23.5+b463d71 on target node ip-10-0-169-205.ec2.internal
2022-05-24T18:42:50.611514677Z I0524 18:42:50.611498       1 cmd.go:289] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11" ...
2022-05-24T18:42:50.611599257Z I0524 18:42:50.611585       1 cmd.go:217] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11" ...
2022-05-24T18:42:50.611599257Z I0524 18:42:50.611596       1 cmd.go:225] Getting secrets ...
2022-05-24T18:42:50.613572714Z I0524 18:42:50.613541       1 copy.go:32] Got secret openshift-kube-apiserver/etcd-client-11
2022-05-24T18:42:50.615715142Z I0524 18:42:50.615689       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-client-token-11
2022-05-24T18:42:50.619649414Z I0524 18:42:50.619624       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-serving-certkey-11
2022-05-24T18:42:50.622485367Z I0524 18:42:50.622460       1 copy.go:24] Failed to get secret openshift-kube-apiserver/encryption-config-11: secrets "encryption-config-11" not found
2022-05-24T18:42:50.624384426Z I0524 18:42:50.624359       1 copy.go:32] Got secret openshift-kube-apiserver/webhook-authenticator-11
2022-05-24T18:42:50.624409295Z I0524 18:42:50.624392       1 cmd.go:238] Getting config maps ...
2022-05-24T18:42:50.626313822Z I0524 18:42:50.626287       1 copy.go:60] Got configMap openshift-kube-apiserver/bound-sa-token-signing-certs-11
2022-05-24T18:42:50.628288325Z I0524 18:42:50.628263       1 copy.go:60] Got configMap openshift-kube-apiserver/config-11
2022-05-24T18:42:50.631699111Z I0524 18:42:50.631675       1 copy.go:60] Got configMap openshift-kube-apiserver/etcd-serving-ca-11
2022-05-24T18:42:50.802984391Z I0524 18:42:50.802948       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-audit-policies-11
2022-05-24T18:42:51.003909323Z I0524 18:42:51.003866       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-cert-syncer-kubeconfig-11
2022-05-24T18:42:51.204936960Z I0524 18:42:51.204902       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-pod-11
2022-05-24T18:42:51.403225969Z I0524 18:42:51.403171       1 copy.go:60] Got configMap openshift-kube-apiserver/kubelet-serving-ca-11
2022-05-24T18:42:51.604230672Z I0524 18:42:51.604191       1 copy.go:60] Got configMap openshift-kube-apiserver/sa-token-signing-certs-11
2022-05-24T18:42:51.803993702Z I0524 18:42:51.803955       1 copy.go:52] Failed to get config map openshift-kube-apiserver/cloud-config-11: configmaps "cloud-config-11" not found
2022-05-24T18:42:52.003680569Z I0524 18:42:52.003646       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-server-ca-11
2022-05-24T18:42:52.204692850Z I0524 18:42:52.204656       1 copy.go:60] Got configMap openshift-kube-apiserver/oauth-metadata-11
2022-05-24T18:42:52.204726710Z I0524 18:42:52.204690       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/etcd-client" ...
2022-05-24T18:42:52.204795352Z I0524 18:42:52.204778       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/etcd-client/tls.crt" ...
2022-05-24T18:42:52.204862837Z I0524 18:42:52.204848       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/etcd-client/tls.key" ...
2022-05-24T18:42:52.204912315Z I0524 18:42:52.204900       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token" ...
2022-05-24T18:42:52.204945579Z I0524 18:42:52.204932       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token/ca.crt" ...
2022-05-24T18:42:52.204993634Z I0524 18:42:52.204981       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token/namespace" ...
2022-05-24T18:42:52.205038882Z I0524 18:42:52.205026       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token/service-ca.crt" ...
2022-05-24T18:42:52.205097374Z I0524 18:42:52.205080       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token/token" ...
2022-05-24T18:42:52.205142148Z I0524 18:42:52.205130       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-serving-certkey" ...
2022-05-24T18:42:52.205187951Z I0524 18:42:52.205161       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-serving-certkey/tls.crt" ...
2022-05-24T18:42:52.205236268Z I0524 18:42:52.205223       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-serving-certkey/tls.key" ...
2022-05-24T18:42:52.205284362Z I0524 18:42:52.205272       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/webhook-authenticator" ...
2022-05-24T18:42:52.205314792Z I0524 18:42:52.205303       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/webhook-authenticator/kubeConfig" ...
2022-05-24T18:42:52.205361873Z I0524 18:42:52.205349       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/bound-sa-token-signing-certs" ...
2022-05-24T18:42:52.205409707Z I0524 18:42:52.205396       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/bound-sa-token-signing-certs/service-account-001.pub" ...
2022-05-24T18:42:52.205455903Z I0524 18:42:52.205443       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/config" ...
2022-05-24T18:42:52.205488766Z I0524 18:42:52.205475       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/config/config.yaml" ...
2022-05-24T18:42:52.205533549Z I0524 18:42:52.205521       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/etcd-serving-ca" ...
2022-05-24T18:42:52.205569413Z I0524 18:42:52.205557       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/etcd-serving-ca/ca-bundle.crt" ...
2022-05-24T18:42:52.205615854Z I0524 18:42:52.205604       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-audit-policies" ...
2022-05-24T18:42:52.205645016Z I0524 18:42:52.205633       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-audit-policies/policy.yaml" ...
2022-05-24T18:42:52.205689992Z I0524 18:42:52.205677       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-cert-syncer-kubeconfig" ...
2022-05-24T18:42:52.205723354Z I0524 18:42:52.205711       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig" ...
2022-05-24T18:42:52.205767890Z I0524 18:42:52.205756       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-pod" ...
2022-05-24T18:42:52.205798581Z I0524 18:42:52.205786       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-pod/forceRedeploymentReason" ...
2022-05-24T18:42:52.205843606Z I0524 18:42:52.205831       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-pod/pod.yaml" ...
2022-05-24T18:42:52.205894567Z I0524 18:42:52.205882       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-pod/version" ...
2022-05-24T18:42:52.206390328Z I0524 18:42:52.206357       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kubelet-serving-ca" ...
2022-05-24T18:42:52.206481146Z I0524 18:42:52.206454       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kubelet-serving-ca/ca-bundle.crt" ...
2022-05-24T18:42:52.206553189Z I0524 18:42:52.206536       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/sa-token-signing-certs" ...
2022-05-24T18:42:52.206634457Z I0524 18:42:52.206611       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/sa-token-signing-certs/service-account-001.pub" ...
2022-05-24T18:42:52.206726746Z I0524 18:42:52.206709       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/sa-token-signing-certs/service-account-002.pub" ...
2022-05-24T18:42:52.206802542Z I0524 18:42:52.206786       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-server-ca" ...
2022-05-24T18:42:52.206912200Z I0524 18:42:52.206889       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-server-ca/ca-bundle.crt" ...
2022-05-24T18:42:52.207024094Z I0524 18:42:52.207007       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/oauth-metadata" ...
2022-05-24T18:42:52.207163828Z I0524 18:42:52.207144       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/oauth-metadata/oauthMetadata" ...
2022-05-24T18:42:52.207284123Z I0524 18:42:52.207267       1 cmd.go:217] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs" ...
2022-05-24T18:42:52.207284123Z I0524 18:42:52.207280       1 cmd.go:225] Getting secrets ...
2022-05-24T18:42:52.403656251Z I0524 18:42:52.403607       1 copy.go:32] Got secret openshift-kube-apiserver/aggregator-client
2022-05-24T18:42:52.605008240Z I0524 18:42:52.604957       1 copy.go:32] Got secret openshift-kube-apiserver/bound-service-account-signing-key
2022-05-24T18:42:52.804278625Z I0524 18:42:52.804241       1 copy.go:32] Got secret openshift-kube-apiserver/check-endpoints-client-cert-key
2022-05-24T18:42:53.004703273Z I0524 18:42:53.004666       1 copy.go:32] Got secret openshift-kube-apiserver/control-plane-node-admin-client-cert-key
2022-05-24T18:42:53.203639836Z I0524 18:42:53.203594       1 copy.go:32] Got secret openshift-kube-apiserver/external-loadbalancer-serving-certkey
2022-05-24T18:42:53.406887307Z I0524 18:42:53.406847       1 copy.go:32] Got secret openshift-kube-apiserver/internal-loadbalancer-serving-certkey
2022-05-24T18:42:53.603254544Z I0524 18:42:53.603217       1 copy.go:32] Got secret openshift-kube-apiserver/kubelet-client
2022-05-24T18:42:53.803809002Z I0524 18:42:53.803774       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-serving-cert-certkey
2022-05-24T18:42:54.004924718Z I0524 18:42:54.004856       1 copy.go:32] Got secret openshift-kube-apiserver/node-kubeconfigs
2022-05-24T18:42:54.207329498Z I0524 18:42:54.207277       1 copy.go:32] Got secret openshift-kube-apiserver/service-network-serving-certkey
2022-05-24T18:42:54.420355030Z I0524 18:42:54.420319       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert: secrets "user-serving-cert" not found
2022-05-24T18:42:54.618518809Z I0524 18:42:54.617490       1 copy.go:32] Got secret openshift-kube-apiserver/user-serving-cert-000
2022-05-24T18:42:54.845622730Z I0524 18:42:54.845578       1 copy.go:32] Got secret openshift-kube-apiserver/user-serving-cert-001
2022-05-24T18:42:55.017528479Z I0524 18:42:55.017491       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-002: secrets "user-serving-cert-002" not found
2022-05-24T18:42:55.205249198Z I0524 18:42:55.205169       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-003: secrets "user-serving-cert-003" not found
2022-05-24T18:42:55.405069538Z I0524 18:42:55.405032       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-004: secrets "user-serving-cert-004" not found
2022-05-24T18:42:55.604660251Z I0524 18:42:55.604627       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-005: secrets "user-serving-cert-005" not found
2022-05-24T18:42:55.803881347Z I0524 18:42:55.803832       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-006: secrets "user-serving-cert-006" not found
2022-05-24T18:42:56.004468170Z I0524 18:42:56.004436       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-007: secrets "user-serving-cert-007" not found
2022-05-24T18:42:56.211577812Z I0524 18:42:56.211446       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-008: secrets "user-serving-cert-008" not found
2022-05-24T18:42:56.408228733Z I0524 18:42:56.407641       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-009: secrets "user-serving-cert-009" not found
2022-05-24T18:42:56.408228733Z I0524 18:42:56.407676       1 cmd.go:238] Getting config maps ...
2022-05-24T18:42:56.603811489Z I0524 18:42:56.603779       1 copy.go:60] Got configMap openshift-kube-apiserver/aggregator-client-ca
2022-05-24T18:42:56.804027992Z I0524 18:42:56.803992       1 copy.go:60] Got configMap openshift-kube-apiserver/check-endpoints-kubeconfig
2022-05-24T18:42:57.009749134Z I0524 18:42:57.009715       1 copy.go:60] Got configMap openshift-kube-apiserver/client-ca
2022-05-24T18:42:57.203036295Z I0524 18:42:57.202997       1 copy.go:60] Got configMap openshift-kube-apiserver/control-plane-node-kubeconfig
2022-05-24T18:42:57.417284399Z I0524 18:42:57.417241       1 copy.go:60] Got configMap openshift-kube-apiserver/trusted-ca-bundle
2022-05-24T18:42:57.417801350Z I0524 18:42:57.417769       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client" ...
2022-05-24T18:42:57.417823326Z I0524 18:42:57.417804       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.crt" ...
2022-05-24T18:42:57.418035811Z I0524 18:42:57.418013       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.key" ...
2022-05-24T18:42:57.418241543Z I0524 18:42:57.418221       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key" ...
2022-05-24T18:42:57.418306385Z I0524 18:42:57.418276       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.pub" ...
2022-05-24T18:42:57.418439401Z I0524 18:42:57.418420       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.key" ...
2022-05-24T18:42:57.418592305Z I0524 18:42:57.418525       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key" ...
2022-05-24T18:42:57.418592305Z I0524 18:42:57.418544       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.key" ...
2022-05-24T18:42:57.418652375Z I0524 18:42:57.418635       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.crt" ...
2022-05-24T18:42:57.418734186Z I0524 18:42:57.418714       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key" ...
2022-05-24T18:42:57.418748428Z I0524 18:42:57.418732       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.crt" ...
2022-05-24T18:42:57.418840810Z I0524 18:42:57.418824       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.key" ...
2022-05-24T18:42:57.418917381Z I0524 18:42:57.418901       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey" ...
2022-05-24T18:42:57.418929623Z I0524 18:42:57.418914       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.crt" ...
2022-05-24T18:42:57.419035478Z I0524 18:42:57.419006       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.key" ...
2022-05-24T18:42:57.419112452Z I0524 18:42:57.419089       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey" ...
2022-05-24T18:42:57.419112452Z I0524 18:42:57.419105       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.crt" ...
2022-05-24T18:42:57.419306531Z I0524 18:42:57.419281       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.key" ...
2022-05-24T18:42:57.419437474Z I0524 18:42:57.419412       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client" ...
2022-05-24T18:42:57.419462483Z I0524 18:42:57.419434       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.crt" ...
2022-05-24T18:42:57.419538103Z I0524 18:42:57.419512       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.key" ...
2022-05-24T18:42:57.419616866Z I0524 18:42:57.419597       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey" ...
2022-05-24T18:42:57.419630916Z I0524 18:42:57.419615       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.crt" ...
2022-05-24T18:42:57.419730506Z I0524 18:42:57.419709       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.key" ...
2022-05-24T18:42:57.419862016Z I0524 18:42:57.419845       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs" ...
2022-05-24T18:42:57.419902878Z I0524 18:42:57.419889       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost-recovery.kubeconfig" ...
2022-05-24T18:42:57.420041134Z I0524 18:42:57.420027       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost.kubeconfig" ...
2022-05-24T18:42:57.420172951Z I0524 18:42:57.420148       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-ext.kubeconfig" ...
2022-05-24T18:42:57.420278701Z I0524 18:42:57.420258       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-int.kubeconfig" ...
2022-05-24T18:42:57.420392124Z I0524 18:42:57.420372       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey" ...
2022-05-24T18:42:57.420406899Z I0524 18:42:57.420392       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.crt" ...
2022-05-24T18:42:57.420548645Z I0524 18:42:57.420530       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.key" ...
2022-05-24T18:42:57.420680951Z I0524 18:42:57.420666       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-000" ...
2022-05-24T18:42:57.420716360Z I0524 18:42:57.420700       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-000/tls.crt" ...
2022-05-24T18:42:57.420812606Z I0524 18:42:57.420797       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-000/tls.key" ...
2022-05-24T18:42:57.420901820Z I0524 18:42:57.420888       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-001" ...
2022-05-24T18:42:57.420935899Z I0524 18:42:57.420921       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-001/tls.crt" ...
2022-05-24T18:42:57.421034851Z I0524 18:42:57.421019       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-001/tls.key" ...
2022-05-24T18:42:57.421112877Z I0524 18:42:57.421097       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca" ...
2022-05-24T18:42:57.421127468Z I0524 18:42:57.421116       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca/ca-bundle.crt" ...
2022-05-24T18:42:57.421289450Z I0524 18:42:57.421244       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig" ...
2022-05-24T18:42:57.421289450Z I0524 18:42:57.421263       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig/kubeconfig" ...
2022-05-24T18:42:57.421382693Z I0524 18:42:57.421358       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca" ...
2022-05-24T18:42:57.421398420Z I0524 18:42:57.421380       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca/ca-bundle.crt" ...
2022-05-24T18:42:57.421528639Z I0524 18:42:57.421508       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig" ...
2022-05-24T18:42:57.421542476Z I0524 18:42:57.421528       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig/kubeconfig" ...
2022-05-24T18:42:57.421658963Z I0524 18:42:57.421637       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle" ...
2022-05-24T18:42:57.421727530Z I0524 18:42:57.421708       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle/ca-bundle.crt" ...
2022-05-24T18:42:57.421957821Z I0524 18:42:57.421941       1 cmd.go:331] Getting pod configmaps/kube-apiserver-pod-11 -n openshift-kube-apiserver
2022-05-24T18:42:57.604773116Z I0524 18:42:57.604718       1 cmd.go:347] Creating directory for static pod manifest "/etc/kubernetes/manifests" ...
2022-05-24T18:42:57.604773116Z I0524 18:42:57.604749       1 cmd.go:375] Writing a pod under "kube-apiserver-pod.yaml" key 
2022-05-24T18:42:57.604773116Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"11"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"11"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.02022-05-24T18:42:57.604816021Z -art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
2022-05-24T18:42:57.607954576Z I0524 18:42:57.607925       1 cmd.go:596] Writing pod manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/kube-apiserver-pod.yaml" ...
2022-05-24T18:42:57.608120690Z I0524 18:42:57.608103       1 cmd.go:603] Removed existing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2022-05-24T18:42:57.608139585Z I0524 18:42:57.608118       1 cmd.go:607] Writing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2022-05-24T18:42:57.608139585Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"11"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"11"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","c2022-05-24T18:42:57.608152294Z ommand":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
