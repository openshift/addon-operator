2022-05-24T18:38:32.805448158Z I0524 18:38:32.805299       1 cmd.go:92] &{<nil> true {false} installer true map[cert-configmaps:0xc00080ee60 cert-dir:0xc00080f040 cert-secrets:0xc00080edc0 configmaps:0xc00080e960 namespace:0xc00080e780 optional-cert-configmaps:0xc00080efa0 optional-cert-secrets:0xc00080ef00 optional-configmaps:0xc00080eaa0 optional-secrets:0xc00080ea00 pod:0xc00080e820 pod-manifest-dir:0xc00080ebe0 resource-dir:0xc00080eb40 revision:0xc00080e6e0 secrets:0xc00080e8c0 v:0xc000888b40] [0xc000888b40 0xc00080e6e0 0xc00080e780 0xc00080e820 0xc00080eb40 0xc00080ebe0 0xc00080e960 0xc00080eaa0 0xc00080e8c0 0xc00080ea00 0xc00080f040 0xc00080ee60 0xc00080efa0 0xc00080edc0 0xc00080ef00] [] map[add-dir-header:0xc0008883c0 alsologtostderr:0xc000888460 cert-configmaps:0xc00080ee60 cert-dir:0xc00080f040 cert-secrets:0xc00080edc0 configmaps:0xc00080e960 help:0xc000888f00 kubeconfig:0xc00080e640 log-backtrace-at:0xc0008885a0 log-dir:0xc000888640 log-file:0xc0008886e0 log-file-max-size:0xc000888780 log-flush-frequency:0xc000888500 logtostderr:0xc000888820 namespace:0xc00080e780 one-output:0xc0008888c0 optional-cert-configmaps:0xc00080efa0 optional-cert-secrets:0xc00080ef00 optional-configmaps:0xc00080eaa0 optional-secrets:0xc00080ea00 pod:0xc00080e820 pod-manifest-dir:0xc00080ebe0 pod-manifests-lock-file:0xc00080ed20 resource-dir:0xc00080eb40 revision:0xc00080e6e0 secrets:0xc00080e8c0 skip-headers:0xc000888960 skip-log-headers:0xc000888a00 stderrthreshold:0xc000888aa0 timeout-duration:0xc00080ec80 v:0xc000888b40 vmodule:0xc000888be0] [0xc00080e640 0xc00080e6e0 0xc00080e780 0xc00080e820 0xc00080e8c0 0xc00080e960 0xc00080ea00 0xc00080eaa0 0xc00080eb40 0xc00080ebe0 0xc00080ec80 0xc00080ed20 0xc00080edc0 0xc00080ee60 0xc00080ef00 0xc00080efa0 0xc00080f040 0xc0008883c0 0xc000888460 0xc0008885a0 0xc000888640 0xc0008886e0 0xc000888780 0xc000888500 0xc000888820 0xc0008888c0 0xc000888960 0xc000888a00 0xc000888aa0 0xc000888b40 0xc000888be0 0xc000888f00] [0xc0008883c0 0xc000888460 0xc00080ee60 0xc00080f040 0xc00080edc0 0xc00080e960 0xc000888f00 0xc00080e640 0xc0008885a0 0xc000888640 0xc0008886e0 0xc000888780 0xc000888500 0xc000888820 0xc00080e780 0xc0008888c0 0xc00080efa0 0xc00080ef00 0xc00080eaa0 0xc00080ea00 0xc00080e820 0xc00080ebe0 0xc00080ed20 0xc00080eb40 0xc00080e6e0 0xc00080e8c0 0xc000888960 0xc000888a00 0xc000888aa0 0xc00080ec80 0xc000888b40 0xc000888be0] map[104:0xc000888f00 118:0xc000888b40] [] -1 0 0xc0006901e0 true 0xa27c00 []}
2022-05-24T18:38:32.805537856Z I0524 18:38:32.805494       1 cmd.go:93] (*installerpod.InstallOptions)(0xc000661a00)({
2022-05-24T18:38:32.805537856Z  KubeConfig: (string) "",
2022-05-24T18:38:32.805537856Z  KubeClient: (kubernetes.Interface) <nil>,
2022-05-24T18:38:32.805537856Z  Revision: (string) (len=2) "11",
2022-05-24T18:38:32.805537856Z  NodeName: (string) "",
2022-05-24T18:38:32.805537856Z  Namespace: (string) (len=24) "openshift-kube-apiserver",
2022-05-24T18:38:32.805537856Z  PodConfigMapNamePrefix: (string) (len=18) "kube-apiserver-pod",
2022-05-24T18:38:32.805537856Z  SecretNamePrefixes: ([]string) (len=3 cap=4) {
2022-05-24T18:38:32.805537856Z   (string) (len=11) "etcd-client",
2022-05-24T18:38:32.805537856Z   (string) (len=34) "localhost-recovery-serving-certkey",
2022-05-24T18:38:32.805537856Z   (string) (len=31) "localhost-recovery-client-token"
2022-05-24T18:38:32.805537856Z  },
2022-05-24T18:38:32.805537856Z  OptionalSecretNamePrefixes: ([]string) (len=2 cap=2) {
2022-05-24T18:38:32.805537856Z   (string) (len=17) "encryption-config",
2022-05-24T18:38:32.805537856Z   (string) (len=21) "webhook-authenticator"
2022-05-24T18:38:32.805537856Z  },
2022-05-24T18:38:32.805537856Z  ConfigMapNamePrefixes: ([]string) (len=8 cap=8) {
2022-05-24T18:38:32.805537856Z   (string) (len=18) "kube-apiserver-pod",
2022-05-24T18:38:32.805537856Z   (string) (len=6) "config",
2022-05-24T18:38:32.805537856Z   (string) (len=37) "kube-apiserver-cert-syncer-kubeconfig",
2022-05-24T18:38:32.805537856Z   (string) (len=28) "bound-sa-token-signing-certs",
2022-05-24T18:38:32.805537856Z   (string) (len=15) "etcd-serving-ca",
2022-05-24T18:38:32.805537856Z   (string) (len=18) "kubelet-serving-ca",
2022-05-24T18:38:32.805537856Z   (string) (len=22) "sa-token-signing-certs",
2022-05-24T18:38:32.805537856Z   (string) (len=29) "kube-apiserver-audit-policies"
2022-05-24T18:38:32.805537856Z  },
2022-05-24T18:38:32.805537856Z  OptionalConfigMapNamePrefixes: ([]string) (len=3 cap=4) {
2022-05-24T18:38:32.805537856Z   (string) (len=14) "oauth-metadata",
2022-05-24T18:38:32.805537856Z   (string) (len=12) "cloud-config",
2022-05-24T18:38:32.805537856Z   (string) (len=24) "kube-apiserver-server-ca"
2022-05-24T18:38:32.805537856Z  },
2022-05-24T18:38:32.805537856Z  CertSecretNames: ([]string) (len=10 cap=16) {
2022-05-24T18:38:32.805537856Z   (string) (len=17) "aggregator-client",
2022-05-24T18:38:32.805537856Z   (string) (len=30) "localhost-serving-cert-certkey",
2022-05-24T18:38:32.805537856Z   (string) (len=31) "service-network-serving-certkey",
2022-05-24T18:38:32.805537856Z   (string) (len=37) "external-loadbalancer-serving-certkey",
2022-05-24T18:38:32.805537856Z   (string) (len=37) "internal-loadbalancer-serving-certkey",
2022-05-24T18:38:32.805537856Z   (string) (len=33) "bound-service-account-signing-key",
2022-05-24T18:38:32.805537856Z   (string) (len=40) "control-plane-node-admin-client-cert-key",
2022-05-24T18:38:32.805537856Z   (string) (len=31) "check-endpoints-client-cert-key",
2022-05-24T18:38:32.805537856Z   (string) (len=14) "kubelet-client",
2022-05-24T18:38:32.805537856Z   (string) (len=16) "node-kubeconfigs"
2022-05-24T18:38:32.805537856Z  },
2022-05-24T18:38:32.805537856Z  OptionalCertSecretNamePrefixes: ([]string) (len=11 cap=16) {
2022-05-24T18:38:32.805537856Z   (string) (len=17) "user-serving-cert",
2022-05-24T18:38:32.805537856Z   (string) (len=21) "user-serving-cert-000",
2022-05-24T18:38:32.805537856Z   (string) (len=21) "user-serving-cert-001",
2022-05-24T18:38:32.805537856Z   (string) (len=21) "user-serving-cert-002",
2022-05-24T18:38:32.805537856Z   (string) (len=21) "user-serving-cert-003",
2022-05-24T18:38:32.805537856Z   (string) (len=21) "user-serving-cert-004",
2022-05-24T18:38:32.805537856Z   (string) (len=21) "user-serving-cert-005",
2022-05-24T18:38:32.805537856Z   (string) (len=21) "user-serving-cert-006",
2022-05-24T18:38:32.805537856Z   (string) (len=21) "user-serving-cert-007",
2022-05-24T18:38:32.805537856Z   (string) (len=21) "user-serving-cert-008",
2022-05-24T18:38:32.805537856Z   (string) (len=21) "user-serving-cert-009"
2022-05-24T18:38:32.805537856Z  },
2022-05-24T18:38:32.805537856Z  CertConfigMapNamePrefixes: ([]string) (len=4 cap=4) {
2022-05-24T18:38:32.805537856Z   (string) (len=20) "aggregator-client-ca",
2022-05-24T18:38:32.805537856Z   (string) (len=9) "client-ca",
2022-05-24T18:38:32.805537856Z   (string) (len=29) "control-plane-node-kubeconfig",
2022-05-24T18:38:32.805537856Z   (string) (len=26) "check-endpoints-kubeconfig"
2022-05-24T18:38:32.805537856Z  },
2022-05-24T18:38:32.805537856Z  OptionalCertConfigMapNamePrefixes: ([]string) (len=1 cap=1) {
2022-05-24T18:38:32.805537856Z   (string) (len=17) "trusted-ca-bundle"
2022-05-24T18:38:32.805537856Z  },
2022-05-24T18:38:32.805537856Z  CertDir: (string) (len=57) "/etc/kubernetes/static-pod-resources/kube-apiserver-certs",
2022-05-24T18:38:32.805537856Z  ResourceDir: (string) (len=36) "/etc/kubernetes/static-pod-resources",
2022-05-24T18:38:32.805537856Z  PodManifestDir: (string) (len=25) "/etc/kubernetes/manifests",
2022-05-24T18:38:32.805537856Z  Timeout: (time.Duration) 2m0s,
2022-05-24T18:38:32.805537856Z  StaticPodManifestsLockFile: (string) "",
2022-05-24T18:38:32.805537856Z  PodMutationFns: ([]installerpod.PodMutationFunc) <nil>,
2022-05-24T18:38:32.805537856Z  KubeletVersion: (string) ""
2022-05-24T18:38:32.805537856Z })
2022-05-24T18:39:03.985135973Z I0524 18:39:03.985100       1 cmd.go:437] Got kubelet version 1.23.5+b463d71 on target node ip-10-0-138-197.ec2.internal
2022-05-24T18:39:03.985135973Z I0524 18:39:03.985125       1 cmd.go:289] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11" ...
2022-05-24T18:39:03.985214483Z I0524 18:39:03.985202       1 cmd.go:217] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11" ...
2022-05-24T18:39:03.985223425Z I0524 18:39:03.985213       1 cmd.go:225] Getting secrets ...
2022-05-24T18:39:03.988777654Z I0524 18:39:03.988757       1 copy.go:32] Got secret openshift-kube-apiserver/etcd-client-11
2022-05-24T18:39:03.993826108Z I0524 18:39:03.993790       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-client-token-11
2022-05-24T18:39:03.997016145Z I0524 18:39:03.996994       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-serving-certkey-11
2022-05-24T18:39:04.000363881Z I0524 18:39:04.000344       1 copy.go:24] Failed to get secret openshift-kube-apiserver/encryption-config-11: secrets "encryption-config-11" not found
2022-05-24T18:39:04.005077150Z I0524 18:39:04.005057       1 copy.go:32] Got secret openshift-kube-apiserver/webhook-authenticator-11
2022-05-24T18:39:04.005105709Z I0524 18:39:04.005082       1 cmd.go:238] Getting config maps ...
2022-05-24T18:39:04.008163297Z I0524 18:39:04.008144       1 copy.go:60] Got configMap openshift-kube-apiserver/bound-sa-token-signing-certs-11
2022-05-24T18:39:04.011284818Z I0524 18:39:04.011262       1 copy.go:60] Got configMap openshift-kube-apiserver/config-11
2022-05-24T18:39:04.014291159Z I0524 18:39:04.014271       1 copy.go:60] Got configMap openshift-kube-apiserver/etcd-serving-ca-11
2022-05-24T18:39:04.178944910Z I0524 18:39:04.178915       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-audit-policies-11
2022-05-24T18:39:04.380461080Z I0524 18:39:04.380428       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-cert-syncer-kubeconfig-11
2022-05-24T18:39:04.579244917Z I0524 18:39:04.579201       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-pod-11
2022-05-24T18:39:04.780565904Z I0524 18:39:04.780529       1 copy.go:60] Got configMap openshift-kube-apiserver/kubelet-serving-ca-11
2022-05-24T18:39:04.978486741Z I0524 18:39:04.978444       1 copy.go:60] Got configMap openshift-kube-apiserver/sa-token-signing-certs-11
2022-05-24T18:39:05.179077229Z I0524 18:39:05.179038       1 copy.go:52] Failed to get config map openshift-kube-apiserver/cloud-config-11: configmaps "cloud-config-11" not found
2022-05-24T18:39:05.378860801Z I0524 18:39:05.378828       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-server-ca-11
2022-05-24T18:39:05.580198289Z I0524 18:39:05.580161       1 copy.go:60] Got configMap openshift-kube-apiserver/oauth-metadata-11
2022-05-24T18:39:05.580198289Z I0524 18:39:05.580186       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/etcd-client" ...
2022-05-24T18:39:05.580299940Z I0524 18:39:05.580283       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/etcd-client/tls.crt" ...
2022-05-24T18:39:05.580366980Z I0524 18:39:05.580354       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/etcd-client/tls.key" ...
2022-05-24T18:39:05.580443981Z I0524 18:39:05.580431       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token" ...
2022-05-24T18:39:05.580474337Z I0524 18:39:05.580462       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token/ca.crt" ...
2022-05-24T18:39:05.580522464Z I0524 18:39:05.580510       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token/namespace" ...
2022-05-24T18:39:05.580564409Z I0524 18:39:05.580552       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token/service-ca.crt" ...
2022-05-24T18:39:05.580659277Z I0524 18:39:05.580635       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token/token" ...
2022-05-24T18:39:05.580698511Z I0524 18:39:05.580684       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-serving-certkey" ...
2022-05-24T18:39:05.580729832Z I0524 18:39:05.580718       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-serving-certkey/tls.key" ...
2022-05-24T18:39:05.580774711Z I0524 18:39:05.580760       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-serving-certkey/tls.crt" ...
2022-05-24T18:39:05.580818257Z I0524 18:39:05.580806       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/webhook-authenticator" ...
2022-05-24T18:39:05.580847852Z I0524 18:39:05.580835       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/webhook-authenticator/kubeConfig" ...
2022-05-24T18:39:05.580891499Z I0524 18:39:05.580879       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/bound-sa-token-signing-certs" ...
2022-05-24T18:39:05.580944148Z I0524 18:39:05.580931       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/bound-sa-token-signing-certs/service-account-001.pub" ...
2022-05-24T18:39:05.580989705Z I0524 18:39:05.580978       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/config" ...
2022-05-24T18:39:05.581021545Z I0524 18:39:05.581009       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/config/config.yaml" ...
2022-05-24T18:39:05.581068001Z I0524 18:39:05.581056       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/etcd-serving-ca" ...
2022-05-24T18:39:05.581105106Z I0524 18:39:05.581087       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/etcd-serving-ca/ca-bundle.crt" ...
2022-05-24T18:39:05.581147175Z I0524 18:39:05.581135       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-audit-policies" ...
2022-05-24T18:39:05.581177122Z I0524 18:39:05.581164       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-audit-policies/policy.yaml" ...
2022-05-24T18:39:05.581222379Z I0524 18:39:05.581210       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-cert-syncer-kubeconfig" ...
2022-05-24T18:39:05.581254572Z I0524 18:39:05.581242       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig" ...
2022-05-24T18:39:05.581309194Z I0524 18:39:05.581297       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-pod" ...
2022-05-24T18:39:05.581340425Z I0524 18:39:05.581328       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-pod/forceRedeploymentReason" ...
2022-05-24T18:39:05.581386606Z I0524 18:39:05.581374       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-pod/pod.yaml" ...
2022-05-24T18:39:05.581432130Z I0524 18:39:05.581420       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-pod/version" ...
2022-05-24T18:39:05.581477162Z I0524 18:39:05.581463       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kubelet-serving-ca" ...
2022-05-24T18:39:05.581511686Z I0524 18:39:05.581500       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kubelet-serving-ca/ca-bundle.crt" ...
2022-05-24T18:39:05.581559773Z I0524 18:39:05.581546       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/sa-token-signing-certs" ...
2022-05-24T18:39:05.581589235Z I0524 18:39:05.581577       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/sa-token-signing-certs/service-account-001.pub" ...
2022-05-24T18:39:05.581654583Z I0524 18:39:05.581641       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/sa-token-signing-certs/service-account-002.pub" ...
2022-05-24T18:39:05.581699083Z I0524 18:39:05.581686       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-server-ca" ...
2022-05-24T18:39:05.581730247Z I0524 18:39:05.581718       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-server-ca/ca-bundle.crt" ...
2022-05-24T18:39:05.581775481Z I0524 18:39:05.581763       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/oauth-metadata" ...
2022-05-24T18:39:05.581829641Z I0524 18:39:05.581817       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/oauth-metadata/oauthMetadata" ...
2022-05-24T18:39:05.581878349Z I0524 18:39:05.581866       1 cmd.go:217] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs" ...
2022-05-24T18:39:05.581886256Z I0524 18:39:05.581877       1 cmd.go:225] Getting secrets ...
2022-05-24T18:39:05.778456466Z I0524 18:39:05.778423       1 copy.go:32] Got secret openshift-kube-apiserver/aggregator-client
2022-05-24T18:39:05.980809441Z I0524 18:39:05.980775       1 copy.go:32] Got secret openshift-kube-apiserver/bound-service-account-signing-key
2022-05-24T18:39:06.178820325Z I0524 18:39:06.178788       1 copy.go:32] Got secret openshift-kube-apiserver/check-endpoints-client-cert-key
2022-05-24T18:39:06.378546444Z I0524 18:39:06.378512       1 copy.go:32] Got secret openshift-kube-apiserver/control-plane-node-admin-client-cert-key
2022-05-24T18:39:06.579009883Z I0524 18:39:06.578976       1 copy.go:32] Got secret openshift-kube-apiserver/external-loadbalancer-serving-certkey
2022-05-24T18:39:06.778869261Z I0524 18:39:06.778835       1 copy.go:32] Got secret openshift-kube-apiserver/internal-loadbalancer-serving-certkey
2022-05-24T18:39:06.978763681Z I0524 18:39:06.978726       1 copy.go:32] Got secret openshift-kube-apiserver/kubelet-client
2022-05-24T18:39:07.180135818Z I0524 18:39:07.180103       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-serving-cert-certkey
2022-05-24T18:39:07.379497160Z I0524 18:39:07.379459       1 copy.go:32] Got secret openshift-kube-apiserver/node-kubeconfigs
2022-05-24T18:39:07.582732270Z I0524 18:39:07.582696       1 copy.go:32] Got secret openshift-kube-apiserver/service-network-serving-certkey
2022-05-24T18:39:07.778431063Z I0524 18:39:07.778393       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert: secrets "user-serving-cert" not found
2022-05-24T18:39:07.981771593Z I0524 18:39:07.981724       1 copy.go:32] Got secret openshift-kube-apiserver/user-serving-cert-000
2022-05-24T18:39:08.178180424Z I0524 18:39:08.178145       1 copy.go:32] Got secret openshift-kube-apiserver/user-serving-cert-001
2022-05-24T18:39:08.379434154Z I0524 18:39:08.379398       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-002: secrets "user-serving-cert-002" not found
2022-05-24T18:39:08.580744036Z I0524 18:39:08.580697       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-003: secrets "user-serving-cert-003" not found
2022-05-24T18:39:08.780559021Z I0524 18:39:08.780527       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-004: secrets "user-serving-cert-004" not found
2022-05-24T18:39:08.984251338Z I0524 18:39:08.984203       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-005: secrets "user-serving-cert-005" not found
2022-05-24T18:39:09.178906596Z I0524 18:39:09.178870       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-006: secrets "user-serving-cert-006" not found
2022-05-24T18:39:09.380365195Z I0524 18:39:09.380320       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-007: secrets "user-serving-cert-007" not found
2022-05-24T18:39:09.580007673Z I0524 18:39:09.579942       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-008: secrets "user-serving-cert-008" not found
2022-05-24T18:39:09.780310396Z I0524 18:39:09.780276       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-009: secrets "user-serving-cert-009" not found
2022-05-24T18:39:09.780310396Z I0524 18:39:09.780299       1 cmd.go:238] Getting config maps ...
2022-05-24T18:39:09.980870987Z I0524 18:39:09.980836       1 copy.go:60] Got configMap openshift-kube-apiserver/aggregator-client-ca
2022-05-24T18:39:10.178728752Z I0524 18:39:10.178675       1 copy.go:60] Got configMap openshift-kube-apiserver/check-endpoints-kubeconfig
2022-05-24T18:39:10.378470124Z I0524 18:39:10.378436       1 copy.go:60] Got configMap openshift-kube-apiserver/client-ca
2022-05-24T18:39:10.579181465Z I0524 18:39:10.579147       1 copy.go:60] Got configMap openshift-kube-apiserver/control-plane-node-kubeconfig
2022-05-24T18:39:10.787680542Z I0524 18:39:10.787642       1 copy.go:60] Got configMap openshift-kube-apiserver/trusted-ca-bundle
2022-05-24T18:39:10.788048453Z I0524 18:39:10.788029       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client" ...
2022-05-24T18:39:10.788075792Z I0524 18:39:10.788060       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.crt" ...
2022-05-24T18:39:10.788245817Z I0524 18:39:10.788227       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.key" ...
2022-05-24T18:39:10.788332445Z I0524 18:39:10.788316       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key" ...
2022-05-24T18:39:10.788342820Z I0524 18:39:10.788333       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.key" ...
2022-05-24T18:39:10.788446764Z I0524 18:39:10.788429       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.pub" ...
2022-05-24T18:39:10.788529401Z I0524 18:39:10.788513       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key" ...
2022-05-24T18:39:10.788539550Z I0524 18:39:10.788529       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.crt" ...
2022-05-24T18:39:10.788656195Z I0524 18:39:10.788639       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.key" ...
2022-05-24T18:39:10.788736197Z I0524 18:39:10.788720       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key" ...
2022-05-24T18:39:10.788745619Z I0524 18:39:10.788737       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.crt" ...
2022-05-24T18:39:10.788840329Z I0524 18:39:10.788824       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.key" ...
2022-05-24T18:39:10.788920960Z I0524 18:39:10.788905       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey" ...
2022-05-24T18:39:10.788932292Z I0524 18:39:10.788922       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.key" ...
2022-05-24T18:39:10.789054574Z I0524 18:39:10.789038       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.crt" ...
2022-05-24T18:39:10.789134787Z I0524 18:39:10.789119       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey" ...
2022-05-24T18:39:10.789146109Z I0524 18:39:10.789136       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.crt" ...
2022-05-24T18:39:10.789236425Z I0524 18:39:10.789220       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.key" ...
2022-05-24T18:39:10.789316220Z I0524 18:39:10.789301       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client" ...
2022-05-24T18:39:10.789330342Z I0524 18:39:10.789317       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.crt" ...
2022-05-24T18:39:10.789417124Z I0524 18:39:10.789402       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.key" ...
2022-05-24T18:39:10.789495782Z I0524 18:39:10.789480       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey" ...
2022-05-24T18:39:10.789518484Z I0524 18:39:10.789503       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.crt" ...
2022-05-24T18:39:10.789640624Z I0524 18:39:10.789624       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.key" ...
2022-05-24T18:39:10.789721441Z I0524 18:39:10.789706       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs" ...
2022-05-24T18:39:10.789730724Z I0524 18:39:10.789722       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost.kubeconfig" ...
2022-05-24T18:39:10.789832104Z I0524 18:39:10.789816       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-ext.kubeconfig" ...
2022-05-24T18:39:10.789916741Z I0524 18:39:10.789901       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-int.kubeconfig" ...
2022-05-24T18:39:10.789998418Z I0524 18:39:10.789982       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost-recovery.kubeconfig" ...
2022-05-24T18:39:10.790082790Z I0524 18:39:10.790067       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey" ...
2022-05-24T18:39:10.790092206Z I0524 18:39:10.790083       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.crt" ...
2022-05-24T18:39:10.790183539Z I0524 18:39:10.790168       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.key" ...
2022-05-24T18:39:10.790263971Z I0524 18:39:10.790248       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-000" ...
2022-05-24T18:39:10.790273244Z I0524 18:39:10.790265       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-000/tls.crt" ...
2022-05-24T18:39:10.790362420Z I0524 18:39:10.790346       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-000/tls.key" ...
2022-05-24T18:39:10.790440095Z I0524 18:39:10.790424       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-001" ...
2022-05-24T18:39:10.790449495Z I0524 18:39:10.790440       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-001/tls.crt" ...
2022-05-24T18:39:10.790541016Z I0524 18:39:10.790525       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-001/tls.key" ...
2022-05-24T18:39:10.790635493Z I0524 18:39:10.790619       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca" ...
2022-05-24T18:39:10.790647354Z I0524 18:39:10.790638       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca/ca-bundle.crt" ...
2022-05-24T18:39:10.790742903Z I0524 18:39:10.790727       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig" ...
2022-05-24T18:39:10.790752179Z I0524 18:39:10.790744       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig/kubeconfig" ...
2022-05-24T18:39:10.790843352Z I0524 18:39:10.790828       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca" ...
2022-05-24T18:39:10.790854528Z I0524 18:39:10.790846       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca/ca-bundle.crt" ...
2022-05-24T18:39:10.790952037Z I0524 18:39:10.790935       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig" ...
2022-05-24T18:39:10.790961741Z I0524 18:39:10.790952       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig/kubeconfig" ...
2022-05-24T18:39:10.791065343Z I0524 18:39:10.791040       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle" ...
2022-05-24T18:39:10.791163445Z I0524 18:39:10.791149       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle/ca-bundle.crt" ...
2022-05-24T18:39:10.791408057Z I0524 18:39:10.791394       1 cmd.go:331] Getting pod configmaps/kube-apiserver-pod-11 -n openshift-kube-apiserver
2022-05-24T18:39:10.983266804Z I0524 18:39:10.983224       1 cmd.go:347] Creating directory for static pod manifest "/etc/kubernetes/manifests" ...
2022-05-24T18:39:10.983322767Z I0524 18:39:10.983263       1 cmd.go:375] Writing a pod under "kube-apiserver-pod.yaml" key 
2022-05-24T18:39:10.983322767Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"11"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"11"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-2022-05-24T18:39:10.983343086Z operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
2022-05-24T18:39:10.987944482Z I0524 18:39:10.987900       1 cmd.go:596] Writing pod manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/kube-apiserver-pod.yaml" ...
2022-05-24T18:39:10.988180146Z I0524 18:39:10.988112       1 cmd.go:603] Removed existing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2022-05-24T18:39:10.988180146Z I0524 18:39:10.988126       1 cmd.go:607] Writing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2022-05-24T18:39:10.988180146Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"11"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"11"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoin2022-05-24T18:39:10.988213573Z ts","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
