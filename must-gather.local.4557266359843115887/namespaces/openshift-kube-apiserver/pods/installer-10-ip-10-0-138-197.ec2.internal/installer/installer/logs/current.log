2022-05-24T18:36:11.805004077Z I0524 18:36:11.804859       1 cmd.go:92] &{<nil> true {false} installer true map[cert-configmaps:0xc0007e4e60 cert-dir:0xc0007e5040 cert-secrets:0xc0007e4dc0 configmaps:0xc0007e4960 namespace:0xc0007e4780 optional-cert-configmaps:0xc0007e4fa0 optional-cert-secrets:0xc0007e4f00 optional-configmaps:0xc0007e4aa0 optional-secrets:0xc0007e4a00 pod:0xc0007e4820 pod-manifest-dir:0xc0007e4be0 resource-dir:0xc0007e4b40 revision:0xc0007e46e0 secrets:0xc0007e48c0 v:0xc0007f2b40] [0xc0007f2b40 0xc0007e46e0 0xc0007e4780 0xc0007e4820 0xc0007e4b40 0xc0007e4be0 0xc0007e4960 0xc0007e4aa0 0xc0007e48c0 0xc0007e4a00 0xc0007e5040 0xc0007e4e60 0xc0007e4fa0 0xc0007e4dc0 0xc0007e4f00] [] map[add-dir-header:0xc0007f23c0 alsologtostderr:0xc0007f2460 cert-configmaps:0xc0007e4e60 cert-dir:0xc0007e5040 cert-secrets:0xc0007e4dc0 configmaps:0xc0007e4960 help:0xc0007f2f00 kubeconfig:0xc0007e4640 log-backtrace-at:0xc0007f25a0 log-dir:0xc0007f2640 log-file:0xc0007f26e0 log-file-max-size:0xc0007f2780 log-flush-frequency:0xc0007f2500 logtostderr:0xc0007f2820 namespace:0xc0007e4780 one-output:0xc0007f28c0 optional-cert-configmaps:0xc0007e4fa0 optional-cert-secrets:0xc0007e4f00 optional-configmaps:0xc0007e4aa0 optional-secrets:0xc0007e4a00 pod:0xc0007e4820 pod-manifest-dir:0xc0007e4be0 pod-manifests-lock-file:0xc0007e4d20 resource-dir:0xc0007e4b40 revision:0xc0007e46e0 secrets:0xc0007e48c0 skip-headers:0xc0007f2960 skip-log-headers:0xc0007f2a00 stderrthreshold:0xc0007f2aa0 timeout-duration:0xc0007e4c80 v:0xc0007f2b40 vmodule:0xc0007f2be0] [0xc0007e4640 0xc0007e46e0 0xc0007e4780 0xc0007e4820 0xc0007e48c0 0xc0007e4960 0xc0007e4a00 0xc0007e4aa0 0xc0007e4b40 0xc0007e4be0 0xc0007e4c80 0xc0007e4d20 0xc0007e4dc0 0xc0007e4e60 0xc0007e4f00 0xc0007e4fa0 0xc0007e5040 0xc0007f23c0 0xc0007f2460 0xc0007f25a0 0xc0007f2640 0xc0007f26e0 0xc0007f2780 0xc0007f2500 0xc0007f2820 0xc0007f28c0 0xc0007f2960 0xc0007f2a00 0xc0007f2aa0 0xc0007f2b40 0xc0007f2be0 0xc0007f2f00] [0xc0007f23c0 0xc0007f2460 0xc0007e4e60 0xc0007e5040 0xc0007e4dc0 0xc0007e4960 0xc0007f2f00 0xc0007e4640 0xc0007f25a0 0xc0007f2640 0xc0007f26e0 0xc0007f2780 0xc0007f2500 0xc0007f2820 0xc0007e4780 0xc0007f28c0 0xc0007e4fa0 0xc0007e4f00 0xc0007e4aa0 0xc0007e4a00 0xc0007e4820 0xc0007e4be0 0xc0007e4d20 0xc0007e4b40 0xc0007e46e0 0xc0007e48c0 0xc0007f2960 0xc0007f2a00 0xc0007f2aa0 0xc0007e4c80 0xc0007f2b40 0xc0007f2be0] map[104:0xc0007f2f00 118:0xc0007f2b40] [] -1 0 0xc0007d89c0 true 0xa27c00 []}
2022-05-24T18:36:11.805086765Z I0524 18:36:11.805070       1 cmd.go:93] (*installerpod.InstallOptions)(0xc0005edd40)({
2022-05-24T18:36:11.805086765Z  KubeConfig: (string) "",
2022-05-24T18:36:11.805086765Z  KubeClient: (kubernetes.Interface) <nil>,
2022-05-24T18:36:11.805086765Z  Revision: (string) (len=2) "10",
2022-05-24T18:36:11.805086765Z  NodeName: (string) "",
2022-05-24T18:36:11.805086765Z  Namespace: (string) (len=24) "openshift-kube-apiserver",
2022-05-24T18:36:11.805086765Z  PodConfigMapNamePrefix: (string) (len=18) "kube-apiserver-pod",
2022-05-24T18:36:11.805086765Z  SecretNamePrefixes: ([]string) (len=3 cap=4) {
2022-05-24T18:36:11.805086765Z   (string) (len=11) "etcd-client",
2022-05-24T18:36:11.805086765Z   (string) (len=34) "localhost-recovery-serving-certkey",
2022-05-24T18:36:11.805086765Z   (string) (len=31) "localhost-recovery-client-token"
2022-05-24T18:36:11.805086765Z  },
2022-05-24T18:36:11.805086765Z  OptionalSecretNamePrefixes: ([]string) (len=2 cap=2) {
2022-05-24T18:36:11.805086765Z   (string) (len=17) "encryption-config",
2022-05-24T18:36:11.805086765Z   (string) (len=21) "webhook-authenticator"
2022-05-24T18:36:11.805086765Z  },
2022-05-24T18:36:11.805086765Z  ConfigMapNamePrefixes: ([]string) (len=8 cap=8) {
2022-05-24T18:36:11.805086765Z   (string) (len=18) "kube-apiserver-pod",
2022-05-24T18:36:11.805086765Z   (string) (len=6) "config",
2022-05-24T18:36:11.805086765Z   (string) (len=37) "kube-apiserver-cert-syncer-kubeconfig",
2022-05-24T18:36:11.805086765Z   (string) (len=28) "bound-sa-token-signing-certs",
2022-05-24T18:36:11.805086765Z   (string) (len=15) "etcd-serving-ca",
2022-05-24T18:36:11.805086765Z   (string) (len=18) "kubelet-serving-ca",
2022-05-24T18:36:11.805086765Z   (string) (len=22) "sa-token-signing-certs",
2022-05-24T18:36:11.805086765Z   (string) (len=29) "kube-apiserver-audit-policies"
2022-05-24T18:36:11.805086765Z  },
2022-05-24T18:36:11.805086765Z  OptionalConfigMapNamePrefixes: ([]string) (len=3 cap=4) {
2022-05-24T18:36:11.805086765Z   (string) (len=14) "oauth-metadata",
2022-05-24T18:36:11.805086765Z   (string) (len=12) "cloud-config",
2022-05-24T18:36:11.805086765Z   (string) (len=24) "kube-apiserver-server-ca"
2022-05-24T18:36:11.805086765Z  },
2022-05-24T18:36:11.805086765Z  CertSecretNames: ([]string) (len=10 cap=16) {
2022-05-24T18:36:11.805086765Z   (string) (len=17) "aggregator-client",
2022-05-24T18:36:11.805086765Z   (string) (len=30) "localhost-serving-cert-certkey",
2022-05-24T18:36:11.805086765Z   (string) (len=31) "service-network-serving-certkey",
2022-05-24T18:36:11.805086765Z   (string) (len=37) "external-loadbalancer-serving-certkey",
2022-05-24T18:36:11.805086765Z   (string) (len=37) "internal-loadbalancer-serving-certkey",
2022-05-24T18:36:11.805086765Z   (string) (len=33) "bound-service-account-signing-key",
2022-05-24T18:36:11.805086765Z   (string) (len=40) "control-plane-node-admin-client-cert-key",
2022-05-24T18:36:11.805086765Z   (string) (len=31) "check-endpoints-client-cert-key",
2022-05-24T18:36:11.805086765Z   (string) (len=14) "kubelet-client",
2022-05-24T18:36:11.805086765Z   (string) (len=16) "node-kubeconfigs"
2022-05-24T18:36:11.805086765Z  },
2022-05-24T18:36:11.805086765Z  OptionalCertSecretNamePrefixes: ([]string) (len=11 cap=16) {
2022-05-24T18:36:11.805086765Z   (string) (len=17) "user-serving-cert",
2022-05-24T18:36:11.805086765Z   (string) (len=21) "user-serving-cert-000",
2022-05-24T18:36:11.805086765Z   (string) (len=21) "user-serving-cert-001",
2022-05-24T18:36:11.805086765Z   (string) (len=21) "user-serving-cert-002",
2022-05-24T18:36:11.805086765Z   (string) (len=21) "user-serving-cert-003",
2022-05-24T18:36:11.805086765Z   (string) (len=21) "user-serving-cert-004",
2022-05-24T18:36:11.805086765Z   (string) (len=21) "user-serving-cert-005",
2022-05-24T18:36:11.805086765Z   (string) (len=21) "user-serving-cert-006",
2022-05-24T18:36:11.805086765Z   (string) (len=21) "user-serving-cert-007",
2022-05-24T18:36:11.805086765Z   (string) (len=21) "user-serving-cert-008",
2022-05-24T18:36:11.805086765Z   (string) (len=21) "user-serving-cert-009"
2022-05-24T18:36:11.805086765Z  },
2022-05-24T18:36:11.805086765Z  CertConfigMapNamePrefixes: ([]string) (len=4 cap=4) {
2022-05-24T18:36:11.805086765Z   (string) (len=20) "aggregator-client-ca",
2022-05-24T18:36:11.805086765Z   (string) (len=9) "client-ca",
2022-05-24T18:36:11.805086765Z   (string) (len=29) "control-plane-node-kubeconfig",
2022-05-24T18:36:11.805086765Z   (string) (len=26) "check-endpoints-kubeconfig"
2022-05-24T18:36:11.805086765Z  },
2022-05-24T18:36:11.805086765Z  OptionalCertConfigMapNamePrefixes: ([]string) (len=1 cap=1) {
2022-05-24T18:36:11.805086765Z   (string) (len=17) "trusted-ca-bundle"
2022-05-24T18:36:11.805086765Z  },
2022-05-24T18:36:11.805086765Z  CertDir: (string) (len=57) "/etc/kubernetes/static-pod-resources/kube-apiserver-certs",
2022-05-24T18:36:11.805086765Z  ResourceDir: (string) (len=36) "/etc/kubernetes/static-pod-resources",
2022-05-24T18:36:11.805086765Z  PodManifestDir: (string) (len=25) "/etc/kubernetes/manifests",
2022-05-24T18:36:11.805086765Z  Timeout: (time.Duration) 2m0s,
2022-05-24T18:36:11.805086765Z  StaticPodManifestsLockFile: (string) "",
2022-05-24T18:36:11.805086765Z  PodMutationFns: ([]installerpod.PodMutationFunc) <nil>,
2022-05-24T18:36:11.805086765Z  KubeletVersion: (string) ""
2022-05-24T18:36:11.805086765Z })
2022-05-24T18:36:42.864996506Z I0524 18:36:42.864959       1 cmd.go:437] Got kubelet version 1.23.5+b463d71 on target node ip-10-0-138-197.ec2.internal
2022-05-24T18:36:42.864996506Z I0524 18:36:42.864985       1 cmd.go:289] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10" ...
2022-05-24T18:36:42.865062263Z I0524 18:36:42.865049       1 cmd.go:217] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10" ...
2022-05-24T18:36:42.865070995Z I0524 18:36:42.865060       1 cmd.go:225] Getting secrets ...
2022-05-24T18:36:42.868860849Z I0524 18:36:42.868823       1 copy.go:32] Got secret openshift-kube-apiserver/etcd-client-10
2022-05-24T18:36:42.896724833Z I0524 18:36:42.896679       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-client-token-10
2022-05-24T18:36:42.932865770Z I0524 18:36:42.932832       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-serving-certkey-10
2022-05-24T18:36:42.946577609Z I0524 18:36:42.946528       1 copy.go:24] Failed to get secret openshift-kube-apiserver/encryption-config-10: secrets "encryption-config-10" not found
2022-05-24T18:36:42.950052592Z I0524 18:36:42.950026       1 copy.go:32] Got secret openshift-kube-apiserver/webhook-authenticator-10
2022-05-24T18:36:42.950075134Z I0524 18:36:42.950054       1 cmd.go:238] Getting config maps ...
2022-05-24T18:36:42.952333272Z I0524 18:36:42.952306       1 copy.go:60] Got configMap openshift-kube-apiserver/bound-sa-token-signing-certs-10
2022-05-24T18:36:42.955576569Z I0524 18:36:42.955542       1 copy.go:60] Got configMap openshift-kube-apiserver/config-10
2022-05-24T18:36:42.958177306Z I0524 18:36:42.958137       1 copy.go:60] Got configMap openshift-kube-apiserver/etcd-serving-ca-10
2022-05-24T18:36:43.057551842Z I0524 18:36:43.057506       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-audit-policies-10
2022-05-24T18:36:43.257723967Z I0524 18:36:43.257669       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-cert-syncer-kubeconfig-10
2022-05-24T18:36:43.456495568Z I0524 18:36:43.456405       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-pod-10
2022-05-24T18:36:43.666087887Z I0524 18:36:43.666050       1 copy.go:60] Got configMap openshift-kube-apiserver/kubelet-serving-ca-10
2022-05-24T18:36:43.867651789Z I0524 18:36:43.864192       1 copy.go:60] Got configMap openshift-kube-apiserver/sa-token-signing-certs-10
2022-05-24T18:36:44.058582340Z I0524 18:36:44.058533       1 copy.go:52] Failed to get config map openshift-kube-apiserver/cloud-config-10: configmaps "cloud-config-10" not found
2022-05-24T18:36:44.257193725Z I0524 18:36:44.257146       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-server-ca-10
2022-05-24T18:36:44.456469232Z I0524 18:36:44.456436       1 copy.go:60] Got configMap openshift-kube-apiserver/oauth-metadata-10
2022-05-24T18:36:44.456469232Z I0524 18:36:44.456459       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/etcd-client" ...
2022-05-24T18:36:44.456559946Z I0524 18:36:44.456546       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/etcd-client/tls.key" ...
2022-05-24T18:36:44.456654894Z I0524 18:36:44.456640       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/etcd-client/tls.crt" ...
2022-05-24T18:36:44.456705021Z I0524 18:36:44.456691       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/localhost-recovery-client-token" ...
2022-05-24T18:36:44.456738479Z I0524 18:36:44.456725       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/localhost-recovery-client-token/ca.crt" ...
2022-05-24T18:36:44.456788180Z I0524 18:36:44.456774       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/localhost-recovery-client-token/namespace" ...
2022-05-24T18:36:44.456831570Z I0524 18:36:44.456818       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/localhost-recovery-client-token/service-ca.crt" ...
2022-05-24T18:36:44.456887025Z I0524 18:36:44.456873       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/localhost-recovery-client-token/token" ...
2022-05-24T18:36:44.456933865Z I0524 18:36:44.456920       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/localhost-recovery-serving-certkey" ...
2022-05-24T18:36:44.456965051Z I0524 18:36:44.456952       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/localhost-recovery-serving-certkey/tls.key" ...
2022-05-24T18:36:44.457010309Z I0524 18:36:44.456997       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/localhost-recovery-serving-certkey/tls.crt" ...
2022-05-24T18:36:44.457061501Z I0524 18:36:44.457048       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/webhook-authenticator" ...
2022-05-24T18:36:44.457091681Z I0524 18:36:44.457079       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/secrets/webhook-authenticator/kubeConfig" ...
2022-05-24T18:36:44.457136237Z I0524 18:36:44.457123       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/bound-sa-token-signing-certs" ...
2022-05-24T18:36:44.457195452Z I0524 18:36:44.457182       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/bound-sa-token-signing-certs/service-account-001.pub" ...
2022-05-24T18:36:44.457239165Z I0524 18:36:44.457226       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/config" ...
2022-05-24T18:36:44.457270158Z I0524 18:36:44.457257       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/config/config.yaml" ...
2022-05-24T18:36:44.457314731Z I0524 18:36:44.457301       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/etcd-serving-ca" ...
2022-05-24T18:36:44.457340528Z I0524 18:36:44.457333       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/etcd-serving-ca/ca-bundle.crt" ...
2022-05-24T18:36:44.457402252Z I0524 18:36:44.457388       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/kube-apiserver-audit-policies" ...
2022-05-24T18:36:44.457433155Z I0524 18:36:44.457420       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/kube-apiserver-audit-policies/policy.yaml" ...
2022-05-24T18:36:44.457478572Z I0524 18:36:44.457465       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/kube-apiserver-cert-syncer-kubeconfig" ...
2022-05-24T18:36:44.457511538Z I0524 18:36:44.457498       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig" ...
2022-05-24T18:36:44.457562108Z I0524 18:36:44.457549       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/kube-apiserver-pod" ...
2022-05-24T18:36:44.457592035Z I0524 18:36:44.457579       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/kube-apiserver-pod/forceRedeploymentReason" ...
2022-05-24T18:36:44.457672017Z I0524 18:36:44.457657       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/kube-apiserver-pod/pod.yaml" ...
2022-05-24T18:36:44.457759581Z I0524 18:36:44.457746       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/kube-apiserver-pod/version" ...
2022-05-24T18:36:44.457802648Z I0524 18:36:44.457789       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/kubelet-serving-ca" ...
2022-05-24T18:36:44.457836718Z I0524 18:36:44.457823       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/kubelet-serving-ca/ca-bundle.crt" ...
2022-05-24T18:36:44.457879035Z I0524 18:36:44.457865       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/sa-token-signing-certs" ...
2022-05-24T18:36:44.457912078Z I0524 18:36:44.457898       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/sa-token-signing-certs/service-account-001.pub" ...
2022-05-24T18:36:44.457975840Z I0524 18:36:44.457959       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/sa-token-signing-certs/service-account-002.pub" ...
2022-05-24T18:36:44.458025334Z I0524 18:36:44.458012       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/kube-apiserver-server-ca" ...
2022-05-24T18:36:44.458056246Z I0524 18:36:44.458043       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/kube-apiserver-server-ca/ca-bundle.crt" ...
2022-05-24T18:36:44.458099945Z I0524 18:36:44.458087       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/oauth-metadata" ...
2022-05-24T18:36:44.458147137Z I0524 18:36:44.458134       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/configmaps/oauth-metadata/oauthMetadata" ...
2022-05-24T18:36:44.458195978Z I0524 18:36:44.458182       1 cmd.go:217] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs" ...
2022-05-24T18:36:44.458205257Z I0524 18:36:44.458193       1 cmd.go:225] Getting secrets ...
2022-05-24T18:36:44.660159441Z I0524 18:36:44.660120       1 copy.go:32] Got secret openshift-kube-apiserver/aggregator-client
2022-05-24T18:36:44.856562475Z I0524 18:36:44.856525       1 copy.go:32] Got secret openshift-kube-apiserver/bound-service-account-signing-key
2022-05-24T18:36:45.056046155Z I0524 18:36:45.056008       1 copy.go:32] Got secret openshift-kube-apiserver/check-endpoints-client-cert-key
2022-05-24T18:36:45.257365711Z I0524 18:36:45.257328       1 copy.go:32] Got secret openshift-kube-apiserver/control-plane-node-admin-client-cert-key
2022-05-24T18:36:45.480565095Z I0524 18:36:45.480523       1 copy.go:32] Got secret openshift-kube-apiserver/external-loadbalancer-serving-certkey
2022-05-24T18:36:45.656530146Z I0524 18:36:45.656496       1 copy.go:32] Got secret openshift-kube-apiserver/internal-loadbalancer-serving-certkey
2022-05-24T18:36:45.856944606Z I0524 18:36:45.856903       1 copy.go:32] Got secret openshift-kube-apiserver/kubelet-client
2022-05-24T18:36:46.056218856Z I0524 18:36:46.056182       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-serving-cert-certkey
2022-05-24T18:36:46.258096569Z I0524 18:36:46.258057       1 copy.go:32] Got secret openshift-kube-apiserver/node-kubeconfigs
2022-05-24T18:36:46.455717046Z I0524 18:36:46.455683       1 copy.go:32] Got secret openshift-kube-apiserver/service-network-serving-certkey
2022-05-24T18:36:46.657899002Z I0524 18:36:46.657860       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert: secrets "user-serving-cert" not found
2022-05-24T18:36:46.856443755Z I0524 18:36:46.856410       1 copy.go:32] Got secret openshift-kube-apiserver/user-serving-cert-000
2022-05-24T18:36:47.057300233Z I0524 18:36:47.057262       1 copy.go:32] Got secret openshift-kube-apiserver/user-serving-cert-001
2022-05-24T18:36:47.256106625Z I0524 18:36:47.256068       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-002: secrets "user-serving-cert-002" not found
2022-05-24T18:36:47.457071309Z I0524 18:36:47.457032       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-003: secrets "user-serving-cert-003" not found
2022-05-24T18:36:47.657011948Z I0524 18:36:47.656979       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-004: secrets "user-serving-cert-004" not found
2022-05-24T18:36:47.856092073Z I0524 18:36:47.856054       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-005: secrets "user-serving-cert-005" not found
2022-05-24T18:36:48.059138011Z I0524 18:36:48.059102       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-006: secrets "user-serving-cert-006" not found
2022-05-24T18:36:48.256862853Z I0524 18:36:48.256825       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-007: secrets "user-serving-cert-007" not found
2022-05-24T18:36:48.456975725Z I0524 18:36:48.456939       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-008: secrets "user-serving-cert-008" not found
2022-05-24T18:36:48.655869153Z I0524 18:36:48.655831       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-009: secrets "user-serving-cert-009" not found
2022-05-24T18:36:48.655869153Z I0524 18:36:48.655851       1 cmd.go:238] Getting config maps ...
2022-05-24T18:36:48.855657707Z I0524 18:36:48.855620       1 copy.go:60] Got configMap openshift-kube-apiserver/aggregator-client-ca
2022-05-24T18:36:49.056238064Z I0524 18:36:49.056203       1 copy.go:60] Got configMap openshift-kube-apiserver/check-endpoints-kubeconfig
2022-05-24T18:36:49.256075758Z I0524 18:36:49.256037       1 copy.go:60] Got configMap openshift-kube-apiserver/client-ca
2022-05-24T18:36:49.456032943Z I0524 18:36:49.455994       1 copy.go:60] Got configMap openshift-kube-apiserver/control-plane-node-kubeconfig
2022-05-24T18:36:49.664042467Z I0524 18:36:49.664007       1 copy.go:60] Got configMap openshift-kube-apiserver/trusted-ca-bundle
2022-05-24T18:36:49.664314016Z I0524 18:36:49.664299       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client" ...
2022-05-24T18:36:49.664340448Z I0524 18:36:49.664324       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.crt" ...
2022-05-24T18:36:49.664510727Z I0524 18:36:49.664492       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.key" ...
2022-05-24T18:36:49.664642137Z I0524 18:36:49.664622       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key" ...
2022-05-24T18:36:49.664642137Z I0524 18:36:49.664637       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.key" ...
2022-05-24T18:36:49.664741735Z I0524 18:36:49.664726       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.pub" ...
2022-05-24T18:36:49.664831704Z I0524 18:36:49.664806       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key" ...
2022-05-24T18:36:49.664831704Z I0524 18:36:49.664819       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.crt" ...
2022-05-24T18:36:49.664908662Z I0524 18:36:49.664894       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.key" ...
2022-05-24T18:36:49.664976356Z I0524 18:36:49.664963       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key" ...
2022-05-24T18:36:49.664983840Z I0524 18:36:49.664977       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.crt" ...
2022-05-24T18:36:49.666248606Z I0524 18:36:49.666227       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.key" ...
2022-05-24T18:36:49.666351828Z I0524 18:36:49.666338       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey" ...
2022-05-24T18:36:49.666375685Z I0524 18:36:49.666352       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.key" ...
2022-05-24T18:36:49.666499664Z I0524 18:36:49.666477       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.crt" ...
2022-05-24T18:36:49.666584858Z I0524 18:36:49.666560       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey" ...
2022-05-24T18:36:49.666584858Z I0524 18:36:49.666577       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.key" ...
2022-05-24T18:36:49.666732095Z I0524 18:36:49.666706       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.crt" ...
2022-05-24T18:36:49.666836269Z I0524 18:36:49.666807       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client" ...
2022-05-24T18:36:49.666836269Z I0524 18:36:49.666823       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.crt" ...
2022-05-24T18:36:49.666933113Z I0524 18:36:49.666916       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.key" ...
2022-05-24T18:36:49.667009198Z I0524 18:36:49.666993       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey" ...
2022-05-24T18:36:49.667021570Z I0524 18:36:49.667013       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.crt" ...
2022-05-24T18:36:49.667119874Z I0524 18:36:49.667105       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.key" ...
2022-05-24T18:36:49.667256155Z I0524 18:36:49.667229       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs" ...
2022-05-24T18:36:49.667297906Z I0524 18:36:49.667283       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-ext.kubeconfig" ...
2022-05-24T18:36:49.667405642Z I0524 18:36:49.667389       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-int.kubeconfig" ...
2022-05-24T18:36:49.667482132Z I0524 18:36:49.667467       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost-recovery.kubeconfig" ...
2022-05-24T18:36:49.667568787Z I0524 18:36:49.667553       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost.kubeconfig" ...
2022-05-24T18:36:49.667672575Z I0524 18:36:49.667656       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey" ...
2022-05-24T18:36:49.667689143Z I0524 18:36:49.667673       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.crt" ...
2022-05-24T18:36:49.667791505Z I0524 18:36:49.667775       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.key" ...
2022-05-24T18:36:49.667951207Z I0524 18:36:49.667928       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-000" ...
2022-05-24T18:36:49.667967606Z I0524 18:36:49.667949       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-000/tls.crt" ...
2022-05-24T18:36:49.668068937Z I0524 18:36:49.668052       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-000/tls.key" ...
2022-05-24T18:36:49.668157341Z I0524 18:36:49.668143       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-001" ...
2022-05-24T18:36:49.668165005Z I0524 18:36:49.668159       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-001/tls.key" ...
2022-05-24T18:36:49.668252408Z I0524 18:36:49.668239       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-001/tls.crt" ...
2022-05-24T18:36:49.668314205Z I0524 18:36:49.668302       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca" ...
2022-05-24T18:36:49.668323362Z I0524 18:36:49.668317       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca/ca-bundle.crt" ...
2022-05-24T18:36:49.668417369Z I0524 18:36:49.668402       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig" ...
2022-05-24T18:36:49.668426686Z I0524 18:36:49.668420       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig/kubeconfig" ...
2022-05-24T18:36:49.668521556Z I0524 18:36:49.668505       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca" ...
2022-05-24T18:36:49.668531707Z I0524 18:36:49.668522       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca/ca-bundle.crt" ...
2022-05-24T18:36:49.668664150Z I0524 18:36:49.668647       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig" ...
2022-05-24T18:36:49.668677308Z I0524 18:36:49.668665       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig/kubeconfig" ...
2022-05-24T18:36:49.668769934Z I0524 18:36:49.668749       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle" ...
2022-05-24T18:36:49.668818431Z I0524 18:36:49.668805       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle/ca-bundle.crt" ...
2022-05-24T18:36:49.668981432Z I0524 18:36:49.668968       1 cmd.go:331] Getting pod configmaps/kube-apiserver-pod-10 -n openshift-kube-apiserver
2022-05-24T18:36:49.856142178Z I0524 18:36:49.856086       1 cmd.go:347] Creating directory for static pod manifest "/etc/kubernetes/manifests" ...
2022-05-24T18:36:49.856142178Z I0524 18:36:49.856120       1 cmd.go:375] Writing a pod under "kube-apiserver-pod.yaml" key 
2022-05-24T18:36:49.856142178Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"10"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"10"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.02022-05-24T18:36:49.856189808Z -art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
2022-05-24T18:36:49.861431227Z I0524 18:36:49.861394       1 cmd.go:596] Writing pod manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10/kube-apiserver-pod.yaml" ...
2022-05-24T18:36:49.861612536Z I0524 18:36:49.861581       1 cmd.go:603] Removed existing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2022-05-24T18:36:49.861635005Z I0524 18:36:49.861610       1 cmd.go:607] Writing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2022-05-24T18:36:49.861635005Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"10"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-10"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"10"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","c2022-05-24T18:36:49.861647321Z ommand":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
