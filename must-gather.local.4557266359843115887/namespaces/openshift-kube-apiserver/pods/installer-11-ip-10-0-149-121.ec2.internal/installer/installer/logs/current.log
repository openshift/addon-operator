2022-05-24T18:46:10.366294205Z I0524 18:46:10.366131       1 cmd.go:92] &{<nil> true {false} installer true map[cert-configmaps:0xc000841ea0 cert-dir:0xc0004f86e0 cert-secrets:0xc000841e00 configmaps:0xc0008419a0 namespace:0xc0008417c0 optional-cert-configmaps:0xc0004f8640 optional-cert-secrets:0xc000841f40 optional-configmaps:0xc000841ae0 optional-secrets:0xc000841a40 pod:0xc000841860 pod-manifest-dir:0xc000841c20 resource-dir:0xc000841b80 revision:0xc000841720 secrets:0xc000841900 v:0xc0001359a0] [0xc0001359a0 0xc000841720 0xc0008417c0 0xc000841860 0xc000841b80 0xc000841c20 0xc0008419a0 0xc000841ae0 0xc000841900 0xc000841a40 0xc0004f86e0 0xc000841ea0 0xc0004f8640 0xc000841e00 0xc000841f40] [] map[add-dir-header:0xc0004f9a40 alsologtostderr:0xc0004f9ae0 cert-configmaps:0xc000841ea0 cert-dir:0xc0004f86e0 cert-secrets:0xc000841e00 configmaps:0xc0008419a0 help:0xc0008bc460 kubeconfig:0xc000841680 log-backtrace-at:0xc0004f9c20 log-dir:0xc0004f9cc0 log-file:0xc0004f9d60 log-file-max-size:0xc0004f9e00 log-flush-frequency:0xc0004f9b80 logtostderr:0xc0004f9ea0 namespace:0xc0008417c0 one-output:0xc0004f9f40 optional-cert-configmaps:0xc0004f8640 optional-cert-secrets:0xc000841f40 optional-configmaps:0xc000841ae0 optional-secrets:0xc000841a40 pod:0xc000841860 pod-manifest-dir:0xc000841c20 pod-manifests-lock-file:0xc000841d60 resource-dir:0xc000841b80 revision:0xc000841720 secrets:0xc000841900 skip-headers:0xc000134280 skip-log-headers:0xc000135720 stderrthreshold:0xc000135860 timeout-duration:0xc000841cc0 v:0xc0001359a0 vmodule:0xc000135ae0] [0xc000841680 0xc000841720 0xc0008417c0 0xc000841860 0xc000841900 0xc0008419a0 0xc000841a40 0xc000841ae0 0xc000841b80 0xc000841c20 0xc000841cc0 0xc000841d60 0xc000841e00 0xc000841ea0 0xc000841f40 0xc0004f8640 0xc0004f86e0 0xc0004f9a40 0xc0004f9ae0 0xc0004f9c20 0xc0004f9cc0 0xc0004f9d60 0xc0004f9e00 0xc0004f9b80 0xc0004f9ea0 0xc0004f9f40 0xc000134280 0xc000135720 0xc000135860 0xc0001359a0 0xc000135ae0 0xc0008bc460] [0xc0004f9a40 0xc0004f9ae0 0xc000841ea0 0xc0004f86e0 0xc000841e00 0xc0008419a0 0xc0008bc460 0xc000841680 0xc0004f9c20 0xc0004f9cc0 0xc0004f9d60 0xc0004f9e00 0xc0004f9b80 0xc0004f9ea0 0xc0008417c0 0xc0004f9f40 0xc0004f8640 0xc000841f40 0xc000841ae0 0xc000841a40 0xc000841860 0xc000841c20 0xc000841d60 0xc000841b80 0xc000841720 0xc000841900 0xc000134280 0xc000135720 0xc000135860 0xc000841cc0 0xc0001359a0 0xc000135ae0] map[104:0xc0008bc460 118:0xc0001359a0] [] -1 0 0xc0000c03c0 true 0xa27c00 []}
2022-05-24T18:46:10.366376298Z I0524 18:46:10.366342       1 cmd.go:93] (*installerpod.InstallOptions)(0xc0000db1e0)({
2022-05-24T18:46:10.366376298Z  KubeConfig: (string) "",
2022-05-24T18:46:10.366376298Z  KubeClient: (kubernetes.Interface) <nil>,
2022-05-24T18:46:10.366376298Z  Revision: (string) (len=2) "11",
2022-05-24T18:46:10.366376298Z  NodeName: (string) "",
2022-05-24T18:46:10.366376298Z  Namespace: (string) (len=24) "openshift-kube-apiserver",
2022-05-24T18:46:10.366376298Z  PodConfigMapNamePrefix: (string) (len=18) "kube-apiserver-pod",
2022-05-24T18:46:10.366376298Z  SecretNamePrefixes: ([]string) (len=3 cap=4) {
2022-05-24T18:46:10.366376298Z   (string) (len=11) "etcd-client",
2022-05-24T18:46:10.366376298Z   (string) (len=34) "localhost-recovery-serving-certkey",
2022-05-24T18:46:10.366376298Z   (string) (len=31) "localhost-recovery-client-token"
2022-05-24T18:46:10.366376298Z  },
2022-05-24T18:46:10.366376298Z  OptionalSecretNamePrefixes: ([]string) (len=2 cap=2) {
2022-05-24T18:46:10.366376298Z   (string) (len=17) "encryption-config",
2022-05-24T18:46:10.366376298Z   (string) (len=21) "webhook-authenticator"
2022-05-24T18:46:10.366376298Z  },
2022-05-24T18:46:10.366376298Z  ConfigMapNamePrefixes: ([]string) (len=8 cap=8) {
2022-05-24T18:46:10.366376298Z   (string) (len=18) "kube-apiserver-pod",
2022-05-24T18:46:10.366376298Z   (string) (len=6) "config",
2022-05-24T18:46:10.366376298Z   (string) (len=37) "kube-apiserver-cert-syncer-kubeconfig",
2022-05-24T18:46:10.366376298Z   (string) (len=28) "bound-sa-token-signing-certs",
2022-05-24T18:46:10.366376298Z   (string) (len=15) "etcd-serving-ca",
2022-05-24T18:46:10.366376298Z   (string) (len=18) "kubelet-serving-ca",
2022-05-24T18:46:10.366376298Z   (string) (len=22) "sa-token-signing-certs",
2022-05-24T18:46:10.366376298Z   (string) (len=29) "kube-apiserver-audit-policies"
2022-05-24T18:46:10.366376298Z  },
2022-05-24T18:46:10.366376298Z  OptionalConfigMapNamePrefixes: ([]string) (len=3 cap=4) {
2022-05-24T18:46:10.366376298Z   (string) (len=14) "oauth-metadata",
2022-05-24T18:46:10.366376298Z   (string) (len=12) "cloud-config",
2022-05-24T18:46:10.366376298Z   (string) (len=24) "kube-apiserver-server-ca"
2022-05-24T18:46:10.366376298Z  },
2022-05-24T18:46:10.366376298Z  CertSecretNames: ([]string) (len=10 cap=16) {
2022-05-24T18:46:10.366376298Z   (string) (len=17) "aggregator-client",
2022-05-24T18:46:10.366376298Z   (string) (len=30) "localhost-serving-cert-certkey",
2022-05-24T18:46:10.366376298Z   (string) (len=31) "service-network-serving-certkey",
2022-05-24T18:46:10.366376298Z   (string) (len=37) "external-loadbalancer-serving-certkey",
2022-05-24T18:46:10.366376298Z   (string) (len=37) "internal-loadbalancer-serving-certkey",
2022-05-24T18:46:10.366376298Z   (string) (len=33) "bound-service-account-signing-key",
2022-05-24T18:46:10.366376298Z   (string) (len=40) "control-plane-node-admin-client-cert-key",
2022-05-24T18:46:10.366376298Z   (string) (len=31) "check-endpoints-client-cert-key",
2022-05-24T18:46:10.366376298Z   (string) (len=14) "kubelet-client",
2022-05-24T18:46:10.366376298Z   (string) (len=16) "node-kubeconfigs"
2022-05-24T18:46:10.366376298Z  },
2022-05-24T18:46:10.366376298Z  OptionalCertSecretNamePrefixes: ([]string) (len=11 cap=16) {
2022-05-24T18:46:10.366376298Z   (string) (len=17) "user-serving-cert",
2022-05-24T18:46:10.366376298Z   (string) (len=21) "user-serving-cert-000",
2022-05-24T18:46:10.366376298Z   (string) (len=21) "user-serving-cert-001",
2022-05-24T18:46:10.366376298Z   (string) (len=21) "user-serving-cert-002",
2022-05-24T18:46:10.366376298Z   (string) (len=21) "user-serving-cert-003",
2022-05-24T18:46:10.366376298Z   (string) (len=21) "user-serving-cert-004",
2022-05-24T18:46:10.366376298Z   (string) (len=21) "user-serving-cert-005",
2022-05-24T18:46:10.366376298Z   (string) (len=21) "user-serving-cert-006",
2022-05-24T18:46:10.366376298Z   (string) (len=21) "user-serving-cert-007",
2022-05-24T18:46:10.366376298Z   (string) (len=21) "user-serving-cert-008",
2022-05-24T18:46:10.366376298Z   (string) (len=21) "user-serving-cert-009"
2022-05-24T18:46:10.366376298Z  },
2022-05-24T18:46:10.366376298Z  CertConfigMapNamePrefixes: ([]string) (len=4 cap=4) {
2022-05-24T18:46:10.366376298Z   (string) (len=20) "aggregator-client-ca",
2022-05-24T18:46:10.366376298Z   (string) (len=9) "client-ca",
2022-05-24T18:46:10.366376298Z   (string) (len=29) "control-plane-node-kubeconfig",
2022-05-24T18:46:10.366376298Z   (string) (len=26) "check-endpoints-kubeconfig"
2022-05-24T18:46:10.366376298Z  },
2022-05-24T18:46:10.366376298Z  OptionalCertConfigMapNamePrefixes: ([]string) (len=1 cap=1) {
2022-05-24T18:46:10.366376298Z   (string) (len=17) "trusted-ca-bundle"
2022-05-24T18:46:10.366376298Z  },
2022-05-24T18:46:10.366376298Z  CertDir: (string) (len=57) "/etc/kubernetes/static-pod-resources/kube-apiserver-certs",
2022-05-24T18:46:10.366376298Z  ResourceDir: (string) (len=36) "/etc/kubernetes/static-pod-resources",
2022-05-24T18:46:10.366376298Z  PodManifestDir: (string) (len=25) "/etc/kubernetes/manifests",
2022-05-24T18:46:10.366376298Z  Timeout: (time.Duration) 2m0s,
2022-05-24T18:46:10.366376298Z  StaticPodManifestsLockFile: (string) "",
2022-05-24T18:46:10.366376298Z  PodMutationFns: ([]installerpod.PodMutationFunc) <nil>,
2022-05-24T18:46:10.366376298Z  KubeletVersion: (string) ""
2022-05-24T18:46:10.366376298Z })
2022-05-24T18:46:41.530568107Z I0524 18:46:41.530529       1 cmd.go:437] Got kubelet version 1.23.5+b463d71 on target node ip-10-0-149-121.ec2.internal
2022-05-24T18:46:41.530568107Z I0524 18:46:41.530554       1 cmd.go:289] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11" ...
2022-05-24T18:46:41.530668358Z I0524 18:46:41.530653       1 cmd.go:217] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11" ...
2022-05-24T18:46:41.530668358Z I0524 18:46:41.530664       1 cmd.go:225] Getting secrets ...
2022-05-24T18:46:41.535464799Z I0524 18:46:41.535438       1 copy.go:32] Got secret openshift-kube-apiserver/etcd-client-11
2022-05-24T18:46:41.567145920Z I0524 18:46:41.567109       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-client-token-11
2022-05-24T18:46:41.569945984Z I0524 18:46:41.569920       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-recovery-serving-certkey-11
2022-05-24T18:46:41.572117664Z I0524 18:46:41.572097       1 copy.go:24] Failed to get secret openshift-kube-apiserver/encryption-config-11: secrets "encryption-config-11" not found
2022-05-24T18:46:41.646967578Z I0524 18:46:41.646921       1 copy.go:32] Got secret openshift-kube-apiserver/webhook-authenticator-11
2022-05-24T18:46:41.646994328Z I0524 18:46:41.646975       1 cmd.go:238] Getting config maps ...
2022-05-24T18:46:41.650868502Z I0524 18:46:41.650841       1 copy.go:60] Got configMap openshift-kube-apiserver/bound-sa-token-signing-certs-11
2022-05-24T18:46:41.654699990Z I0524 18:46:41.654677       1 copy.go:60] Got configMap openshift-kube-apiserver/config-11
2022-05-24T18:46:41.657650699Z I0524 18:46:41.657608       1 copy.go:60] Got configMap openshift-kube-apiserver/etcd-serving-ca-11
2022-05-24T18:46:41.659909116Z I0524 18:46:41.659884       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-audit-policies-11
2022-05-24T18:46:41.838241085Z I0524 18:46:41.838201       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-cert-syncer-kubeconfig-11
2022-05-24T18:46:42.040182504Z I0524 18:46:42.040143       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-pod-11
2022-05-24T18:46:42.239348797Z I0524 18:46:42.239305       1 copy.go:60] Got configMap openshift-kube-apiserver/kubelet-serving-ca-11
2022-05-24T18:46:42.438778418Z I0524 18:46:42.438735       1 copy.go:60] Got configMap openshift-kube-apiserver/sa-token-signing-certs-11
2022-05-24T18:46:42.638205451Z I0524 18:46:42.638170       1 copy.go:52] Failed to get config map openshift-kube-apiserver/cloud-config-11: configmaps "cloud-config-11" not found
2022-05-24T18:46:42.840276264Z I0524 18:46:42.840243       1 copy.go:60] Got configMap openshift-kube-apiserver/kube-apiserver-server-ca-11
2022-05-24T18:46:43.039647468Z I0524 18:46:43.039596       1 copy.go:60] Got configMap openshift-kube-apiserver/oauth-metadata-11
2022-05-24T18:46:43.039647468Z I0524 18:46:43.039621       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/etcd-client" ...
2022-05-24T18:46:43.039752809Z I0524 18:46:43.039738       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/etcd-client/tls.crt" ...
2022-05-24T18:46:43.039823563Z I0524 18:46:43.039811       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/etcd-client/tls.key" ...
2022-05-24T18:46:43.039875624Z I0524 18:46:43.039863       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token" ...
2022-05-24T18:46:43.039914095Z I0524 18:46:43.039901       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token/ca.crt" ...
2022-05-24T18:46:43.039973861Z I0524 18:46:43.039959       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token/namespace" ...
2022-05-24T18:46:43.040022549Z I0524 18:46:43.040010       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token/service-ca.crt" ...
2022-05-24T18:46:43.040082231Z I0524 18:46:43.040069       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-client-token/token" ...
2022-05-24T18:46:43.040135813Z I0524 18:46:43.040122       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-serving-certkey" ...
2022-05-24T18:46:43.040170236Z I0524 18:46:43.040158       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-serving-certkey/tls.crt" ...
2022-05-24T18:46:43.040222121Z I0524 18:46:43.040210       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/localhost-recovery-serving-certkey/tls.key" ...
2022-05-24T18:46:43.040278926Z I0524 18:46:43.040265       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/webhook-authenticator" ...
2022-05-24T18:46:43.040314859Z I0524 18:46:43.040303       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/secrets/webhook-authenticator/kubeConfig" ...
2022-05-24T18:46:43.040369056Z I0524 18:46:43.040355       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/bound-sa-token-signing-certs" ...
2022-05-24T18:46:43.040429231Z I0524 18:46:43.040417       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/bound-sa-token-signing-certs/service-account-001.pub" ...
2022-05-24T18:46:43.040483330Z I0524 18:46:43.040471       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/config" ...
2022-05-24T18:46:43.040522249Z I0524 18:46:43.040508       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/config/config.yaml" ...
2022-05-24T18:46:43.040576496Z I0524 18:46:43.040564       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/etcd-serving-ca" ...
2022-05-24T18:46:43.040613044Z I0524 18:46:43.040601       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/etcd-serving-ca/ca-bundle.crt" ...
2022-05-24T18:46:43.040692545Z I0524 18:46:43.040679       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-audit-policies" ...
2022-05-24T18:46:43.040730707Z I0524 18:46:43.040716       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-audit-policies/policy.yaml" ...
2022-05-24T18:46:43.040780818Z I0524 18:46:43.040768       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-cert-syncer-kubeconfig" ...
2022-05-24T18:46:43.040819620Z I0524 18:46:43.040807       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig" ...
2022-05-24T18:46:43.040869220Z I0524 18:46:43.040857       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-pod" ...
2022-05-24T18:46:43.040906089Z I0524 18:46:43.040893       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-pod/forceRedeploymentReason" ...
2022-05-24T18:46:43.040962046Z I0524 18:46:43.040947       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-pod/pod.yaml" ...
2022-05-24T18:46:43.041018660Z I0524 18:46:43.041006       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-pod/version" ...
2022-05-24T18:46:43.041070786Z I0524 18:46:43.041058       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kubelet-serving-ca" ...
2022-05-24T18:46:43.041104602Z I0524 18:46:43.041093       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kubelet-serving-ca/ca-bundle.crt" ...
2022-05-24T18:46:43.041154986Z I0524 18:46:43.041142       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/sa-token-signing-certs" ...
2022-05-24T18:46:43.041200270Z I0524 18:46:43.041176       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/sa-token-signing-certs/service-account-001.pub" ...
2022-05-24T18:46:43.041249970Z I0524 18:46:43.041237       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/sa-token-signing-certs/service-account-002.pub" ...
2022-05-24T18:46:43.041301315Z I0524 18:46:43.041289       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-server-ca" ...
2022-05-24T18:46:43.041332735Z I0524 18:46:43.041321       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/kube-apiserver-server-ca/ca-bundle.crt" ...
2022-05-24T18:46:43.041385125Z I0524 18:46:43.041372       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/oauth-metadata" ...
2022-05-24T18:46:43.042817178Z I0524 18:46:43.042781       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/configmaps/oauth-metadata/oauthMetadata" ...
2022-05-24T18:46:43.042914665Z I0524 18:46:43.042884       1 cmd.go:217] Creating target resource directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs" ...
2022-05-24T18:46:43.042914665Z I0524 18:46:43.042900       1 cmd.go:225] Getting secrets ...
2022-05-24T18:46:43.239702890Z I0524 18:46:43.239669       1 copy.go:32] Got secret openshift-kube-apiserver/aggregator-client
2022-05-24T18:46:43.438307754Z I0524 18:46:43.438273       1 copy.go:32] Got secret openshift-kube-apiserver/bound-service-account-signing-key
2022-05-24T18:46:43.638661344Z I0524 18:46:43.638610       1 copy.go:32] Got secret openshift-kube-apiserver/check-endpoints-client-cert-key
2022-05-24T18:46:43.839499702Z I0524 18:46:43.839466       1 copy.go:32] Got secret openshift-kube-apiserver/control-plane-node-admin-client-cert-key
2022-05-24T18:46:44.039709592Z I0524 18:46:44.039675       1 copy.go:32] Got secret openshift-kube-apiserver/external-loadbalancer-serving-certkey
2022-05-24T18:46:44.238067707Z I0524 18:46:44.238034       1 copy.go:32] Got secret openshift-kube-apiserver/internal-loadbalancer-serving-certkey
2022-05-24T18:46:44.438436893Z I0524 18:46:44.438405       1 copy.go:32] Got secret openshift-kube-apiserver/kubelet-client
2022-05-24T18:46:44.639647799Z I0524 18:46:44.639594       1 copy.go:32] Got secret openshift-kube-apiserver/localhost-serving-cert-certkey
2022-05-24T18:46:44.839011698Z I0524 18:46:44.838979       1 copy.go:32] Got secret openshift-kube-apiserver/node-kubeconfigs
2022-05-24T18:46:45.038721151Z I0524 18:46:45.038688       1 copy.go:32] Got secret openshift-kube-apiserver/service-network-serving-certkey
2022-05-24T18:46:45.238030972Z I0524 18:46:45.237997       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert: secrets "user-serving-cert" not found
2022-05-24T18:46:45.439907535Z I0524 18:46:45.439873       1 copy.go:32] Got secret openshift-kube-apiserver/user-serving-cert-000
2022-05-24T18:46:45.638908935Z I0524 18:46:45.638872       1 copy.go:32] Got secret openshift-kube-apiserver/user-serving-cert-001
2022-05-24T18:46:45.837888000Z I0524 18:46:45.837851       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-002: secrets "user-serving-cert-002" not found
2022-05-24T18:46:46.038999287Z I0524 18:46:46.038968       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-003: secrets "user-serving-cert-003" not found
2022-05-24T18:46:46.240041191Z I0524 18:46:46.240004       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-004: secrets "user-serving-cert-004" not found
2022-05-24T18:46:46.439203781Z I0524 18:46:46.439166       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-005: secrets "user-serving-cert-005" not found
2022-05-24T18:46:46.638412339Z I0524 18:46:46.638376       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-006: secrets "user-serving-cert-006" not found
2022-05-24T18:46:46.838677448Z I0524 18:46:46.838608       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-007: secrets "user-serving-cert-007" not found
2022-05-24T18:46:47.039503797Z I0524 18:46:47.039464       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-008: secrets "user-serving-cert-008" not found
2022-05-24T18:46:47.240920723Z I0524 18:46:47.240880       1 copy.go:24] Failed to get secret openshift-kube-apiserver/user-serving-cert-009: secrets "user-serving-cert-009" not found
2022-05-24T18:46:47.240920723Z I0524 18:46:47.240908       1 cmd.go:238] Getting config maps ...
2022-05-24T18:46:47.438604674Z I0524 18:46:47.438564       1 copy.go:60] Got configMap openshift-kube-apiserver/aggregator-client-ca
2022-05-24T18:46:47.640157343Z I0524 18:46:47.640122       1 copy.go:60] Got configMap openshift-kube-apiserver/check-endpoints-kubeconfig
2022-05-24T18:46:47.839494067Z I0524 18:46:47.839456       1 copy.go:60] Got configMap openshift-kube-apiserver/client-ca
2022-05-24T18:46:48.037790461Z I0524 18:46:48.037756       1 copy.go:60] Got configMap openshift-kube-apiserver/control-plane-node-kubeconfig
2022-05-24T18:46:48.246818336Z I0524 18:46:48.246778       1 copy.go:60] Got configMap openshift-kube-apiserver/trusted-ca-bundle
2022-05-24T18:46:48.247077518Z I0524 18:46:48.247061       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client" ...
2022-05-24T18:46:48.247100374Z I0524 18:46:48.247088       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.crt" ...
2022-05-24T18:46:48.261682171Z I0524 18:46:48.261622       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/aggregator-client/tls.key" ...
2022-05-24T18:46:48.261913774Z I0524 18:46:48.261882       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key" ...
2022-05-24T18:46:48.261913774Z I0524 18:46:48.261906       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.key" ...
2022-05-24T18:46:48.262051861Z I0524 18:46:48.262024       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/bound-service-account-signing-key/service-account.pub" ...
2022-05-24T18:46:48.262145976Z I0524 18:46:48.262128       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key" ...
2022-05-24T18:46:48.262160673Z I0524 18:46:48.262145       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.key" ...
2022-05-24T18:46:48.262260707Z I0524 18:46:48.262240       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/check-endpoints-client-cert-key/tls.crt" ...
2022-05-24T18:46:48.262343730Z I0524 18:46:48.262326       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key" ...
2022-05-24T18:46:48.262356561Z I0524 18:46:48.262344       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.crt" ...
2022-05-24T18:46:48.262452561Z I0524 18:46:48.262437       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/control-plane-node-admin-client-cert-key/tls.key" ...
2022-05-24T18:46:48.262539336Z I0524 18:46:48.262524       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey" ...
2022-05-24T18:46:48.262549359Z I0524 18:46:48.262542       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.crt" ...
2022-05-24T18:46:48.263808140Z I0524 18:46:48.263773       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/external-loadbalancer-serving-certkey/tls.key" ...
2022-05-24T18:46:48.263990981Z I0524 18:46:48.263968       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey" ...
2022-05-24T18:46:48.264034962Z I0524 18:46:48.264023       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.key" ...
2022-05-24T18:46:48.264182456Z I0524 18:46:48.264159       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/internal-loadbalancer-serving-certkey/tls.crt" ...
2022-05-24T18:46:48.264307844Z I0524 18:46:48.264276       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client" ...
2022-05-24T18:46:48.264334535Z I0524 18:46:48.264296       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.key" ...
2022-05-24T18:46:48.264395452Z I0524 18:46:48.264380       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/kubelet-client/tls.crt" ...
2022-05-24T18:46:48.264490435Z I0524 18:46:48.264475       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey" ...
2022-05-24T18:46:48.264499624Z I0524 18:46:48.264490       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.key" ...
2022-05-24T18:46:48.264600811Z I0524 18:46:48.264582       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/localhost-serving-cert-certkey/tls.crt" ...
2022-05-24T18:46:48.264727555Z I0524 18:46:48.264707       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs" ...
2022-05-24T18:46:48.264727555Z I0524 18:46:48.264722       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-ext.kubeconfig" ...
2022-05-24T18:46:48.264825821Z I0524 18:46:48.264812       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/lb-int.kubeconfig" ...
2022-05-24T18:46:48.264904312Z I0524 18:46:48.264890       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost-recovery.kubeconfig" ...
2022-05-24T18:46:48.264988988Z I0524 18:46:48.264966       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost.kubeconfig" ...
2022-05-24T18:46:48.265058660Z I0524 18:46:48.265043       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey" ...
2022-05-24T18:46:48.265071323Z I0524 18:46:48.265057       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.crt" ...
2022-05-24T18:46:48.266288634Z I0524 18:46:48.266253       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/service-network-serving-certkey/tls.key" ...
2022-05-24T18:46:48.266435926Z I0524 18:46:48.266409       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-000" ...
2022-05-24T18:46:48.266435926Z I0524 18:46:48.266429       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-000/tls.key" ...
2022-05-24T18:46:48.266582396Z I0524 18:46:48.266562       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-000/tls.crt" ...
2022-05-24T18:46:48.266745908Z I0524 18:46:48.266723       1 cmd.go:257] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-001" ...
2022-05-24T18:46:48.266775873Z I0524 18:46:48.266761       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-001/tls.key" ...
2022-05-24T18:46:48.266909123Z I0524 18:46:48.266892       1 cmd.go:625] Writing secret manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/user-serving-cert-001/tls.crt" ...
2022-05-24T18:46:48.267017788Z I0524 18:46:48.267001       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca" ...
2022-05-24T18:46:48.267028921Z I0524 18:46:48.267022       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/aggregator-client-ca/ca-bundle.crt" ...
2022-05-24T18:46:48.268200140Z I0524 18:46:48.268184       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig" ...
2022-05-24T18:46:48.268212468Z I0524 18:46:48.268204       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/check-endpoints-kubeconfig/kubeconfig" ...
2022-05-24T18:46:48.268303029Z I0524 18:46:48.268290       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca" ...
2022-05-24T18:46:48.268312727Z I0524 18:46:48.268305       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/client-ca/ca-bundle.crt" ...
2022-05-24T18:46:48.268416620Z I0524 18:46:48.268396       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig" ...
2022-05-24T18:46:48.268416620Z I0524 18:46:48.268411       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/control-plane-node-kubeconfig/kubeconfig" ...
2022-05-24T18:46:48.268496647Z I0524 18:46:48.268482       1 cmd.go:273] Creating directory "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle" ...
2022-05-24T18:46:48.268538188Z I0524 18:46:48.268526       1 cmd.go:615] Writing config file "/etc/kubernetes/static-pod-resources/kube-apiserver-certs/configmaps/trusted-ca-bundle/ca-bundle.crt" ...
2022-05-24T18:46:48.268738262Z I0524 18:46:48.268724       1 cmd.go:331] Getting pod configmaps/kube-apiserver-pod-11 -n openshift-kube-apiserver
2022-05-24T18:46:48.441060598Z I0524 18:46:48.441022       1 cmd.go:347] Creating directory for static pod manifest "/etc/kubernetes/manifests" ...
2022-05-24T18:46:48.441103363Z I0524 18:46:48.441071       1 cmd.go:375] Writing a pod under "kube-apiserver-pod.yaml" key 
2022-05-24T18:46:48.441103363Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"11"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"11"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-2022-05-24T18:46:48.441129278Z operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
2022-05-24T18:46:48.444208622Z I0524 18:46:48.444177       1 cmd.go:596] Writing pod manifest "/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11/kube-apiserver-pod.yaml" ...
2022-05-24T18:46:48.444356250Z I0524 18:46:48.444342       1 cmd.go:603] Removed existing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2022-05-24T18:46:48.444375465Z I0524 18:46:48.444353       1 cmd.go:607] Writing static pod manifest "/etc/kubernetes/manifests/kube-apiserver-pod.yaml" ...
2022-05-24T18:46:48.444375465Z {"kind":"Pod","apiVersion":"v1","metadata":{"name":"kube-apiserver","namespace":"openshift-kube-apiserver","creationTimestamp":null,"labels":{"apiserver":"true","app":"openshift-kube-apiserver","revision":"11"},"annotations":{"kubectl.kubernetes.io/default-container":"kube-apiserver","target.workload.openshift.io/management":"{\"effect\": \"PreferredDuringScheduling\"}"}},"spec":{"volumes":[{"name":"resource-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-pod-11"}},{"name":"cert-dir","hostPath":{"path":"/etc/kubernetes/static-pod-resources/kube-apiserver-certs"}},{"name":"audit-dir","hostPath":{"path":"/var/log/kube-apiserver"}}],"initContainers":[{"name":"setup","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/usr/bin/timeout","279","/bin/bash","-ec"],"args":["echo \"Fixing audit permissions ...\"\nchmod 0700 /var/log/kube-apiserver \u0026\u0026 touch /var/log/kube-apiserver/audit.log \u0026\u0026 chmod 0600 /var/log/kube-apiserver/*\n\nLOCK=/var/log/kube-apiserver/.lock\necho \"Acquiring exclusive lock ${LOCK} ...\"\n\n# Waiting for 194s max for old kube-apiserver's watch-termination process to exit and remove the lock.\n# Two cases:\n# 1. if kubelet does not start the old and new in parallel (i.e. works as expected), the flock will always succeed without any time.\n# 2. if kubelet does overlap old and new pods for up to 130s, the flock will wait and immediate return when the old finishes.\n#\n# NOTE: We can increase 194s for a bigger expected overlap. But a higher value means less noise about the broken kubelet behaviour, i.e. we hide a bug.\n# NOTE: Do not tweak these timings without considering the livenessProbe initialDelaySeconds\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 194 \"${LOCK_FD}\" || {\n  echo \"$(date -Iseconds -u) kubelet did not terminate old kube-apiserver before new one\" \u003e\u003e /var/log/kube-apiserver/lock.log\n  echo -n \": WARNING: kubelet did not terminate old kube-apiserver before new one.\"\n\n  # We failed to acquire exclusive lock, which means there is old kube-apiserver running in system.\n  # Since we utilize SO_REUSEPORT, we need to make sure the old kube-apiserver stopped listening.\n  #\n  # NOTE: This is a fallback for broken kubelet, if you observe this please report a bug.\n  echo -n \"Waiting for port 6443 to be released due to likely bug in kubelet or CRI-O \"\n  while [ -n \"$(ss -Htan state listening '( sport = 6443 or sport = 6080 )')\" ]; do\n    echo -n \".\"\n    sleep 1\n    (( tries += 1 ))\n    if [[ \"${tries}\" -gt 10 ]]; then\n      echo \"Timed out waiting for port :6443 and :6080 to be released, this is likely a bug in kubelet or CRI-O\"\n      exit 1\n    fi\n  done\n  #  This is to make sure the server has terminated independently from the lock.\n  #  After the port has been freed (requests can be pending and need 60s max).\n  sleep 65\n}\n# We cannot hold the lock from the init container to the main container. We release it here. There is no risk, at this point we know we are safe.\nflock -u \"${LOCK_FD}\"\n"],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}}],"containers":[{"name":"kube-apiserver","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:b93993f797e0fc3a71692f6ed51b0a7d4bae1fcb29e7045fae5caa897490f38b","command":["/bin/bash","-ec"],"args":["LOCK=/var/log/kube-apiserver/.lock\n# We should be able to acquire the lock immediatelly. If not, it means the init container has not released it yet and kubelet or CRI-O started container prematurely.\nexec {LOCK_FD}\u003e${LOCK} \u0026\u0026 flock --verbose -w 30 \"${LOCK_FD}\" || {\n  echo \"Failed to acquire lock for kube-apiserver. Please check setup container for details. This is likely kubelet or CRI-O bug.\"\n  exit 1\n}\nif [ -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt ]; then\n  echo \"Copying system trust bundle ...\"\n  cp -f /etc/kubernetes/static-pod-certs/configmaps/trusted-ca-bundle/ca-bundle.crt /etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem\nfi\n\nexec watch-termination --termination-touch-file=/var/log/kube-apiserver/.terminating --termination-log-file=/var/log/kube-apiserver/termination.log --graceful-termination-duration=194s --kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig -- hyperkube kube-apiserver --openshift-config=/etc/kubernetes/static-pod-resources/configmaps/config/config.yaml --advertise-address=${HOST_IP}  -v=2 --permit-address-sharing\n"],"ports":[{"containerPort":6443}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}},{"name":"STATIC_POD_VERSION","value":"11"},{"name":"HOST_IP","valueFrom":{"fieldRef":{"fieldPath":"status.hostIP"}}}],"resources":{"requests":{"cpu":"265m","memory":"1Gi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"},{"name":"audit-dir","mountPath":"/var/log/kube-apiserver"}],"livenessProbe":{"httpGet":{"path":"livez","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":45,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"readyz","port":6443,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true}},{"name":"kube-apiserver-cert-syncer","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-syncer"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","--destination-dir=/etc/kubernetes/static-pod-certs"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-cert-regeneration-controller","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","cert-regeneration-controller"],"args":["--kubeconfig=/etc/kubernetes/static-pod-resources/configmaps/kube-apiserver-cert-syncer-kubeconfig/kubeconfig","--namespace=$(POD_NAMESPACE)","-v=2"],"env":[{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"}],"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-insecure-readyz","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","command":["cluster-kube-apiserver-operator","insecure-readyz"],"args":["--insecure-port=6080","--delegate-url=https://localhost:6443/readyz"],"ports":[{"containerPort":6080}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"},{"name":"kube-apiserver-check-endpoints","image":"quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:74af1b8f610579bf5112a9cdd9338814a07362a19fb9cd24a753348e6473ae42","c2022-05-24T18:46:48.444393359Z ommand":["cluster-kube-apiserver-operator","check-endpoints"],"args":["--kubeconfig","/etc/kubernetes/static-pod-certs/configmaps/check-endpoints-kubeconfig/kubeconfig","--listen","0.0.0.0:17697","--namespace","$(POD_NAMESPACE)","--v","2"],"ports":[{"name":"check-endpoints","hostPort":17697,"containerPort":17697,"protocol":"TCP"}],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"resources":{"requests":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"resource-dir","mountPath":"/etc/kubernetes/static-pod-resources"},{"name":"cert-dir","mountPath":"/etc/kubernetes/static-pod-certs"}],"livenessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"readinessProbe":{"httpGet":{"path":"healthz","port":17697,"scheme":"HTTPS"},"initialDelaySeconds":10,"timeoutSeconds":10},"terminationMessagePolicy":"FallbackToLogsOnError","imagePullPolicy":"IfNotPresent"}],"terminationGracePeriodSeconds":194,"hostNetwork":true,"tolerations":[{"operator":"Exists"}],"priorityClassName":"system-node-critical"},"status":{}}
