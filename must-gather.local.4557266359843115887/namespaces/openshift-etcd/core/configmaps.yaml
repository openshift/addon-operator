---
apiVersion: v1
items:
- apiVersion: v1
  data:
    install-config: |
      apiVersion: v1
      baseDomain: dif5.p1.openshiftapps.com
      compute:
      - architecture: amd64
        hyperthreading: Enabled
        name: worker
        platform:
          aws:
            amiID: ami-0e6075c4736ca2c44
            iamRole: ManagedOpenShift-Worker-Role
            rootVolume:
              iops: 0
              size: 300
              type: gp2
            type: m5.4xlarge
            zones:
            - us-east-1a
            - us-east-1b
            - us-east-1c
        replicas: 3
      controlPlane:
        architecture: amd64
        hyperthreading: Enabled
        name: master
        platform:
          aws:
            iamRole: ManagedOpenShift-ControlPlane-Role
            rootVolume:
              iops: 1000
              size: 350
              type: io1
            type: m5.2xlarge
            zones:
            - us-east-1a
            - us-east-1b
            - us-east-1c
        replicas: 3
      credentialsMode: Manual
      imageContentSources:
      - mirrors:
        - quay.io/app-sre/managed-upgrade-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/managed-upgrade-operator
        source: quay.io/app-sre/managed-upgrade-operator
      - mirrors:
        - quay.io/app-sre/managed-upgrade-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/managed-upgrade-operator-registry
        source: quay.io/app-sre/managed-upgrade-operator-registry
      - mirrors:
        - quay.io/app-sre/aws-account-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/aws-account-operator
        source: quay.io/app-sre/aws-account-operator
      - mirrors:
        - quay.io/app-sre/aws-account-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/aws-account-operator-registry
        source: quay.io/app-sre/aws-account-operator-registry
      - mirrors:
        - quay.io/app-sre/pagerduty-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/pagerduty-operator
        source: quay.io/app-sre/pagerduty-operator
      - mirrors:
        - quay.io/app-sre/pagerduty-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/pagerduty-operator-registry
        source: quay.io/app-sre/pagerduty-operator-registry
      - mirrors:
        - quay.io/app-sre/certman-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/certman-operator
        source: quay.io/app-sre/certman-operator
      - mirrors:
        - quay.io/app-sre/certman-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/certman-operator-registry
        source: quay.io/app-sre/certman-operator-registry
      - mirrors:
        - quay.io/app-sre/custom-domains-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/custom-domains-operator
        source: quay.io/app-sre/custom-domains-operator
      - mirrors:
        - quay.io/app-sre/custom-domains-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/custom-domains-operator-registry
        source: quay.io/app-sre/custom-domains-operator-registry
      - mirrors:
        - quay.io/app-sre/deadmanssnitch-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/deadmanssnitch-operator
        source: quay.io/app-sre/deadmanssnitch-operator
      - mirrors:
        - quay.io/app-sre/deadmanssnitch-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/deadmanssnitch-operator-registry
        source: quay.io/app-sre/deadmanssnitch-operator-registry
      - mirrors:
        - quay.io/app-sre/configure-alertmanager-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/configure-alertmanager-operator
        source: quay.io/app-sre/configure-alertmanager-operator
      - mirrors:
        - quay.io/app-sre/configure-alertmanager-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/configure-alertmanager-operator-registry
        source: quay.io/app-sre/configure-alertmanager-operator-registry
      - mirrors:
        - quay.io/app-sre/dedicated-admin-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/dedicated-admin-operator
        source: quay.io/app-sre/dedicated-admin-operator
      - mirrors:
        - quay.io/app-sre/dedicated-admin-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/dedicated-admin-operator-registry
        source: quay.io/app-sre/dedicated-admin-operator-registry
      - mirrors:
        - quay.io/app-sre/splunk-forwarder-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/splunk-forwarder-operator
        source: quay.io/app-sre/splunk-forwarder-operator
      - mirrors:
        - quay.io/app-sre/splunk-forwarder-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/splunk-forwarder-operator-registry
        source: quay.io/app-sre/splunk-forwarder-operator-registry
      - mirrors:
        - quay.io/app-sre/splunk-forwarder
        - pull.q1w2.quay.rhcloud.com/app-sre/splunk-forwarder
        source: quay.io/app-sre/splunk-forwarder
      - mirrors:
        - quay.io/app-sre/splunk-heavyforwarder
        - pull.q1w2.quay.rhcloud.com/app-sre/splunk-heavyforwarder
        source: quay.io/app-sre/splunk-heavyforwarder
      - mirrors:
        - quay.io/app-sre/rbac-permissions-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/rbac-permissions-operator
        source: quay.io/app-sre/rbac-permissions-operator
      - mirrors:
        - quay.io/app-sre/rbac-permissions-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/rbac-permissions-operator-registry
        source: quay.io/app-sre/rbac-permissions-operator-registry
      - mirrors:
        - quay.io/app-sre/cloud-ingress-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/cloud-ingress-operator
        source: quay.io/app-sre/cloud-ingress-operator
      - mirrors:
        - quay.io/app-sre/cloud-ingress-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/cloud-ingress-operator-registry
        source: quay.io/app-sre/cloud-ingress-operator-registry
      - mirrors:
        - quay.io/app-sre/managed-velero-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/managed-velero-operator
        source: quay.io/app-sre/managed-velero-operator
      - mirrors:
        - quay.io/app-sre/managed-velero-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/managed-velero-operator-registry
        source: quay.io/app-sre/managed-velero-operator-registry
      - mirrors:
        - quay.io/app-sre/managed-cluster-validating-webhooks
        - pull.q1w2.quay.rhcloud.com/app-sre/managed-cluster-validating-webhooks
        source: quay.io/app-sre/managed-cluster-validating-webhooks
      - mirrors:
        - quay.io/app-sre/gcp-project-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/gcp-project-operator
        source: quay.io/app-sre/gcp-project-operator
      - mirrors:
        - quay.io/app-sre/gcp-project-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/gcp-project-operator-registry
        source: quay.io/app-sre/gcp-project-operator-registry
      - mirrors:
        - quay.io/app-sre/aws-efs-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/aws-efs-operator
        source: quay.io/app-sre/aws-efs-operator
      - mirrors:
        - quay.io/app-sre/aws-account-shredder
        - pull.q1w2.quay.rhcloud.com/app-sre/aws-account-shredder
        source: quay.io/app-sre/aws-account-shredder
      - mirrors:
        - quay.io/app-sre/yq
        - pull.q1w2.quay.rhcloud.com/app-sre/yq
        source: quay.io/app-sre/yq
      - mirrors:
        - quay.io/app-sre/python
        - pull.q1w2.quay.rhcloud.com/app-sre/python
        source: quay.io/app-sre/python
      - mirrors:
        - quay.io/app-sre/must-gather-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/must-gather-operator
        source: quay.io/app-sre/must-gather-operator
      - mirrors:
        - quay.io/app-sre/must-gather-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/must-gather-operator-registry
        source: quay.io/app-sre/must-gather-operator-registry
      - mirrors:
        - quay.io/app-sre/osd-metrics-exporter
        - pull.q1w2.quay.rhcloud.com/app-sre/osd-metrics-exporter
        source: quay.io/app-sre/osd-metrics-exporter
      - mirrors:
        - quay.io/app-sre/osd-metrics-exporter-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/osd-metrics-exporter-registry
        source: quay.io/app-sre/osd-metrics-exporter-registry
      - mirrors:
        - quay.io/app-sre/route-monitor-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/route-monitor-operator
        source: quay.io/app-sre/route-monitor-operator
      - mirrors:
        - quay.io/app-sre/route-monitor-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/route-monitor-operator-registry
        source: quay.io/app-sre/route-monitor-operator-registry
      - mirrors:
        - quay.io/app-sre/managed-node-metadata-operator
        - pull.q1w2.quay.rhcloud.com/app-sre/managed-node-metadata-operator
        source: quay.io/app-sre/managed-node-metadata-operator
      - mirrors:
        - quay.io/app-sre/managed-node-metadata-operator-registry
        - pull.q1w2.quay.rhcloud.com/app-sre/managed-node-metadata-operator-registry
        source: quay.io/app-sre/managed-node-metadata-operator-registry
      - mirrors:
        - quay.io/openshift-release-dev/ocp-release
        - pull.q1w2.quay.rhcloud.com/openshift-release-dev/ocp-release
        source: quay.io/openshift-release-dev/ocp-release
      - mirrors:
        - quay.io/openshift-release-dev/ocp-v4.0-art-dev
        - pull.q1w2.quay.rhcloud.com/openshift-release-dev/ocp-v4.0-art-dev
        source: quay.io/openshift-release-dev/ocp-v4.0-art-dev
      - mirrors:
        - quay.io/osd-addons/acm
        - pull.q1w2.quay.rhcloud.com/osd-addons/acm
        source: quay.io/osd-addons/acm
      - mirrors:
        - quay.io/osd-addons/cluster-logging-operator
        - pull.q1w2.quay.rhcloud.com/osd-addons/cluster-logging-operator
        source: quay.io/osd-addons/cluster-logging-operator
      - mirrors:
        - quay.io/osd-addons/codeready-workspaces
        - pull.q1w2.quay.rhcloud.com/osd-addons/codeready-workspaces
        source: quay.io/osd-addons/codeready-workspaces
      - mirrors:
        - quay.io/osd-addons/codeready-workspaces-qe
        - pull.q1w2.quay.rhcloud.com/osd-addons/codeready-workspaces-qe
        source: quay.io/osd-addons/codeready-workspaces-qe
      - mirrors:
        - quay.io/osd-addons/dba-operator
        - pull.q1w2.quay.rhcloud.com/osd-addons/dba-operator
        source: quay.io/osd-addons/dba-operator
      - mirrors:
        - quay.io/osd-addons/kas-fleetshard-operator
        - pull.q1w2.quay.rhcloud.com/osd-addons/kas-fleetshard-operator
        source: quay.io/osd-addons/kas-fleetshard-operator
      - mirrors:
        - quay.io/osd-addons/managed-api-service
        - pull.q1w2.quay.rhcloud.com/osd-addons/managed-api-service
        source: quay.io/osd-addons/managed-api-service
      - mirrors:
        - quay.io/osd-addons/managed-kafka
        - pull.q1w2.quay.rhcloud.com/osd-addons/managed-kafka
        source: quay.io/osd-addons/managed-kafka
      - mirrors:
        - quay.io/osd-addons/ocs-converged
        - pull.q1w2.quay.rhcloud.com/osd-addons/ocs-converged
        source: quay.io/osd-addons/ocs-converged
      - mirrors:
        - quay.io/osd-addons/ocs-converged-dev
        - pull.q1w2.quay.rhcloud.com/osd-addons/ocs-converged-dev
        source: quay.io/osd-addons/ocs-converged-dev
      - mirrors:
        - quay.io/osd-addons/opendatahub-operator
        - pull.q1w2.quay.rhcloud.com/osd-addons/opendatahub-operator
        source: quay.io/osd-addons/opendatahub-operator
      - mirrors:
        - quay.io/osd-addons/prow
        - pull.q1w2.quay.rhcloud.com/osd-addons/prow
        source: quay.io/osd-addons/prow
      - mirrors:
        - quay.io/osd-addons/rhmi
        - pull.q1w2.quay.rhcloud.com/osd-addons/rhmi
        source: quay.io/osd-addons/rhmi
      - mirrors:
        - quay.io/osd-addons/rhmi-internal
        - pull.q1w2.quay.rhcloud.com/osd-addons/rhmi-internal
        source: quay.io/osd-addons/rhmi-internal
      - mirrors:
        - quay.io/osd-addons/rhoam-internal
        - pull.q1w2.quay.rhcloud.com/osd-addons/rhoam-internal
        source: quay.io/osd-addons/rhoam-internal
      - mirrors:
        - quay.io/app-sre/token-refresher
        - pull.q1w2.quay.rhcloud.com/app-sre/token-refresher
        source: quay.io/app-sre/token-refresher
      kind: InstallConfig
      metadata:
        creationTimestamp: null
        labels:
          api.openshift.com/environment: production
          api.openshift.com/id: 1sdcrj3pmooemv6apkbt2v41v18s45kb
          api.openshift.com/managed: "true"
          api.openshift.com/name: odf-service
          hive.openshift.io/cluster-type: managed
        name: odf-service
        namespace: uhc-production-1sdcrj3pmooemv6apkbt2v41v18s45kb
      networking:
        clusterNetwork:
        - cidr: 10.128.0.0/14
          hostPrefix: 23
        machineCIDR: 10.0.0.0/16
        machineNetwork:
        - cidr: 10.0.0.0/16
        networkType: OpenShiftSDN
        serviceNetwork:
        - 172.30.0.0/16
      platform:
        aws:
          experimentalPropagateUserTags: true
          region: us-east-1
          subnets:
          - subnet-077216d99f3c985c6
          - subnet-01e59ce5dceb49534
          - subnet-0996277ca6f4b4725
          - subnet-0e8c4908873bc53e9
          - subnet-052d4f036b1373b60
          - subnet-026625675fd22b3c7
          userTags:
            red-hat-clustertype: rosa
            red-hat-managed: "true"
      publish: External
      pullSecret: ""
      sshKey: |
        ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDO24fImMmUr4JTyCh6OTVJX3OXHduAHCQmrYalYfCSmNddNXlpDNUn598mnKo0oQu4GvkwZcyNxyBnpjwcx58xIDe0NqggXeLKCU3iQJt1D6MQCMTfQY7dDqGdEE8+KEbu9N+sgOKGchdiqqvdKmm1hDxx4sHF7UiQxndHG0tEHQVmNBSKiicyionDRYPhFARixjX31zzPgaCUvyWtnnuZvJEVMFF9g5FBFgpI2l4iofB6VzvM3BaMKm1bDW8P95Ns7EZWEQX3/p7toAd68CEygI0IM6hqQfxJQnOWTMDYPPMDkEkhhkO5pK5wGLkW8/Ge2/OU8rmk4wR3ZCzyf5/7
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:07:44Z"
    name: cluster-config-v1
    namespace: openshift-etcd
    resourceVersion: "4701"
    uid: 2c4b1d5c-63ff-4032-8b13-72e41f1e0702
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:07:45Z"
    name: etcd-ca-bundle
    namespace: openshift-etcd
    resourceVersion: "4775"
    uid: fa960981-1503-45bc-9f24-9acfc111ff57
- apiVersion: v1
  data:
    40ed1a5d6f4d4ddf: 10.0.169.205
    4e1a3e013d5c6145: 10.0.149.121
    a414a9d88f840335: 10.0.138.197
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:05:40Z"
    name: etcd-endpoints
    namespace: openshift-etcd
    resourceVersion: "24757"
    uid: 86e18f87-cdf9-4ffa-bac6-4064bed11c71
- apiVersion: v1
  kind: ConfigMap
  metadata:
    annotations:
      alpha.installer.openshift.io/etcd-bootstrap: 10.0.5.224
    creationTimestamp: "2022-05-24T18:08:38Z"
    name: etcd-endpoints-2
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-2
      uid: e70a5166-7f2e-4820-a56b-351d4fce63e9
    resourceVersion: "7825"
    uid: e9875ee6-8178-43fa-acd9-cfd9c12f7326
- apiVersion: v1
  data:
    4e1a3e013d5c6145: 10.0.149.121
  kind: ConfigMap
  metadata:
    annotations:
      alpha.installer.openshift.io/etcd-bootstrap: 10.0.5.224
    creationTimestamp: "2022-05-24T18:09:52Z"
    name: etcd-endpoints-3
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-3
      uid: b7bb0d7a-0881-41ee-add2-913f7ab66104
    resourceVersion: "10138"
    uid: 5a8863d1-cd11-4186-941e-c50b193d7df7
- apiVersion: v1
  data:
    4e1a3e013d5c6145: 10.0.149.121
    a414a9d88f840335: 10.0.138.197
  kind: ConfigMap
  metadata:
    annotations:
      alpha.installer.openshift.io/etcd-bootstrap: 10.0.5.224
    creationTimestamp: "2022-05-24T18:11:26Z"
    name: etcd-endpoints-4
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-4
      uid: 23a503bb-17b1-4769-ae19-e6085e21ec01
    resourceVersion: "12208"
    uid: a098cdcd-3a08-4f34-be3f-05b06c392b7a
- apiVersion: v1
  data:
    40ed1a5d6f4d4ddf: 10.0.169.205
    4e1a3e013d5c6145: 10.0.149.121
    a414a9d88f840335: 10.0.138.197
  kind: ConfigMap
  metadata:
    annotations:
      alpha.installer.openshift.io/etcd-bootstrap: 10.0.5.224
    creationTimestamp: "2022-05-24T18:13:07Z"
    name: etcd-endpoints-5
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-5
      uid: a38c6f1a-987b-4095-aa50-5dcb10e1bf90
    resourceVersion: "15475"
    uid: 5c099bf6-c70d-49ba-ad07-626d221c4db9
- apiVersion: v1
  data:
    40ed1a5d6f4d4ddf: 10.0.169.205
    4e1a3e013d5c6145: 10.0.149.121
    a414a9d88f840335: 10.0.138.197
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:19:19Z"
    name: etcd-endpoints-6
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-6
      uid: fdcdd4fe-5b59-45c9-b30a-4b1b7650b38d
    resourceVersion: "24849"
    uid: 60718f32-7f6e-439e-a335-d21a5bdd9bcf
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDRzCCAi+gAwIBAgIIO2wKBtDJAH8wDQYJKoZIhvcNAQELBQAwMTESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRswGQYDVQQDExJldGNkLW1ldHJpYy1zaWduZXIwHhcNMjIw
      NTI0MTgwNDEyWhcNMzIwNTIxMTgwNDEzWjAxMRIwEAYDVQQLEwlvcGVuc2hpZnQx
      GzAZBgNVBAMTEmV0Y2QtbWV0cmljLXNpZ25lcjCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBALQ31QSVPXkxweRaJg+v49m5ZmPvs/1bpBbVuDNam1n8pWdY
      LQiadBpalvKKvaXw+Rhp65ZX+8PwaPCn0uLR8pH9YML4rrT/35nnFBiycmDCUdhv
      +lJgOBCh2XnJIXusbYr0RMdTCJF+Tzbjdxv1ZexU0WdYFmN3MmIOk1/FRtVvTmGi
      UgRmeN3sbMrdS8I9XDHc9Xf/mPlMn10LFMnUFK6mYmXYA+q8MCB4e+hWkrQVu8L5
      r3vZ0UTma4/GCDNM/e3tn4+WoUzSZENdUdW2is7f9R6iPoO2m793REtJS9bePbP9
      hkK1Vq0niki/6KtXcJzzU1HOiDOJOwW/wMNixIUCAwEAAaNjMGEwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI2EEc2ez4NBVQ/6IETQ
      huHtfNkMMB8GA1UdIwQYMBaAFI2EEc2ez4NBVQ/6IETQhuHtfNkMMA0GCSqGSIb3
      DQEBCwUAA4IBAQALE//zmhVztWARio0rF1Vao6e1Uyg7u6LyaC5t/AqSSomnn3NT
      YjglIxxB5LF+l03polJsAOo6gJ2Bea9+nFfvW63CG5LXHL+PFjZvc6P6asuBdQRp
      LXLxM4dfXOzpu+wgmJ7EDoLgTEpHicqz7Tk815nO65nAhdnql+Tl099r1UufP5fh
      VWiDRra4Z2DzxutPo/Uz7A+TYoBXGiaRTpUEDkkDnCpwBE998DDpbSGbNSdRbnxP
      MNaz0gFGoaiTe89D7R168gfecq8J8ysABkQ8wdD2eBCmNrY8U4d5qnPtVIu0wTew
      c58k+cTDGmFfJBFIyEzDy0uuPSY28VKxCghi
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:07:46Z"
    name: etcd-metrics-proxy-client-ca
    namespace: openshift-etcd
    resourceVersion: "4822"
    uid: 19355458-b274-43bf-bbdc-8c8019401fd3
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDRzCCAi+gAwIBAgIIO2wKBtDJAH8wDQYJKoZIhvcNAQELBQAwMTESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRswGQYDVQQDExJldGNkLW1ldHJpYy1zaWduZXIwHhcNMjIw
      NTI0MTgwNDEyWhcNMzIwNTIxMTgwNDEzWjAxMRIwEAYDVQQLEwlvcGVuc2hpZnQx
      GzAZBgNVBAMTEmV0Y2QtbWV0cmljLXNpZ25lcjCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBALQ31QSVPXkxweRaJg+v49m5ZmPvs/1bpBbVuDNam1n8pWdY
      LQiadBpalvKKvaXw+Rhp65ZX+8PwaPCn0uLR8pH9YML4rrT/35nnFBiycmDCUdhv
      +lJgOBCh2XnJIXusbYr0RMdTCJF+Tzbjdxv1ZexU0WdYFmN3MmIOk1/FRtVvTmGi
      UgRmeN3sbMrdS8I9XDHc9Xf/mPlMn10LFMnUFK6mYmXYA+q8MCB4e+hWkrQVu8L5
      r3vZ0UTma4/GCDNM/e3tn4+WoUzSZENdUdW2is7f9R6iPoO2m793REtJS9bePbP9
      hkK1Vq0niki/6KtXcJzzU1HOiDOJOwW/wMNixIUCAwEAAaNjMGEwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI2EEc2ez4NBVQ/6IETQ
      huHtfNkMMB8GA1UdIwQYMBaAFI2EEc2ez4NBVQ/6IETQhuHtfNkMMA0GCSqGSIb3
      DQEBCwUAA4IBAQALE//zmhVztWARio0rF1Vao6e1Uyg7u6LyaC5t/AqSSomnn3NT
      YjglIxxB5LF+l03polJsAOo6gJ2Bea9+nFfvW63CG5LXHL+PFjZvc6P6asuBdQRp
      LXLxM4dfXOzpu+wgmJ7EDoLgTEpHicqz7Tk815nO65nAhdnql+Tl099r1UufP5fh
      VWiDRra4Z2DzxutPo/Uz7A+TYoBXGiaRTpUEDkkDnCpwBE998DDpbSGbNSdRbnxP
      MNaz0gFGoaiTe89D7R168gfecq8J8ysABkQ8wdD2eBCmNrY8U4d5qnPtVIu0wTew
      c58k+cTDGmFfJBFIyEzDy0uuPSY28VKxCghi
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:08:37Z"
    name: etcd-metrics-proxy-client-ca-2
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-2
      uid: e70a5166-7f2e-4820-a56b-351d4fce63e9
    resourceVersion: "7800"
    uid: f1bebf46-f4b2-4749-8ef4-587c134e5d54
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDRzCCAi+gAwIBAgIIO2wKBtDJAH8wDQYJKoZIhvcNAQELBQAwMTESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRswGQYDVQQDExJldGNkLW1ldHJpYy1zaWduZXIwHhcNMjIw
      NTI0MTgwNDEyWhcNMzIwNTIxMTgwNDEzWjAxMRIwEAYDVQQLEwlvcGVuc2hpZnQx
      GzAZBgNVBAMTEmV0Y2QtbWV0cmljLXNpZ25lcjCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBALQ31QSVPXkxweRaJg+v49m5ZmPvs/1bpBbVuDNam1n8pWdY
      LQiadBpalvKKvaXw+Rhp65ZX+8PwaPCn0uLR8pH9YML4rrT/35nnFBiycmDCUdhv
      +lJgOBCh2XnJIXusbYr0RMdTCJF+Tzbjdxv1ZexU0WdYFmN3MmIOk1/FRtVvTmGi
      UgRmeN3sbMrdS8I9XDHc9Xf/mPlMn10LFMnUFK6mYmXYA+q8MCB4e+hWkrQVu8L5
      r3vZ0UTma4/GCDNM/e3tn4+WoUzSZENdUdW2is7f9R6iPoO2m793REtJS9bePbP9
      hkK1Vq0niki/6KtXcJzzU1HOiDOJOwW/wMNixIUCAwEAAaNjMGEwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI2EEc2ez4NBVQ/6IETQ
      huHtfNkMMB8GA1UdIwQYMBaAFI2EEc2ez4NBVQ/6IETQhuHtfNkMMA0GCSqGSIb3
      DQEBCwUAA4IBAQALE//zmhVztWARio0rF1Vao6e1Uyg7u6LyaC5t/AqSSomnn3NT
      YjglIxxB5LF+l03polJsAOo6gJ2Bea9+nFfvW63CG5LXHL+PFjZvc6P6asuBdQRp
      LXLxM4dfXOzpu+wgmJ7EDoLgTEpHicqz7Tk815nO65nAhdnql+Tl099r1UufP5fh
      VWiDRra4Z2DzxutPo/Uz7A+TYoBXGiaRTpUEDkkDnCpwBE998DDpbSGbNSdRbnxP
      MNaz0gFGoaiTe89D7R168gfecq8J8ysABkQ8wdD2eBCmNrY8U4d5qnPtVIu0wTew
      c58k+cTDGmFfJBFIyEzDy0uuPSY28VKxCghi
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:09:51Z"
    name: etcd-metrics-proxy-client-ca-3
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-3
      uid: b7bb0d7a-0881-41ee-add2-913f7ab66104
    resourceVersion: "10120"
    uid: f3556ce7-198f-4ef5-8323-8455b0d15457
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDRzCCAi+gAwIBAgIIO2wKBtDJAH8wDQYJKoZIhvcNAQELBQAwMTESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRswGQYDVQQDExJldGNkLW1ldHJpYy1zaWduZXIwHhcNMjIw
      NTI0MTgwNDEyWhcNMzIwNTIxMTgwNDEzWjAxMRIwEAYDVQQLEwlvcGVuc2hpZnQx
      GzAZBgNVBAMTEmV0Y2QtbWV0cmljLXNpZ25lcjCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBALQ31QSVPXkxweRaJg+v49m5ZmPvs/1bpBbVuDNam1n8pWdY
      LQiadBpalvKKvaXw+Rhp65ZX+8PwaPCn0uLR8pH9YML4rrT/35nnFBiycmDCUdhv
      +lJgOBCh2XnJIXusbYr0RMdTCJF+Tzbjdxv1ZexU0WdYFmN3MmIOk1/FRtVvTmGi
      UgRmeN3sbMrdS8I9XDHc9Xf/mPlMn10LFMnUFK6mYmXYA+q8MCB4e+hWkrQVu8L5
      r3vZ0UTma4/GCDNM/e3tn4+WoUzSZENdUdW2is7f9R6iPoO2m793REtJS9bePbP9
      hkK1Vq0niki/6KtXcJzzU1HOiDOJOwW/wMNixIUCAwEAAaNjMGEwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI2EEc2ez4NBVQ/6IETQ
      huHtfNkMMB8GA1UdIwQYMBaAFI2EEc2ez4NBVQ/6IETQhuHtfNkMMA0GCSqGSIb3
      DQEBCwUAA4IBAQALE//zmhVztWARio0rF1Vao6e1Uyg7u6LyaC5t/AqSSomnn3NT
      YjglIxxB5LF+l03polJsAOo6gJ2Bea9+nFfvW63CG5LXHL+PFjZvc6P6asuBdQRp
      LXLxM4dfXOzpu+wgmJ7EDoLgTEpHicqz7Tk815nO65nAhdnql+Tl099r1UufP5fh
      VWiDRra4Z2DzxutPo/Uz7A+TYoBXGiaRTpUEDkkDnCpwBE998DDpbSGbNSdRbnxP
      MNaz0gFGoaiTe89D7R168gfecq8J8ysABkQ8wdD2eBCmNrY8U4d5qnPtVIu0wTew
      c58k+cTDGmFfJBFIyEzDy0uuPSY28VKxCghi
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:11:24Z"
    name: etcd-metrics-proxy-client-ca-4
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-4
      uid: 23a503bb-17b1-4769-ae19-e6085e21ec01
    resourceVersion: "12186"
    uid: 411f6111-6b67-4989-8d60-cdc03c981328
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDRzCCAi+gAwIBAgIIO2wKBtDJAH8wDQYJKoZIhvcNAQELBQAwMTESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRswGQYDVQQDExJldGNkLW1ldHJpYy1zaWduZXIwHhcNMjIw
      NTI0MTgwNDEyWhcNMzIwNTIxMTgwNDEzWjAxMRIwEAYDVQQLEwlvcGVuc2hpZnQx
      GzAZBgNVBAMTEmV0Y2QtbWV0cmljLXNpZ25lcjCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBALQ31QSVPXkxweRaJg+v49m5ZmPvs/1bpBbVuDNam1n8pWdY
      LQiadBpalvKKvaXw+Rhp65ZX+8PwaPCn0uLR8pH9YML4rrT/35nnFBiycmDCUdhv
      +lJgOBCh2XnJIXusbYr0RMdTCJF+Tzbjdxv1ZexU0WdYFmN3MmIOk1/FRtVvTmGi
      UgRmeN3sbMrdS8I9XDHc9Xf/mPlMn10LFMnUFK6mYmXYA+q8MCB4e+hWkrQVu8L5
      r3vZ0UTma4/GCDNM/e3tn4+WoUzSZENdUdW2is7f9R6iPoO2m793REtJS9bePbP9
      hkK1Vq0niki/6KtXcJzzU1HOiDOJOwW/wMNixIUCAwEAAaNjMGEwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI2EEc2ez4NBVQ/6IETQ
      huHtfNkMMB8GA1UdIwQYMBaAFI2EEc2ez4NBVQ/6IETQhuHtfNkMMA0GCSqGSIb3
      DQEBCwUAA4IBAQALE//zmhVztWARio0rF1Vao6e1Uyg7u6LyaC5t/AqSSomnn3NT
      YjglIxxB5LF+l03polJsAOo6gJ2Bea9+nFfvW63CG5LXHL+PFjZvc6P6asuBdQRp
      LXLxM4dfXOzpu+wgmJ7EDoLgTEpHicqz7Tk815nO65nAhdnql+Tl099r1UufP5fh
      VWiDRra4Z2DzxutPo/Uz7A+TYoBXGiaRTpUEDkkDnCpwBE998DDpbSGbNSdRbnxP
      MNaz0gFGoaiTe89D7R168gfecq8J8ysABkQ8wdD2eBCmNrY8U4d5qnPtVIu0wTew
      c58k+cTDGmFfJBFIyEzDy0uuPSY28VKxCghi
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:13:06Z"
    name: etcd-metrics-proxy-client-ca-5
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-5
      uid: a38c6f1a-987b-4095-aa50-5dcb10e1bf90
    resourceVersion: "15332"
    uid: 63709249-79f5-419c-bfcf-a7fcc3d31688
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDRzCCAi+gAwIBAgIIO2wKBtDJAH8wDQYJKoZIhvcNAQELBQAwMTESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRswGQYDVQQDExJldGNkLW1ldHJpYy1zaWduZXIwHhcNMjIw
      NTI0MTgwNDEyWhcNMzIwNTIxMTgwNDEzWjAxMRIwEAYDVQQLEwlvcGVuc2hpZnQx
      GzAZBgNVBAMTEmV0Y2QtbWV0cmljLXNpZ25lcjCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBALQ31QSVPXkxweRaJg+v49m5ZmPvs/1bpBbVuDNam1n8pWdY
      LQiadBpalvKKvaXw+Rhp65ZX+8PwaPCn0uLR8pH9YML4rrT/35nnFBiycmDCUdhv
      +lJgOBCh2XnJIXusbYr0RMdTCJF+Tzbjdxv1ZexU0WdYFmN3MmIOk1/FRtVvTmGi
      UgRmeN3sbMrdS8I9XDHc9Xf/mPlMn10LFMnUFK6mYmXYA+q8MCB4e+hWkrQVu8L5
      r3vZ0UTma4/GCDNM/e3tn4+WoUzSZENdUdW2is7f9R6iPoO2m793REtJS9bePbP9
      hkK1Vq0niki/6KtXcJzzU1HOiDOJOwW/wMNixIUCAwEAAaNjMGEwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI2EEc2ez4NBVQ/6IETQ
      huHtfNkMMB8GA1UdIwQYMBaAFI2EEc2ez4NBVQ/6IETQhuHtfNkMMA0GCSqGSIb3
      DQEBCwUAA4IBAQALE//zmhVztWARio0rF1Vao6e1Uyg7u6LyaC5t/AqSSomnn3NT
      YjglIxxB5LF+l03polJsAOo6gJ2Bea9+nFfvW63CG5LXHL+PFjZvc6P6asuBdQRp
      LXLxM4dfXOzpu+wgmJ7EDoLgTEpHicqz7Tk815nO65nAhdnql+Tl099r1UufP5fh
      VWiDRra4Z2DzxutPo/Uz7A+TYoBXGiaRTpUEDkkDnCpwBE998DDpbSGbNSdRbnxP
      MNaz0gFGoaiTe89D7R168gfecq8J8ysABkQ8wdD2eBCmNrY8U4d5qnPtVIu0wTew
      c58k+cTDGmFfJBFIyEzDy0uuPSY28VKxCghi
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:19:19Z"
    name: etcd-metrics-proxy-client-ca-6
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-6
      uid: fdcdd4fe-5b59-45c9-b30a-4b1b7650b38d
    resourceVersion: "24846"
    uid: abc0f3a3-ed34-40f3-8de2-587385b2aba8
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDRzCCAi+gAwIBAgIIO2wKBtDJAH8wDQYJKoZIhvcNAQELBQAwMTESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRswGQYDVQQDExJldGNkLW1ldHJpYy1zaWduZXIwHhcNMjIw
      NTI0MTgwNDEyWhcNMzIwNTIxMTgwNDEzWjAxMRIwEAYDVQQLEwlvcGVuc2hpZnQx
      GzAZBgNVBAMTEmV0Y2QtbWV0cmljLXNpZ25lcjCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBALQ31QSVPXkxweRaJg+v49m5ZmPvs/1bpBbVuDNam1n8pWdY
      LQiadBpalvKKvaXw+Rhp65ZX+8PwaPCn0uLR8pH9YML4rrT/35nnFBiycmDCUdhv
      +lJgOBCh2XnJIXusbYr0RMdTCJF+Tzbjdxv1ZexU0WdYFmN3MmIOk1/FRtVvTmGi
      UgRmeN3sbMrdS8I9XDHc9Xf/mPlMn10LFMnUFK6mYmXYA+q8MCB4e+hWkrQVu8L5
      r3vZ0UTma4/GCDNM/e3tn4+WoUzSZENdUdW2is7f9R6iPoO2m793REtJS9bePbP9
      hkK1Vq0niki/6KtXcJzzU1HOiDOJOwW/wMNixIUCAwEAAaNjMGEwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI2EEc2ez4NBVQ/6IETQ
      huHtfNkMMB8GA1UdIwQYMBaAFI2EEc2ez4NBVQ/6IETQhuHtfNkMMA0GCSqGSIb3
      DQEBCwUAA4IBAQALE//zmhVztWARio0rF1Vao6e1Uyg7u6LyaC5t/AqSSomnn3NT
      YjglIxxB5LF+l03polJsAOo6gJ2Bea9+nFfvW63CG5LXHL+PFjZvc6P6asuBdQRp
      LXLxM4dfXOzpu+wgmJ7EDoLgTEpHicqz7Tk815nO65nAhdnql+Tl099r1UufP5fh
      VWiDRra4Z2DzxutPo/Uz7A+TYoBXGiaRTpUEDkkDnCpwBE998DDpbSGbNSdRbnxP
      MNaz0gFGoaiTe89D7R168gfecq8J8ysABkQ8wdD2eBCmNrY8U4d5qnPtVIu0wTew
      c58k+cTDGmFfJBFIyEzDy0uuPSY28VKxCghi
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:07:44Z"
    name: etcd-metrics-proxy-serving-ca
    namespace: openshift-etcd
    resourceVersion: "4675"
    uid: 3937c64c-7397-40eb-932d-c4b953e06d8f
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDRzCCAi+gAwIBAgIIO2wKBtDJAH8wDQYJKoZIhvcNAQELBQAwMTESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRswGQYDVQQDExJldGNkLW1ldHJpYy1zaWduZXIwHhcNMjIw
      NTI0MTgwNDEyWhcNMzIwNTIxMTgwNDEzWjAxMRIwEAYDVQQLEwlvcGVuc2hpZnQx
      GzAZBgNVBAMTEmV0Y2QtbWV0cmljLXNpZ25lcjCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBALQ31QSVPXkxweRaJg+v49m5ZmPvs/1bpBbVuDNam1n8pWdY
      LQiadBpalvKKvaXw+Rhp65ZX+8PwaPCn0uLR8pH9YML4rrT/35nnFBiycmDCUdhv
      +lJgOBCh2XnJIXusbYr0RMdTCJF+Tzbjdxv1ZexU0WdYFmN3MmIOk1/FRtVvTmGi
      UgRmeN3sbMrdS8I9XDHc9Xf/mPlMn10LFMnUFK6mYmXYA+q8MCB4e+hWkrQVu8L5
      r3vZ0UTma4/GCDNM/e3tn4+WoUzSZENdUdW2is7f9R6iPoO2m793REtJS9bePbP9
      hkK1Vq0niki/6KtXcJzzU1HOiDOJOwW/wMNixIUCAwEAAaNjMGEwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI2EEc2ez4NBVQ/6IETQ
      huHtfNkMMB8GA1UdIwQYMBaAFI2EEc2ez4NBVQ/6IETQhuHtfNkMMA0GCSqGSIb3
      DQEBCwUAA4IBAQALE//zmhVztWARio0rF1Vao6e1Uyg7u6LyaC5t/AqSSomnn3NT
      YjglIxxB5LF+l03polJsAOo6gJ2Bea9+nFfvW63CG5LXHL+PFjZvc6P6asuBdQRp
      LXLxM4dfXOzpu+wgmJ7EDoLgTEpHicqz7Tk815nO65nAhdnql+Tl099r1UufP5fh
      VWiDRra4Z2DzxutPo/Uz7A+TYoBXGiaRTpUEDkkDnCpwBE998DDpbSGbNSdRbnxP
      MNaz0gFGoaiTe89D7R168gfecq8J8ysABkQ8wdD2eBCmNrY8U4d5qnPtVIu0wTew
      c58k+cTDGmFfJBFIyEzDy0uuPSY28VKxCghi
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:08:36Z"
    name: etcd-metrics-proxy-serving-ca-2
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-2
      uid: e70a5166-7f2e-4820-a56b-351d4fce63e9
    resourceVersion: "7775"
    uid: 23a20c9f-4702-493e-907a-5de173678bbe
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDRzCCAi+gAwIBAgIIO2wKBtDJAH8wDQYJKoZIhvcNAQELBQAwMTESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRswGQYDVQQDExJldGNkLW1ldHJpYy1zaWduZXIwHhcNMjIw
      NTI0MTgwNDEyWhcNMzIwNTIxMTgwNDEzWjAxMRIwEAYDVQQLEwlvcGVuc2hpZnQx
      GzAZBgNVBAMTEmV0Y2QtbWV0cmljLXNpZ25lcjCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBALQ31QSVPXkxweRaJg+v49m5ZmPvs/1bpBbVuDNam1n8pWdY
      LQiadBpalvKKvaXw+Rhp65ZX+8PwaPCn0uLR8pH9YML4rrT/35nnFBiycmDCUdhv
      +lJgOBCh2XnJIXusbYr0RMdTCJF+Tzbjdxv1ZexU0WdYFmN3MmIOk1/FRtVvTmGi
      UgRmeN3sbMrdS8I9XDHc9Xf/mPlMn10LFMnUFK6mYmXYA+q8MCB4e+hWkrQVu8L5
      r3vZ0UTma4/GCDNM/e3tn4+WoUzSZENdUdW2is7f9R6iPoO2m793REtJS9bePbP9
      hkK1Vq0niki/6KtXcJzzU1HOiDOJOwW/wMNixIUCAwEAAaNjMGEwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI2EEc2ez4NBVQ/6IETQ
      huHtfNkMMB8GA1UdIwQYMBaAFI2EEc2ez4NBVQ/6IETQhuHtfNkMMA0GCSqGSIb3
      DQEBCwUAA4IBAQALE//zmhVztWARio0rF1Vao6e1Uyg7u6LyaC5t/AqSSomnn3NT
      YjglIxxB5LF+l03polJsAOo6gJ2Bea9+nFfvW63CG5LXHL+PFjZvc6P6asuBdQRp
      LXLxM4dfXOzpu+wgmJ7EDoLgTEpHicqz7Tk815nO65nAhdnql+Tl099r1UufP5fh
      VWiDRra4Z2DzxutPo/Uz7A+TYoBXGiaRTpUEDkkDnCpwBE998DDpbSGbNSdRbnxP
      MNaz0gFGoaiTe89D7R168gfecq8J8ysABkQ8wdD2eBCmNrY8U4d5qnPtVIu0wTew
      c58k+cTDGmFfJBFIyEzDy0uuPSY28VKxCghi
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:09:49Z"
    name: etcd-metrics-proxy-serving-ca-3
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-3
      uid: b7bb0d7a-0881-41ee-add2-913f7ab66104
    resourceVersion: "10105"
    uid: 9272ddc4-30c8-4695-a53c-1162a3f00d91
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDRzCCAi+gAwIBAgIIO2wKBtDJAH8wDQYJKoZIhvcNAQELBQAwMTESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRswGQYDVQQDExJldGNkLW1ldHJpYy1zaWduZXIwHhcNMjIw
      NTI0MTgwNDEyWhcNMzIwNTIxMTgwNDEzWjAxMRIwEAYDVQQLEwlvcGVuc2hpZnQx
      GzAZBgNVBAMTEmV0Y2QtbWV0cmljLXNpZ25lcjCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBALQ31QSVPXkxweRaJg+v49m5ZmPvs/1bpBbVuDNam1n8pWdY
      LQiadBpalvKKvaXw+Rhp65ZX+8PwaPCn0uLR8pH9YML4rrT/35nnFBiycmDCUdhv
      +lJgOBCh2XnJIXusbYr0RMdTCJF+Tzbjdxv1ZexU0WdYFmN3MmIOk1/FRtVvTmGi
      UgRmeN3sbMrdS8I9XDHc9Xf/mPlMn10LFMnUFK6mYmXYA+q8MCB4e+hWkrQVu8L5
      r3vZ0UTma4/GCDNM/e3tn4+WoUzSZENdUdW2is7f9R6iPoO2m793REtJS9bePbP9
      hkK1Vq0niki/6KtXcJzzU1HOiDOJOwW/wMNixIUCAwEAAaNjMGEwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI2EEc2ez4NBVQ/6IETQ
      huHtfNkMMB8GA1UdIwQYMBaAFI2EEc2ez4NBVQ/6IETQhuHtfNkMMA0GCSqGSIb3
      DQEBCwUAA4IBAQALE//zmhVztWARio0rF1Vao6e1Uyg7u6LyaC5t/AqSSomnn3NT
      YjglIxxB5LF+l03polJsAOo6gJ2Bea9+nFfvW63CG5LXHL+PFjZvc6P6asuBdQRp
      LXLxM4dfXOzpu+wgmJ7EDoLgTEpHicqz7Tk815nO65nAhdnql+Tl099r1UufP5fh
      VWiDRra4Z2DzxutPo/Uz7A+TYoBXGiaRTpUEDkkDnCpwBE998DDpbSGbNSdRbnxP
      MNaz0gFGoaiTe89D7R168gfecq8J8ysABkQ8wdD2eBCmNrY8U4d5qnPtVIu0wTew
      c58k+cTDGmFfJBFIyEzDy0uuPSY28VKxCghi
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:11:24Z"
    name: etcd-metrics-proxy-serving-ca-4
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-4
      uid: 23a503bb-17b1-4769-ae19-e6085e21ec01
    resourceVersion: "12136"
    uid: ddccc399-a94c-444f-aa33-bd9d00f40ae3
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDRzCCAi+gAwIBAgIIO2wKBtDJAH8wDQYJKoZIhvcNAQELBQAwMTESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRswGQYDVQQDExJldGNkLW1ldHJpYy1zaWduZXIwHhcNMjIw
      NTI0MTgwNDEyWhcNMzIwNTIxMTgwNDEzWjAxMRIwEAYDVQQLEwlvcGVuc2hpZnQx
      GzAZBgNVBAMTEmV0Y2QtbWV0cmljLXNpZ25lcjCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBALQ31QSVPXkxweRaJg+v49m5ZmPvs/1bpBbVuDNam1n8pWdY
      LQiadBpalvKKvaXw+Rhp65ZX+8PwaPCn0uLR8pH9YML4rrT/35nnFBiycmDCUdhv
      +lJgOBCh2XnJIXusbYr0RMdTCJF+Tzbjdxv1ZexU0WdYFmN3MmIOk1/FRtVvTmGi
      UgRmeN3sbMrdS8I9XDHc9Xf/mPlMn10LFMnUFK6mYmXYA+q8MCB4e+hWkrQVu8L5
      r3vZ0UTma4/GCDNM/e3tn4+WoUzSZENdUdW2is7f9R6iPoO2m793REtJS9bePbP9
      hkK1Vq0niki/6KtXcJzzU1HOiDOJOwW/wMNixIUCAwEAAaNjMGEwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI2EEc2ez4NBVQ/6IETQ
      huHtfNkMMB8GA1UdIwQYMBaAFI2EEc2ez4NBVQ/6IETQhuHtfNkMMA0GCSqGSIb3
      DQEBCwUAA4IBAQALE//zmhVztWARio0rF1Vao6e1Uyg7u6LyaC5t/AqSSomnn3NT
      YjglIxxB5LF+l03polJsAOo6gJ2Bea9+nFfvW63CG5LXHL+PFjZvc6P6asuBdQRp
      LXLxM4dfXOzpu+wgmJ7EDoLgTEpHicqz7Tk815nO65nAhdnql+Tl099r1UufP5fh
      VWiDRra4Z2DzxutPo/Uz7A+TYoBXGiaRTpUEDkkDnCpwBE998DDpbSGbNSdRbnxP
      MNaz0gFGoaiTe89D7R168gfecq8J8ysABkQ8wdD2eBCmNrY8U4d5qnPtVIu0wTew
      c58k+cTDGmFfJBFIyEzDy0uuPSY28VKxCghi
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:12:52Z"
    name: etcd-metrics-proxy-serving-ca-5
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-5
      uid: a38c6f1a-987b-4095-aa50-5dcb10e1bf90
    resourceVersion: "14383"
    uid: 01481b62-4f05-4354-b063-825f6d84b77e
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDRzCCAi+gAwIBAgIIO2wKBtDJAH8wDQYJKoZIhvcNAQELBQAwMTESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRswGQYDVQQDExJldGNkLW1ldHJpYy1zaWduZXIwHhcNMjIw
      NTI0MTgwNDEyWhcNMzIwNTIxMTgwNDEzWjAxMRIwEAYDVQQLEwlvcGVuc2hpZnQx
      GzAZBgNVBAMTEmV0Y2QtbWV0cmljLXNpZ25lcjCCASIwDQYJKoZIhvcNAQEBBQAD
      ggEPADCCAQoCggEBALQ31QSVPXkxweRaJg+v49m5ZmPvs/1bpBbVuDNam1n8pWdY
      LQiadBpalvKKvaXw+Rhp65ZX+8PwaPCn0uLR8pH9YML4rrT/35nnFBiycmDCUdhv
      +lJgOBCh2XnJIXusbYr0RMdTCJF+Tzbjdxv1ZexU0WdYFmN3MmIOk1/FRtVvTmGi
      UgRmeN3sbMrdS8I9XDHc9Xf/mPlMn10LFMnUFK6mYmXYA+q8MCB4e+hWkrQVu8L5
      r3vZ0UTma4/GCDNM/e3tn4+WoUzSZENdUdW2is7f9R6iPoO2m793REtJS9bePbP9
      hkK1Vq0niki/6KtXcJzzU1HOiDOJOwW/wMNixIUCAwEAAaNjMGEwDgYDVR0PAQH/
      BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFI2EEc2ez4NBVQ/6IETQ
      huHtfNkMMB8GA1UdIwQYMBaAFI2EEc2ez4NBVQ/6IETQhuHtfNkMMA0GCSqGSIb3
      DQEBCwUAA4IBAQALE//zmhVztWARio0rF1Vao6e1Uyg7u6LyaC5t/AqSSomnn3NT
      YjglIxxB5LF+l03polJsAOo6gJ2Bea9+nFfvW63CG5LXHL+PFjZvc6P6asuBdQRp
      LXLxM4dfXOzpu+wgmJ7EDoLgTEpHicqz7Tk815nO65nAhdnql+Tl099r1UufP5fh
      VWiDRra4Z2DzxutPo/Uz7A+TYoBXGiaRTpUEDkkDnCpwBE998DDpbSGbNSdRbnxP
      MNaz0gFGoaiTe89D7R168gfecq8J8ysABkQ8wdD2eBCmNrY8U4d5qnPtVIu0wTew
      c58k+cTDGmFfJBFIyEzDy0uuPSY28VKxCghi
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:19:18Z"
    name: etcd-metrics-proxy-serving-ca-6
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-6
      uid: fdcdd4fe-5b59-45c9-b30a-4b1b7650b38d
    resourceVersion: "24840"
    uid: 87fe26ee-48fa-491f-bb0d-d2449331f323
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:07:46Z"
    name: etcd-peer-client-ca
    namespace: openshift-etcd
    resourceVersion: "4809"
    uid: e62bbdbb-702b-4ef1-afff-e406e2ad62fb
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:08:35Z"
    name: etcd-peer-client-ca-2
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-2
      uid: e70a5166-7f2e-4820-a56b-351d4fce63e9
    resourceVersion: "7681"
    uid: 1fa1c935-4075-452f-a441-e609cdf8f252
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:09:48Z"
    name: etcd-peer-client-ca-3
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-3
      uid: b7bb0d7a-0881-41ee-add2-913f7ab66104
    resourceVersion: "10079"
    uid: 4eb51523-607c-47d4-8d03-07108676ab71
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:11:23Z"
    name: etcd-peer-client-ca-4
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-4
      uid: 23a503bb-17b1-4769-ae19-e6085e21ec01
    resourceVersion: "12081"
    uid: b1c26adb-83b1-4c36-aa68-0cf10fc6124d
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:12:51Z"
    name: etcd-peer-client-ca-5
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-5
      uid: a38c6f1a-987b-4095-aa50-5dcb10e1bf90
    resourceVersion: "14359"
    uid: 23b42d37-7c64-49fc-9543-044318f3f39f
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:19:18Z"
    name: etcd-peer-client-ca-6
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-6
      uid: fdcdd4fe-5b59-45c9-b30a-4b1b7650b38d
    resourceVersion: "24835"
    uid: 77ef5c2f-1dc5-4265-a588-7722f116156f
- apiVersion: v1
  data:
    forceRedeploymentReason: ""
    pod.yaml: |
      apiVersion: v1
      kind: Pod
      metadata:
        name: etcd
        namespace: openshift-etcd
        annotations:
          target.workload.openshift.io/management: '{"effect": "PreferredDuringScheduling"}'
        labels:
          app: etcd
          k8s-app: etcd
          etcd: "true"
          revision: "REVISION"
      spec:
        initContainers:
          - name: setup
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                echo -n "Fixing etcd log permissions."
                chmod 0700 /var/log/etcd && touch /var/log/etcd/etcd-health-probe.log && chmod 0600 /var/log/etcd/*
            securityContext:
              privileged: true
            resources:
              requests:
                memory: 50Mi
                cpu: 5m
            volumeMounts:
              - mountPath: /var/log/etcd
                name: log-dir
          - name: etcd-ensure-env-vars
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                set -euo pipefail

                : "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST?not set}"
                : "${NODE_NODE_ENVVAR_NAME_ETCD_NAME?not set}"
                : "${NODE_NODE_ENVVAR_NAME_IP?not set}"

                # check for ipv4 addresses as well as ipv6 addresses with extra square brackets
                if [[ "${NODE_NODE_ENVVAR_NAME_IP}" != "${NODE_IP}" && "${NODE_NODE_ENVVAR_NAME_IP}" != "[${NODE_IP}]" ]]; then
                  # echo the error message to stderr
                  echo "Expected node IP to be ${NODE_IP} got ${NODE_NODE_ENVVAR_NAME_IP}" >&2
                  exit 1
                fi

                # check for ipv4 addresses as well as ipv6 addresses with extra square brackets
                if [[ "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" != "${NODE_IP}" && "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" != "[${NODE_IP}]" ]]; then
                  # echo the error message to stderr
                  echo "Expected etcd url host to be ${NODE_IP} got ${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" >&2
                  exit 1
                fi

            resources:
              requests:
                memory: 60Mi
                cpu: 10m
            securityContext:
              privileged: true
            env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
          - name: etcd-resources-copy
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                set -euo pipefail

                rm -f $(grep -l '^### Created by cluster-etcd-operator' /usr/local/bin/*)
                cp -p /etc/kubernetes/static-pod-certs/configmaps/etcd-scripts/*.sh /usr/local/bin

            resources:
              requests:
                memory: 60Mi
                cpu: 10m
            securityContext:
              privileged: true
            volumeMounts:
              - mountPath: /etc/kubernetes/static-pod-resources
                name: resource-dir
              - mountPath: /etc/kubernetes/static-pod-certs
                name: cert-dir
              - mountPath: /usr/local/bin
                name: usr-local-bin
        containers:
        # The etcdctl container should always be first. It is intended to be used
        # to open a remote shell via `oc rsh` that is ready to run `etcdctl`.
        - name: etcdctl
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - "/bin/bash"
            - "-c"
            - "trap TERM INT; sleep infinity & wait"
          resources:
            requests:
              memory: 60Mi
              cpu: 10m
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
        - name: etcd
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              etcdctl member list || true

              # this has a non-zero return code if the command is non-zero.  If you use an export first, it doesn't and you
              # will succeed when you should fail.
              ETCD_INITIAL_CLUSTER=$(discover-etcd-initial-cluster \
                --cacert=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --cert=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --key=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --endpoints=${ALL_ETCD_ENDPOINTS} \
                --data-dir=/var/lib/etcd \
                --target-peer-url-host=${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST} \
                --target-name=NODE_NAME)
              export ETCD_INITIAL_CLUSTER

              # we cannot use the "normal" port conflict initcontainer because when we upgrade, the existing static pod will never yield,
              # so we do the detection in etcd container itself.
              echo -n "Waiting for ports 2379, 2380 and 9978 to be released."
              time while [ -n "$(ss -Htan '( sport = 2379 or sport = 2380 or sport = 9978 )')" ]; do
                echo -n "."
                sleep 1
              done

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}
              env | grep ETCD | grep -v NODE

              set -x
              # See https://etcd.io/docs/v3.4.0/tuning/ for why we use ionice
              exec ionice -c2 -n0 etcd \
                --logger=zap \
                --log-level=info \
                --experimental-initial-corrupt-check=true \
                --initial-advertise-peer-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2380 \
                --cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.crt \
                --key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.key \
                --trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --client-cert-auth=true \
                --peer-cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --peer-key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --peer-trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --peer-client-cert-auth=true \
                --advertise-client-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2379 \
                --listen-client-urls=https://0.0.0.0:2379,unixs://${NODE_NODE_ENVVAR_NAME_IP}:0 \
                --listen-peer-urls=https://0.0.0.0:2380 \
                --metrics=extensive \
                --listen-metrics-urls=https://0.0.0.0:9978 ||  mv /etc/kubernetes/etcd-backup-dir/etcd-member.yaml /etc/kubernetes/manifests
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
          resources:
            requests:
              memory: 600Mi
              cpu: 300m
          readinessProbe:
            exec:
              command:
              - /bin/bash
              - -c
              - |
                set -xe

                # Unix sockets are used for health checks to ensure that the pod is reporting readiness of the etcd process
                # in this container. While this might seem unnecessary the use of SO_REUSEADDR has made this explicitly
                # required as the kernel will allow the reuse of a port while in TIME_WAIT. etcd requires socket
                # path in this format <name>:<port> so port 0 is used only to meet this requirement.
                unset ETCDCTL_ENDPOINTS
                /usr/bin/etcdctl \
                  --command-timeout=2s \
                  --dial-timeout=2s \
                  --endpoints=unixs://${NODE_NODE_ENVVAR_NAME_IP}:0 \
                  endpoint health -w json | grep \"health\":true
            failureThreshold: 3
            initialDelaySeconds: 3
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 5
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
        - name: etcd-metrics
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}

              exec etcd grpc-proxy start \
                --endpoints https://${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}:9978 \
                --metrics-addr https://0.0.0.0:9979 \
                --listen-addr 127.0.0.1:9977 \
                --key /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --key-file /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-metrics-NODE_NAME.key \
                --cert /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --cert-file /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-metrics-NODE_NAME.crt \
                --cacert /etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --trusted-ca-file /etc/kubernetes/static-pod-certs/configmaps/etcd-metrics-proxy-serving-ca/ca-bundle.crt
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
          resources:
            requests:
              memory: 200Mi
              cpu: 40m
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
        - name: etcd-health-monitor
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:f161673930ffcc897e097257b86f2452eccb61aeca0fc95c2989371b796e275d
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command: [ "cluster-etcd-operator", "monitor" ]
          args:
            - --targets=$(ETCDCTL_ENDPOINTS)
            - --probe-interval=1s
            - --log-outputs=stderr
            - --log-outputs=/var/log/etcd/etcd-health-probe.log
            - --enable-log-rotation
            - --pod-name=$(POD_NAME)
            - --static-pod-version=$(ETCD_STATIC_POD_VERSION)
            - --cert-file=$(ETCDCTL_CERT)
            - --key-file=$(ETCDCTL_KEY)
            - --cacert-file=$(ETCDCTL_CACERT)
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
            - name: "OPENSHIFT_PROFILE"
              value: "web"
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
          volumeMounts:
            - mountPath: /var/log/etcd/
              name: log-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
          resources:
            requests:
              memory: 70Mi
              cpu: 50m
        hostNetwork: true
        priorityClassName: system-node-critical
        tolerations:
        - operator: "Exists"
        volumes:
          - hostPath:
              path: /etc/kubernetes/manifests
            name: static-pod-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-pod-REVISION
            name: resource-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-certs
            name: cert-dir
          - hostPath:
              path: /var/lib/etcd
              type: ""
            name: data-dir
          - hostPath:
              path: /usr/local/bin
            name: usr-local-bin
          - hostPath:
              path: /var/log/etcd
            name: log-dir
    version: 4.10.0-202204290637.p0.g9790f8d.assembly.stream-9790f8d
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:08:30Z"
    name: etcd-pod
    namespace: openshift-etcd
    resourceVersion: "24794"
    uid: c4fa7e33-8295-40cb-a2c4-3c85988d2fba
- apiVersion: v1
  data:
    forceRedeploymentReason: ""
    pod.yaml: |
      apiVersion: v1
      kind: Pod
      metadata:
        name: etcd
        namespace: openshift-etcd
        annotations:
          target.workload.openshift.io/management: '{"effect": "PreferredDuringScheduling"}'
        labels:
          app: etcd
          k8s-app: etcd
          etcd: "true"
          revision: "REVISION"
      spec:
        initContainers:
          - name: setup
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                echo -n "Fixing etcd log permissions."
                chmod 0700 /var/log/etcd && touch /var/log/etcd/etcd-health-probe.log && chmod 0600 /var/log/etcd/*
            securityContext:
              privileged: true
            resources:
              requests:
                memory: 50Mi
                cpu: 5m
            volumeMounts:
              - mountPath: /var/log/etcd
                name: log-dir
          - name: etcd-ensure-env-vars
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                set -euo pipefail

                : "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST?not set}"
                : "${NODE_NODE_ENVVAR_NAME_ETCD_NAME?not set}"
                : "${NODE_NODE_ENVVAR_NAME_IP?not set}"

                # check for ipv4 addresses as well as ipv6 addresses with extra square brackets
                if [[ "${NODE_NODE_ENVVAR_NAME_IP}" != "${NODE_IP}" && "${NODE_NODE_ENVVAR_NAME_IP}" != "[${NODE_IP}]" ]]; then
                  # echo the error message to stderr
                  echo "Expected node IP to be ${NODE_IP} got ${NODE_NODE_ENVVAR_NAME_IP}" >&2
                  exit 1
                fi

                # check for ipv4 addresses as well as ipv6 addresses with extra square brackets
                if [[ "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" != "${NODE_IP}" && "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" != "[${NODE_IP}]" ]]; then
                  # echo the error message to stderr
                  echo "Expected etcd url host to be ${NODE_IP} got ${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" >&2
                  exit 1
                fi

            resources:
              requests:
                memory: 60Mi
                cpu: 10m
            securityContext:
              privileged: true
            env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: ""
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
          - name: etcd-resources-copy
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                set -euo pipefail

                rm -f $(grep -l '^### Created by cluster-etcd-operator' /usr/local/bin/*)
                cp -p /etc/kubernetes/static-pod-certs/configmaps/etcd-scripts/*.sh /usr/local/bin

            resources:
              requests:
                memory: 60Mi
                cpu: 10m
            securityContext:
              privileged: true
            volumeMounts:
              - mountPath: /etc/kubernetes/static-pod-resources
                name: resource-dir
              - mountPath: /etc/kubernetes/static-pod-certs
                name: cert-dir
              - mountPath: /usr/local/bin
                name: usr-local-bin
        containers:
        # The etcdctl container should always be first. It is intended to be used
        # to open a remote shell via `oc rsh` that is ready to run `etcdctl`.
        - name: etcdctl
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - "/bin/bash"
            - "-c"
            - "trap TERM INT; sleep infinity & wait"
          resources:
            requests:
              memory: 60Mi
              cpu: 10m
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: ""
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
        - name: etcd
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              etcdctl member list || true

              # this has a non-zero return code if the command is non-zero.  If you use an export first, it doesn't and you
              # will succeed when you should fail.
              ETCD_INITIAL_CLUSTER=$(discover-etcd-initial-cluster \
                --cacert=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --cert=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --key=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --endpoints=${ALL_ETCD_ENDPOINTS} \
                --data-dir=/var/lib/etcd \
                --target-peer-url-host=${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST} \
                --target-name=NODE_NAME)
              export ETCD_INITIAL_CLUSTER

              # we cannot use the "normal" port conflict initcontainer because when we upgrade, the existing static pod will never yield,
              # so we do the detection in etcd container itself.
              echo -n "Waiting for ports 2379, 2380 and 9978 to be released."
              time while [ -n "$(ss -Htan '( sport = 2379 or sport = 2380 or sport = 9978 )')" ]; do
                echo -n "."
                sleep 1
              done

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}
              env | grep ETCD | grep -v NODE

              set -x
              # See https://etcd.io/docs/v3.4.0/tuning/ for why we use ionice
              exec ionice -c2 -n0 etcd \
                --logger=zap \
                --log-level=info \
                --experimental-initial-corrupt-check=true \
                --initial-advertise-peer-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2380 \
                --cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.crt \
                --key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.key \
                --trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --client-cert-auth=true \
                --peer-cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --peer-key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --peer-trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --peer-client-cert-auth=true \
                --advertise-client-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2379 \
                --listen-client-urls=https://0.0.0.0:2379,unixs://${NODE_NODE_ENVVAR_NAME_IP}:0 \
                --listen-peer-urls=https://0.0.0.0:2380 \
                --metrics=extensive \
                --listen-metrics-urls=https://0.0.0.0:9978 ||  mv /etc/kubernetes/etcd-backup-dir/etcd-member.yaml /etc/kubernetes/manifests
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: ""
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
          resources:
            requests:
              memory: 600Mi
              cpu: 300m
          readinessProbe:
            exec:
              command:
              - /bin/bash
              - -c
              - |
                set -xe

                # Unix sockets are used for health checks to ensure that the pod is reporting readiness of the etcd process
                # in this container. While this might seem unnecessary the use of SO_REUSEADDR has made this explicitly
                # required as the kernel will allow the reuse of a port while in TIME_WAIT. etcd requires socket
                # path in this format <name>:<port> so port 0 is used only to meet this requirement.
                unset ETCDCTL_ENDPOINTS
                /usr/bin/etcdctl \
                  --command-timeout=2s \
                  --dial-timeout=2s \
                  --endpoints=unixs://${NODE_NODE_ENVVAR_NAME_IP}:0 \
                  endpoint health -w json | grep \"health\":true
            failureThreshold: 3
            initialDelaySeconds: 3
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 5
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
        - name: etcd-metrics
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}

              exec etcd grpc-proxy start \
                --endpoints https://${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}:9978 \
                --metrics-addr https://0.0.0.0:9979 \
                --listen-addr 127.0.0.1:9977 \
                --key /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --key-file /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-metrics-NODE_NAME.key \
                --cert /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --cert-file /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-metrics-NODE_NAME.crt \
                --cacert /etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --trusted-ca-file /etc/kubernetes/static-pod-certs/configmaps/etcd-metrics-proxy-serving-ca/ca-bundle.crt
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: ""
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
          resources:
            requests:
              memory: 200Mi
              cpu: 40m
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
        - name: etcd-health-monitor
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:f161673930ffcc897e097257b86f2452eccb61aeca0fc95c2989371b796e275d
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command: [ "cluster-etcd-operator", "monitor" ]
          args:
            - --targets=$(ETCDCTL_ENDPOINTS)
            - --probe-interval=1s
            - --log-outputs=stderr
            - --log-outputs=/var/log/etcd/etcd-health-probe.log
            - --enable-log-rotation
            - --pod-name=$(POD_NAME)
            - --static-pod-version=$(ETCD_STATIC_POD_VERSION)
            - --cert-file=$(ETCDCTL_CERT)
            - --key-file=$(ETCDCTL_KEY)
            - --cacert-file=$(ETCDCTL_CACERT)
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: ""
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
            - name: "OPENSHIFT_PROFILE"
              value: "web"
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
          volumeMounts:
            - mountPath: /var/log/etcd/
              name: log-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
          resources:
            requests:
              memory: 70Mi
              cpu: 50m
        hostNetwork: true
        priorityClassName: system-node-critical
        tolerations:
        - operator: "Exists"
        volumes:
          - hostPath:
              path: /etc/kubernetes/manifests
            name: static-pod-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-pod-REVISION
            name: resource-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-certs
            name: cert-dir
          - hostPath:
              path: /var/lib/etcd
              type: ""
            name: data-dir
          - hostPath:
              path: /usr/local/bin
            name: usr-local-bin
          - hostPath:
              path: /var/log/etcd
            name: log-dir
    version: 4.10.0-202204290637.p0.g9790f8d.assembly.stream-9790f8d
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:08:33Z"
    name: etcd-pod-2
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-2
      uid: e70a5166-7f2e-4820-a56b-351d4fce63e9
    resourceVersion: "7511"
    uid: d9d0999a-b3ec-4df7-8441-f07529d676cb
- apiVersion: v1
  data:
    forceRedeploymentReason: ""
    pod.yaml: |
      apiVersion: v1
      kind: Pod
      metadata:
        name: etcd
        namespace: openshift-etcd
        annotations:
          target.workload.openshift.io/management: '{"effect": "PreferredDuringScheduling"}'
        labels:
          app: etcd
          k8s-app: etcd
          etcd: "true"
          revision: "REVISION"
      spec:
        initContainers:
          - name: setup
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                echo -n "Fixing etcd log permissions."
                chmod 0700 /var/log/etcd && touch /var/log/etcd/etcd-health-probe.log && chmod 0600 /var/log/etcd/*
            securityContext:
              privileged: true
            resources:
              requests:
                memory: 50Mi
                cpu: 5m
            volumeMounts:
              - mountPath: /var/log/etcd
                name: log-dir
          - name: etcd-ensure-env-vars
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                set -euo pipefail

                : "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST?not set}"
                : "${NODE_NODE_ENVVAR_NAME_ETCD_NAME?not set}"
                : "${NODE_NODE_ENVVAR_NAME_IP?not set}"

                # check for ipv4 addresses as well as ipv6 addresses with extra square brackets
                if [[ "${NODE_NODE_ENVVAR_NAME_IP}" != "${NODE_IP}" && "${NODE_NODE_ENVVAR_NAME_IP}" != "[${NODE_IP}]" ]]; then
                  # echo the error message to stderr
                  echo "Expected node IP to be ${NODE_IP} got ${NODE_NODE_ENVVAR_NAME_IP}" >&2
                  exit 1
                fi

                # check for ipv4 addresses as well as ipv6 addresses with extra square brackets
                if [[ "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" != "${NODE_IP}" && "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" != "[${NODE_IP}]" ]]; then
                  # echo the error message to stderr
                  echo "Expected etcd url host to be ${NODE_IP} got ${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" >&2
                  exit 1
                fi

            resources:
              requests:
                memory: 60Mi
                cpu: 10m
            securityContext:
              privileged: true
            env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.149.121:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.149.121:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
          - name: etcd-resources-copy
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                set -euo pipefail

                rm -f $(grep -l '^### Created by cluster-etcd-operator' /usr/local/bin/*)
                cp -p /etc/kubernetes/static-pod-certs/configmaps/etcd-scripts/*.sh /usr/local/bin

            resources:
              requests:
                memory: 60Mi
                cpu: 10m
            securityContext:
              privileged: true
            volumeMounts:
              - mountPath: /etc/kubernetes/static-pod-resources
                name: resource-dir
              - mountPath: /etc/kubernetes/static-pod-certs
                name: cert-dir
              - mountPath: /usr/local/bin
                name: usr-local-bin
        containers:
        # The etcdctl container should always be first. It is intended to be used
        # to open a remote shell via `oc rsh` that is ready to run `etcdctl`.
        - name: etcdctl
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - "/bin/bash"
            - "-c"
            - "trap TERM INT; sleep infinity & wait"
          resources:
            requests:
              memory: 60Mi
              cpu: 10m
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.149.121:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.149.121:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
        - name: etcd
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              etcdctl member list || true

              # this has a non-zero return code if the command is non-zero.  If you use an export first, it doesn't and you
              # will succeed when you should fail.
              ETCD_INITIAL_CLUSTER=$(discover-etcd-initial-cluster \
                --cacert=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --cert=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --key=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --endpoints=${ALL_ETCD_ENDPOINTS} \
                --data-dir=/var/lib/etcd \
                --target-peer-url-host=${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST} \
                --target-name=NODE_NAME)
              export ETCD_INITIAL_CLUSTER

              # we cannot use the "normal" port conflict initcontainer because when we upgrade, the existing static pod will never yield,
              # so we do the detection in etcd container itself.
              echo -n "Waiting for ports 2379, 2380 and 9978 to be released."
              time while [ -n "$(ss -Htan '( sport = 2379 or sport = 2380 or sport = 9978 )')" ]; do
                echo -n "."
                sleep 1
              done

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}
              env | grep ETCD | grep -v NODE

              set -x
              # See https://etcd.io/docs/v3.4.0/tuning/ for why we use ionice
              exec ionice -c2 -n0 etcd \
                --logger=zap \
                --log-level=info \
                --experimental-initial-corrupt-check=true \
                --initial-advertise-peer-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2380 \
                --cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.crt \
                --key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.key \
                --trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --client-cert-auth=true \
                --peer-cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --peer-key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --peer-trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --peer-client-cert-auth=true \
                --advertise-client-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2379 \
                --listen-client-urls=https://0.0.0.0:2379,unixs://${NODE_NODE_ENVVAR_NAME_IP}:0 \
                --listen-peer-urls=https://0.0.0.0:2380 \
                --metrics=extensive \
                --listen-metrics-urls=https://0.0.0.0:9978 ||  mv /etc/kubernetes/etcd-backup-dir/etcd-member.yaml /etc/kubernetes/manifests
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.149.121:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.149.121:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
          resources:
            requests:
              memory: 600Mi
              cpu: 300m
          readinessProbe:
            exec:
              command:
              - /bin/bash
              - -c
              - |
                set -xe

                # Unix sockets are used for health checks to ensure that the pod is reporting readiness of the etcd process
                # in this container. While this might seem unnecessary the use of SO_REUSEADDR has made this explicitly
                # required as the kernel will allow the reuse of a port while in TIME_WAIT. etcd requires socket
                # path in this format <name>:<port> so port 0 is used only to meet this requirement.
                unset ETCDCTL_ENDPOINTS
                /usr/bin/etcdctl \
                  --command-timeout=2s \
                  --dial-timeout=2s \
                  --endpoints=unixs://${NODE_NODE_ENVVAR_NAME_IP}:0 \
                  endpoint health -w json | grep \"health\":true
            failureThreshold: 3
            initialDelaySeconds: 3
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 5
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
        - name: etcd-metrics
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}

              exec etcd grpc-proxy start \
                --endpoints https://${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}:9978 \
                --metrics-addr https://0.0.0.0:9979 \
                --listen-addr 127.0.0.1:9977 \
                --key /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --key-file /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-metrics-NODE_NAME.key \
                --cert /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --cert-file /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-metrics-NODE_NAME.crt \
                --cacert /etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --trusted-ca-file /etc/kubernetes/static-pod-certs/configmaps/etcd-metrics-proxy-serving-ca/ca-bundle.crt
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.149.121:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.149.121:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
          resources:
            requests:
              memory: 200Mi
              cpu: 40m
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
        - name: etcd-health-monitor
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:f161673930ffcc897e097257b86f2452eccb61aeca0fc95c2989371b796e275d
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command: [ "cluster-etcd-operator", "monitor" ]
          args:
            - --targets=$(ETCDCTL_ENDPOINTS)
            - --probe-interval=1s
            - --log-outputs=stderr
            - --log-outputs=/var/log/etcd/etcd-health-probe.log
            - --enable-log-rotation
            - --pod-name=$(POD_NAME)
            - --static-pod-version=$(ETCD_STATIC_POD_VERSION)
            - --cert-file=$(ETCDCTL_CERT)
            - --key-file=$(ETCDCTL_KEY)
            - --cacert-file=$(ETCDCTL_CACERT)
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.149.121:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.149.121:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
            - name: "OPENSHIFT_PROFILE"
              value: "web"
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
          volumeMounts:
            - mountPath: /var/log/etcd/
              name: log-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
          resources:
            requests:
              memory: 70Mi
              cpu: 50m
        hostNetwork: true
        priorityClassName: system-node-critical
        tolerations:
        - operator: "Exists"
        volumes:
          - hostPath:
              path: /etc/kubernetes/manifests
            name: static-pod-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-pod-REVISION
            name: resource-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-certs
            name: cert-dir
          - hostPath:
              path: /var/lib/etcd
              type: ""
            name: data-dir
          - hostPath:
              path: /usr/local/bin
            name: usr-local-bin
          - hostPath:
              path: /var/log/etcd
            name: log-dir
    version: 4.10.0-202204290637.p0.g9790f8d.assembly.stream-9790f8d
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:09:45Z"
    name: etcd-pod-3
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-3
      uid: b7bb0d7a-0881-41ee-add2-913f7ab66104
    resourceVersion: "10245"
    uid: 22ed3526-6c6d-478d-950c-600ca2fe7790
- apiVersion: v1
  data:
    forceRedeploymentReason: ""
    pod.yaml: |
      apiVersion: v1
      kind: Pod
      metadata:
        name: etcd
        namespace: openshift-etcd
        annotations:
          target.workload.openshift.io/management: '{"effect": "PreferredDuringScheduling"}'
        labels:
          app: etcd
          k8s-app: etcd
          etcd: "true"
          revision: "REVISION"
      spec:
        initContainers:
          - name: setup
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                echo -n "Fixing etcd log permissions."
                chmod 0700 /var/log/etcd && touch /var/log/etcd/etcd-health-probe.log && chmod 0600 /var/log/etcd/*
            securityContext:
              privileged: true
            resources:
              requests:
                memory: 50Mi
                cpu: 5m
            volumeMounts:
              - mountPath: /var/log/etcd
                name: log-dir
          - name: etcd-ensure-env-vars
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                set -euo pipefail

                : "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST?not set}"
                : "${NODE_NODE_ENVVAR_NAME_ETCD_NAME?not set}"
                : "${NODE_NODE_ENVVAR_NAME_IP?not set}"

                # check for ipv4 addresses as well as ipv6 addresses with extra square brackets
                if [[ "${NODE_NODE_ENVVAR_NAME_IP}" != "${NODE_IP}" && "${NODE_NODE_ENVVAR_NAME_IP}" != "[${NODE_IP}]" ]]; then
                  # echo the error message to stderr
                  echo "Expected node IP to be ${NODE_IP} got ${NODE_NODE_ENVVAR_NAME_IP}" >&2
                  exit 1
                fi

                # check for ipv4 addresses as well as ipv6 addresses with extra square brackets
                if [[ "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" != "${NODE_IP}" && "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" != "[${NODE_IP}]" ]]; then
                  # echo the error message to stderr
                  echo "Expected etcd url host to be ${NODE_IP} got ${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" >&2
                  exit 1
                fi

            resources:
              requests:
                memory: 60Mi
                cpu: 10m
            securityContext:
              privileged: true
            env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
          - name: etcd-resources-copy
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                set -euo pipefail

                rm -f $(grep -l '^### Created by cluster-etcd-operator' /usr/local/bin/*)
                cp -p /etc/kubernetes/static-pod-certs/configmaps/etcd-scripts/*.sh /usr/local/bin

            resources:
              requests:
                memory: 60Mi
                cpu: 10m
            securityContext:
              privileged: true
            volumeMounts:
              - mountPath: /etc/kubernetes/static-pod-resources
                name: resource-dir
              - mountPath: /etc/kubernetes/static-pod-certs
                name: cert-dir
              - mountPath: /usr/local/bin
                name: usr-local-bin
        containers:
        # The etcdctl container should always be first. It is intended to be used
        # to open a remote shell via `oc rsh` that is ready to run `etcdctl`.
        - name: etcdctl
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - "/bin/bash"
            - "-c"
            - "trap TERM INT; sleep infinity & wait"
          resources:
            requests:
              memory: 60Mi
              cpu: 10m
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
        - name: etcd
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              etcdctl member list || true

              # this has a non-zero return code if the command is non-zero.  If you use an export first, it doesn't and you
              # will succeed when you should fail.
              ETCD_INITIAL_CLUSTER=$(discover-etcd-initial-cluster \
                --cacert=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --cert=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --key=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --endpoints=${ALL_ETCD_ENDPOINTS} \
                --data-dir=/var/lib/etcd \
                --target-peer-url-host=${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST} \
                --target-name=NODE_NAME)
              export ETCD_INITIAL_CLUSTER

              # we cannot use the "normal" port conflict initcontainer because when we upgrade, the existing static pod will never yield,
              # so we do the detection in etcd container itself.
              echo -n "Waiting for ports 2379, 2380 and 9978 to be released."
              time while [ -n "$(ss -Htan '( sport = 2379 or sport = 2380 or sport = 9978 )')" ]; do
                echo -n "."
                sleep 1
              done

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}
              env | grep ETCD | grep -v NODE

              set -x
              # See https://etcd.io/docs/v3.4.0/tuning/ for why we use ionice
              exec ionice -c2 -n0 etcd \
                --logger=zap \
                --log-level=info \
                --experimental-initial-corrupt-check=true \
                --initial-advertise-peer-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2380 \
                --cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.crt \
                --key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.key \
                --trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --client-cert-auth=true \
                --peer-cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --peer-key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --peer-trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --peer-client-cert-auth=true \
                --advertise-client-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2379 \
                --listen-client-urls=https://0.0.0.0:2379,unixs://${NODE_NODE_ENVVAR_NAME_IP}:0 \
                --listen-peer-urls=https://0.0.0.0:2380 \
                --metrics=extensive \
                --listen-metrics-urls=https://0.0.0.0:9978 ||  mv /etc/kubernetes/etcd-backup-dir/etcd-member.yaml /etc/kubernetes/manifests
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
          resources:
            requests:
              memory: 600Mi
              cpu: 300m
          readinessProbe:
            exec:
              command:
              - /bin/bash
              - -c
              - |
                set -xe

                # Unix sockets are used for health checks to ensure that the pod is reporting readiness of the etcd process
                # in this container. While this might seem unnecessary the use of SO_REUSEADDR has made this explicitly
                # required as the kernel will allow the reuse of a port while in TIME_WAIT. etcd requires socket
                # path in this format <name>:<port> so port 0 is used only to meet this requirement.
                unset ETCDCTL_ENDPOINTS
                /usr/bin/etcdctl \
                  --command-timeout=2s \
                  --dial-timeout=2s \
                  --endpoints=unixs://${NODE_NODE_ENVVAR_NAME_IP}:0 \
                  endpoint health -w json | grep \"health\":true
            failureThreshold: 3
            initialDelaySeconds: 3
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 5
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
        - name: etcd-metrics
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}

              exec etcd grpc-proxy start \
                --endpoints https://${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}:9978 \
                --metrics-addr https://0.0.0.0:9979 \
                --listen-addr 127.0.0.1:9977 \
                --key /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --key-file /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-metrics-NODE_NAME.key \
                --cert /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --cert-file /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-metrics-NODE_NAME.crt \
                --cacert /etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --trusted-ca-file /etc/kubernetes/static-pod-certs/configmaps/etcd-metrics-proxy-serving-ca/ca-bundle.crt
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
          resources:
            requests:
              memory: 200Mi
              cpu: 40m
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
        - name: etcd-health-monitor
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:f161673930ffcc897e097257b86f2452eccb61aeca0fc95c2989371b796e275d
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command: [ "cluster-etcd-operator", "monitor" ]
          args:
            - --targets=$(ETCDCTL_ENDPOINTS)
            - --probe-interval=1s
            - --log-outputs=stderr
            - --log-outputs=/var/log/etcd/etcd-health-probe.log
            - --enable-log-rotation
            - --pod-name=$(POD_NAME)
            - --static-pod-version=$(ETCD_STATIC_POD_VERSION)
            - --cert-file=$(ETCDCTL_CERT)
            - --key-file=$(ETCDCTL_KEY)
            - --cacert-file=$(ETCDCTL_CACERT)
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
            - name: "OPENSHIFT_PROFILE"
              value: "web"
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
          volumeMounts:
            - mountPath: /var/log/etcd/
              name: log-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
          resources:
            requests:
              memory: 70Mi
              cpu: 50m
        hostNetwork: true
        priorityClassName: system-node-critical
        tolerations:
        - operator: "Exists"
        volumes:
          - hostPath:
              path: /etc/kubernetes/manifests
            name: static-pod-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-pod-REVISION
            name: resource-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-certs
            name: cert-dir
          - hostPath:
              path: /var/lib/etcd
              type: ""
            name: data-dir
          - hostPath:
              path: /usr/local/bin
            name: usr-local-bin
          - hostPath:
              path: /var/log/etcd
            name: log-dir
    version: 4.10.0-202204290637.p0.g9790f8d.assembly.stream-9790f8d
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:11:21Z"
    name: etcd-pod-4
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-4
      uid: 23a503bb-17b1-4769-ae19-e6085e21ec01
    resourceVersion: "12392"
    uid: 0b7da7ec-0acb-4d40-8525-904e07350bc6
- apiVersion: v1
  data:
    forceRedeploymentReason: ""
    pod.yaml: |
      apiVersion: v1
      kind: Pod
      metadata:
        name: etcd
        namespace: openshift-etcd
        annotations:
          target.workload.openshift.io/management: '{"effect": "PreferredDuringScheduling"}'
        labels:
          app: etcd
          k8s-app: etcd
          etcd: "true"
          revision: "REVISION"
      spec:
        initContainers:
          - name: setup
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                echo -n "Fixing etcd log permissions."
                chmod 0700 /var/log/etcd && touch /var/log/etcd/etcd-health-probe.log && chmod 0600 /var/log/etcd/*
            securityContext:
              privileged: true
            resources:
              requests:
                memory: 50Mi
                cpu: 5m
            volumeMounts:
              - mountPath: /var/log/etcd
                name: log-dir
          - name: etcd-ensure-env-vars
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                set -euo pipefail

                : "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST?not set}"
                : "${NODE_NODE_ENVVAR_NAME_ETCD_NAME?not set}"
                : "${NODE_NODE_ENVVAR_NAME_IP?not set}"

                # check for ipv4 addresses as well as ipv6 addresses with extra square brackets
                if [[ "${NODE_NODE_ENVVAR_NAME_IP}" != "${NODE_IP}" && "${NODE_NODE_ENVVAR_NAME_IP}" != "[${NODE_IP}]" ]]; then
                  # echo the error message to stderr
                  echo "Expected node IP to be ${NODE_IP} got ${NODE_NODE_ENVVAR_NAME_IP}" >&2
                  exit 1
                fi

                # check for ipv4 addresses as well as ipv6 addresses with extra square brackets
                if [[ "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" != "${NODE_IP}" && "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" != "[${NODE_IP}]" ]]; then
                  # echo the error message to stderr
                  echo "Expected etcd url host to be ${NODE_IP} got ${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" >&2
                  exit 1
                fi

            resources:
              requests:
                memory: 60Mi
                cpu: 10m
            securityContext:
              privileged: true
            env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
          - name: etcd-resources-copy
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                set -euo pipefail

                rm -f $(grep -l '^### Created by cluster-etcd-operator' /usr/local/bin/*)
                cp -p /etc/kubernetes/static-pod-certs/configmaps/etcd-scripts/*.sh /usr/local/bin

            resources:
              requests:
                memory: 60Mi
                cpu: 10m
            securityContext:
              privileged: true
            volumeMounts:
              - mountPath: /etc/kubernetes/static-pod-resources
                name: resource-dir
              - mountPath: /etc/kubernetes/static-pod-certs
                name: cert-dir
              - mountPath: /usr/local/bin
                name: usr-local-bin
        containers:
        # The etcdctl container should always be first. It is intended to be used
        # to open a remote shell via `oc rsh` that is ready to run `etcdctl`.
        - name: etcdctl
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - "/bin/bash"
            - "-c"
            - "trap TERM INT; sleep infinity & wait"
          resources:
            requests:
              memory: 60Mi
              cpu: 10m
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
        - name: etcd
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              etcdctl member list || true

              # this has a non-zero return code if the command is non-zero.  If you use an export first, it doesn't and you
              # will succeed when you should fail.
              ETCD_INITIAL_CLUSTER=$(discover-etcd-initial-cluster \
                --cacert=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --cert=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --key=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --endpoints=${ALL_ETCD_ENDPOINTS} \
                --data-dir=/var/lib/etcd \
                --target-peer-url-host=${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST} \
                --target-name=NODE_NAME)
              export ETCD_INITIAL_CLUSTER

              # we cannot use the "normal" port conflict initcontainer because when we upgrade, the existing static pod will never yield,
              # so we do the detection in etcd container itself.
              echo -n "Waiting for ports 2379, 2380 and 9978 to be released."
              time while [ -n "$(ss -Htan '( sport = 2379 or sport = 2380 or sport = 9978 )')" ]; do
                echo -n "."
                sleep 1
              done

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}
              env | grep ETCD | grep -v NODE

              set -x
              # See https://etcd.io/docs/v3.4.0/tuning/ for why we use ionice
              exec ionice -c2 -n0 etcd \
                --logger=zap \
                --log-level=info \
                --experimental-initial-corrupt-check=true \
                --initial-advertise-peer-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2380 \
                --cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.crt \
                --key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.key \
                --trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --client-cert-auth=true \
                --peer-cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --peer-key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --peer-trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --peer-client-cert-auth=true \
                --advertise-client-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2379 \
                --listen-client-urls=https://0.0.0.0:2379,unixs://${NODE_NODE_ENVVAR_NAME_IP}:0 \
                --listen-peer-urls=https://0.0.0.0:2380 \
                --metrics=extensive \
                --listen-metrics-urls=https://0.0.0.0:9978 ||  mv /etc/kubernetes/etcd-backup-dir/etcd-member.yaml /etc/kubernetes/manifests
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
          resources:
            requests:
              memory: 600Mi
              cpu: 300m
          readinessProbe:
            exec:
              command:
              - /bin/bash
              - -c
              - |
                set -xe

                # Unix sockets are used for health checks to ensure that the pod is reporting readiness of the etcd process
                # in this container. While this might seem unnecessary the use of SO_REUSEADDR has made this explicitly
                # required as the kernel will allow the reuse of a port while in TIME_WAIT. etcd requires socket
                # path in this format <name>:<port> so port 0 is used only to meet this requirement.
                unset ETCDCTL_ENDPOINTS
                /usr/bin/etcdctl \
                  --command-timeout=2s \
                  --dial-timeout=2s \
                  --endpoints=unixs://${NODE_NODE_ENVVAR_NAME_IP}:0 \
                  endpoint health -w json | grep \"health\":true
            failureThreshold: 3
            initialDelaySeconds: 3
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 5
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
        - name: etcd-metrics
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}

              exec etcd grpc-proxy start \
                --endpoints https://${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}:9978 \
                --metrics-addr https://0.0.0.0:9979 \
                --listen-addr 127.0.0.1:9977 \
                --key /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --key-file /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-metrics-NODE_NAME.key \
                --cert /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --cert-file /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-metrics-NODE_NAME.crt \
                --cacert /etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --trusted-ca-file /etc/kubernetes/static-pod-certs/configmaps/etcd-metrics-proxy-serving-ca/ca-bundle.crt
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
          resources:
            requests:
              memory: 200Mi
              cpu: 40m
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
        - name: etcd-health-monitor
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:f161673930ffcc897e097257b86f2452eccb61aeca0fc95c2989371b796e275d
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command: [ "cluster-etcd-operator", "monitor" ]
          args:
            - --targets=$(ETCDCTL_ENDPOINTS)
            - --probe-interval=1s
            - --log-outputs=stderr
            - --log-outputs=/var/log/etcd/etcd-health-probe.log
            - --enable-log-rotation
            - --pod-name=$(POD_NAME)
            - --static-pod-version=$(ETCD_STATIC_POD_VERSION)
            - --cert-file=$(ETCDCTL_CERT)
            - --key-file=$(ETCDCTL_KEY)
            - --cacert-file=$(ETCDCTL_CACERT)
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379,https://10.0.5.224:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
            - name: "OPENSHIFT_PROFILE"
              value: "web"
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
          volumeMounts:
            - mountPath: /var/log/etcd/
              name: log-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
          resources:
            requests:
              memory: 70Mi
              cpu: 50m
        hostNetwork: true
        priorityClassName: system-node-critical
        tolerations:
        - operator: "Exists"
        volumes:
          - hostPath:
              path: /etc/kubernetes/manifests
            name: static-pod-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-pod-REVISION
            name: resource-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-certs
            name: cert-dir
          - hostPath:
              path: /var/lib/etcd
              type: ""
            name: data-dir
          - hostPath:
              path: /usr/local/bin
            name: usr-local-bin
          - hostPath:
              path: /var/log/etcd
            name: log-dir
    version: 4.10.0-202204290637.p0.g9790f8d.assembly.stream-9790f8d
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:12:49Z"
    name: etcd-pod-5
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-5
      uid: a38c6f1a-987b-4095-aa50-5dcb10e1bf90
    resourceVersion: "15218"
    uid: ff1dacc9-2147-4050-8ded-4d4813ff4b05
- apiVersion: v1
  data:
    forceRedeploymentReason: ""
    pod.yaml: |
      apiVersion: v1
      kind: Pod
      metadata:
        name: etcd
        namespace: openshift-etcd
        annotations:
          target.workload.openshift.io/management: '{"effect": "PreferredDuringScheduling"}'
        labels:
          app: etcd
          k8s-app: etcd
          etcd: "true"
          revision: "REVISION"
      spec:
        initContainers:
          - name: setup
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                echo -n "Fixing etcd log permissions."
                chmod 0700 /var/log/etcd && touch /var/log/etcd/etcd-health-probe.log && chmod 0600 /var/log/etcd/*
            securityContext:
              privileged: true
            resources:
              requests:
                memory: 50Mi
                cpu: 5m
            volumeMounts:
              - mountPath: /var/log/etcd
                name: log-dir
          - name: etcd-ensure-env-vars
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                set -euo pipefail

                : "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST?not set}"
                : "${NODE_NODE_ENVVAR_NAME_ETCD_NAME?not set}"
                : "${NODE_NODE_ENVVAR_NAME_IP?not set}"

                # check for ipv4 addresses as well as ipv6 addresses with extra square brackets
                if [[ "${NODE_NODE_ENVVAR_NAME_IP}" != "${NODE_IP}" && "${NODE_NODE_ENVVAR_NAME_IP}" != "[${NODE_IP}]" ]]; then
                  # echo the error message to stderr
                  echo "Expected node IP to be ${NODE_IP} got ${NODE_NODE_ENVVAR_NAME_IP}" >&2
                  exit 1
                fi

                # check for ipv4 addresses as well as ipv6 addresses with extra square brackets
                if [[ "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" != "${NODE_IP}" && "${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" != "[${NODE_IP}]" ]]; then
                  # echo the error message to stderr
                  echo "Expected etcd url host to be ${NODE_IP} got ${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}" >&2
                  exit 1
                fi

            resources:
              requests:
                memory: 60Mi
                cpu: 10m
            securityContext:
              privileged: true
            env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: NODE_IP
              valueFrom:
                fieldRef:
                  fieldPath: status.podIP
          - name: etcd-resources-copy
            image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
            imagePullPolicy: IfNotPresent
            terminationMessagePolicy: FallbackToLogsOnError
            command:
              - /bin/sh
              - -c
              - |
                #!/bin/sh
                set -euo pipefail

                rm -f $(grep -l '^### Created by cluster-etcd-operator' /usr/local/bin/*)
                cp -p /etc/kubernetes/static-pod-certs/configmaps/etcd-scripts/*.sh /usr/local/bin

            resources:
              requests:
                memory: 60Mi
                cpu: 10m
            securityContext:
              privileged: true
            volumeMounts:
              - mountPath: /etc/kubernetes/static-pod-resources
                name: resource-dir
              - mountPath: /etc/kubernetes/static-pod-certs
                name: cert-dir
              - mountPath: /usr/local/bin
                name: usr-local-bin
        containers:
        # The etcdctl container should always be first. It is intended to be used
        # to open a remote shell via `oc rsh` that is ready to run `etcdctl`.
        - name: etcdctl
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - "/bin/bash"
            - "-c"
            - "trap TERM INT; sleep infinity & wait"
          resources:
            requests:
              memory: 60Mi
              cpu: 10m
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
        - name: etcd
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              etcdctl member list || true

              # this has a non-zero return code if the command is non-zero.  If you use an export first, it doesn't and you
              # will succeed when you should fail.
              ETCD_INITIAL_CLUSTER=$(discover-etcd-initial-cluster \
                --cacert=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --cert=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --key=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --endpoints=${ALL_ETCD_ENDPOINTS} \
                --data-dir=/var/lib/etcd \
                --target-peer-url-host=${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST} \
                --target-name=NODE_NAME)
              export ETCD_INITIAL_CLUSTER

              # we cannot use the "normal" port conflict initcontainer because when we upgrade, the existing static pod will never yield,
              # so we do the detection in etcd container itself.
              echo -n "Waiting for ports 2379, 2380 and 9978 to be released."
              time while [ -n "$(ss -Htan '( sport = 2379 or sport = 2380 or sport = 9978 )')" ]; do
                echo -n "."
                sleep 1
              done

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}
              env | grep ETCD | grep -v NODE

              set -x
              # See https://etcd.io/docs/v3.4.0/tuning/ for why we use ionice
              exec ionice -c2 -n0 etcd \
                --logger=zap \
                --log-level=info \
                --experimental-initial-corrupt-check=true \
                --initial-advertise-peer-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2380 \
                --cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.crt \
                --key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.key \
                --trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --client-cert-auth=true \
                --peer-cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --peer-key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --peer-trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --peer-client-cert-auth=true \
                --advertise-client-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2379 \
                --listen-client-urls=https://0.0.0.0:2379,unixs://${NODE_NODE_ENVVAR_NAME_IP}:0 \
                --listen-peer-urls=https://0.0.0.0:2380 \
                --metrics=extensive \
                --listen-metrics-urls=https://0.0.0.0:9978 ||  mv /etc/kubernetes/etcd-backup-dir/etcd-member.yaml /etc/kubernetes/manifests
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
          resources:
            requests:
              memory: 600Mi
              cpu: 300m
          readinessProbe:
            exec:
              command:
              - /bin/bash
              - -c
              - |
                set -xe

                # Unix sockets are used for health checks to ensure that the pod is reporting readiness of the etcd process
                # in this container. While this might seem unnecessary the use of SO_REUSEADDR has made this explicitly
                # required as the kernel will allow the reuse of a port while in TIME_WAIT. etcd requires socket
                # path in this format <name>:<port> so port 0 is used only to meet this requirement.
                unset ETCDCTL_ENDPOINTS
                /usr/bin/etcdctl \
                  --command-timeout=2s \
                  --dial-timeout=2s \
                  --endpoints=unixs://${NODE_NODE_ENVVAR_NAME_IP}:0 \
                  endpoint health -w json | grep \"health\":true
            failureThreshold: 3
            initialDelaySeconds: 3
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 5
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
        - name: etcd-metrics
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}

              exec etcd grpc-proxy start \
                --endpoints https://${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}:9978 \
                --metrics-addr https://0.0.0.0:9979 \
                --listen-addr 127.0.0.1:9977 \
                --key /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --key-file /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-metrics-NODE_NAME.key \
                --cert /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --cert-file /etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-metrics-NODE_NAME.crt \
                --cacert /etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --trusted-ca-file /etc/kubernetes/static-pod-certs/configmaps/etcd-metrics-proxy-serving-ca/ca-bundle.crt
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
          resources:
            requests:
              memory: 200Mi
              cpu: 40m
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/static-pod-resources
              name: resource-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
        - name: etcd-health-monitor
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:f161673930ffcc897e097257b86f2452eccb61aeca0fc95c2989371b796e275d
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command: [ "cluster-etcd-operator", "monitor" ]
          args:
            - --targets=$(ETCDCTL_ENDPOINTS)
            - --probe-interval=1s
            - --log-outputs=stderr
            - --log-outputs=/var/log/etcd/etcd-health-probe.log
            - --enable-log-rotation
            - --pod-name=$(POD_NAME)
            - --static-pod-version=$(ETCD_STATIC_POD_VERSION)
            - --cert-file=$(ETCDCTL_CERT)
            - --key-file=$(ETCDCTL_KEY)
            - --cacert-file=$(ETCDCTL_CACERT)
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_VERSION"
              value: "REVISION"
            - name: "OPENSHIFT_PROFILE"
              value: "web"
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
          volumeMounts:
            - mountPath: /var/log/etcd/
              name: log-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
          resources:
            requests:
              memory: 70Mi
              cpu: 50m
        hostNetwork: true
        priorityClassName: system-node-critical
        tolerations:
        - operator: "Exists"
        volumes:
          - hostPath:
              path: /etc/kubernetes/manifests
            name: static-pod-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-pod-REVISION
            name: resource-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-certs
            name: cert-dir
          - hostPath:
              path: /var/lib/etcd
              type: ""
            name: data-dir
          - hostPath:
              path: /usr/local/bin
            name: usr-local-bin
          - hostPath:
              path: /var/log/etcd
            name: log-dir
    version: 4.10.0-202204290637.p0.g9790f8d.assembly.stream-9790f8d
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:19:16Z"
    name: etcd-pod-6
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-6
      uid: fdcdd4fe-5b59-45c9-b30a-4b1b7650b38d
    resourceVersion: "24816"
    uid: ee2baa5c-6edb-4f20-8a04-35edf765e34a
- apiVersion: v1
  data:
    cluster-backup.sh: |
      #!/usr/bin/env bash

      ### Created by cluster-etcd-operator. DO NOT edit.

      set -o errexit
      set -o pipefail
      set -o errtrace

      # example
      # cluster-backup.sh $path-to-snapshot

      if [[ $EUID -ne 0 ]]; then
        echo "This script must be run as root"
        exit 1
      fi

      function usage {
        echo 'Path to backup dir required: ./cluster-backup.sh [--force] <path-to-backup-dir>'
        exit 1
      }

      IS_DIRTY=""
      if [ "$1" == "--force" ]; then
        IS_DIRTY="__POSSIBLY_DIRTY__"
        shift
      fi

      # If the first argument is missing, or it is an existing file, then print usage and exit
      if [ -z "$1" ] || [ -f "$1" ]; then
        usage
      fi

      if [ ! -d "$1" ]; then
        mkdir -p "$1"
      fi

      function check_if_operator_is_progressing {
         local operator="$1"

         if [ ! -f "${KUBECONFIG}" ]; then
            echo "Valid kubeconfig is not found in kube-apiserver-certs. Exiting!"
            exit 1
         fi

         progressing=$(oc get co "${operator}" -o jsonpath='{.status.conditions[?(@.type=="Progressing")].status}') || true
         if [ "$progressing" == "" ]; then
            echo "Could not find the status of the $operator. Check if the API server is running. Pass the --force flag to skip checks."
            exit 1
         elif [ "$progressing" != "False" ]; then
            echo "Currently the $operator operator is progressing. A reliable backup requires that a rollout is not in progress.  Aborting!"
            exit 1
         fi
      }

      # backup latest static pod resources
      function backup_latest_kube_static_resources {
        local backup_tar_file="$1"
        local backup_resource_list=("kube-apiserver" "kube-controller-manager" "kube-scheduler" "etcd")
        local latest_resource_dirs=()

        for resource in "${backup_resource_list[@]}"; do
          if [ ! -f "/etc/kubernetes/manifests/${resource}-pod.yaml" ]; then
            echo "error finding manifests for the ${resource} pod. please check if it is running."
            exit 1
          fi

          local latest_resource
          latest_resource=$(grep -o -m 1 "/etc/kubernetes/static-pod-resources/${resource}-pod-[0-9]*" "/etc/kubernetes/manifests/${resource}-pod.yaml") || true

          if [ -z "${latest_resource}" ]; then
            echo "error finding static-pod-resources for the ${resource} pod. please check if it is running."
            exit 1
          fi
          if [ "${IS_DIRTY}" == "" ]; then
            check_if_operator_is_progressing "${resource}"
          fi

          echo "found latest ${resource}: ${latest_resource}"
          latest_resource_dirs+=("${latest_resource#${CONFIG_FILE_DIR}/}")
        done

        # tar latest resources with the path relative to CONFIG_FILE_DIR
        tar -cpzf "$backup_tar_file" -C "${CONFIG_FILE_DIR}" "${latest_resource_dirs[@]}"
        chmod 600 "$backup_tar_file"
      }

      function source_required_dependency {
        local src_path="$1"
        if [ ! -f "${src_path}" ]; then
          echo "required dependencies not found, please ensure this script is run on a node with a functional etcd static pod"
          exit 1
        fi
        # shellcheck disable=SC1090
        source "${src_path}"
      }

      BACKUP_DIR="$1"
      DATESTRING=$(date "+%F_%H%M%S")
      BACKUP_TAR_FILE=${BACKUP_DIR}/static_kuberesources_${DATESTRING}${IS_DIRTY}.tar.gz
      SNAPSHOT_FILE="${BACKUP_DIR}/snapshot_${DATESTRING}${IS_DIRTY}.db"

      trap 'rm -f ${BACKUP_TAR_FILE} ${SNAPSHOT_FILE}' ERR

      source_required_dependency /etc/kubernetes/static-pod-resources/etcd-certs/configmaps/etcd-scripts/etcd.env
      source_required_dependency /etc/kubernetes/static-pod-resources/etcd-certs/configmaps/etcd-scripts/etcd-common-tools

      # TODO handle properly
      if [ ! -f "$ETCDCTL_CACERT" ] && [ ! -d "${CONFIG_FILE_DIR}/static-pod-certs" ]; then
        ln -s "${CONFIG_FILE_DIR}"/static-pod-resources/etcd-certs "${CONFIG_FILE_DIR}"/static-pod-certs
      fi

      backup_latest_kube_static_resources "${BACKUP_TAR_FILE}"

      # Download etcdctl and get the etcd snapshot
      dl_etcdctl
      ETCDCTL_ENDPOINTS="https://${NODE_NODE_ENVVAR_NAME_IP}:2379" etcdctl snapshot save "${SNAPSHOT_FILE}"

      # Check the integrity of the snapshot
      check_snapshot_status "${SNAPSHOT_FILE}"

      echo "snapshot db and kube resources are successfully saved to ${BACKUP_DIR}"
    cluster-restore.sh: |
      #!/usr/bin/env bash

      ### Created by cluster-etcd-operator. DO NOT edit.

      set -o errexit
      set -o pipefail
      set -o errtrace

      # example
      # ./cluster-restore.sh $path-to-backup

      if [[ $EUID -ne 0 ]]; then
        echo "This script must be run as root"
        exit 1
      fi

      function source_required_dependency {
        local src_path="$1"
        if [ ! -f "${src_path}" ]; then
          echo "required dependencies not found, please ensure this script is run on a node with a functional etcd static pod"
          exit 1
        fi
        # shellcheck disable=SC1090
        source "${src_path}"
      }

      source_required_dependency /etc/kubernetes/static-pod-resources/etcd-certs/configmaps/etcd-scripts/etcd.env
      source_required_dependency /etc/kubernetes/static-pod-resources/etcd-certs/configmaps/etcd-scripts/etcd-common-tools

      function usage() {
        echo 'Path to the directory containing backup files is required: ./cluster-restore.sh <path-to-backup>'
        echo 'The backup directory is expected to be contain two files:'
        echo '        1. etcd snapshot'
        echo '        2. A copy of the Static POD resources at the time of backup'
        exit 1
      }

      # If the argument is not passed, or if it is not a directory, print usage and exit.
      if [ "$1" == "" ] || [ ! -d "$1" ]; then
        usage
      fi

      function restore_static_pods() {
        local backup_file="$1"
        shift
        local static_pods=("$@")

        for pod_file_name in "${static_pods[@]}"; do
          backup_pod_path=$(tar -tvf "${backup_file}" "*${pod_file_name}" | awk '{ print $6 }') || true
          if [ -z "${backup_pod_path}" ]; then
            echo "${pod_file_name} does not exist in ${backup_file}"
            exit 1
          fi

          echo "starting ${pod_file_name}"
          tar -xvf "${backup_file}" --strip-components=2 -C "${MANIFEST_DIR}"/ "${backup_pod_path}"
        done
      }

      function wait_for_containers_to_stop() {
        local containers=("$@")

        for container_name in "${containers[@]}"; do
          echo "Waiting for container ${container_name} to stop"
          while [[ -n $(crictl ps --label io.kubernetes.container.name="${container_name}" -q) ]]; do
            echo -n "."
            sleep 1
          done
          echo "complete"
        done
      }

      BACKUP_DIR="$1"
      # shellcheck disable=SC2012
      BACKUP_FILE=$(ls -vd "${BACKUP_DIR}"/static_kuberesources*.tar.gz | tail -1) || true
      # shellcheck disable=SC2012
      SNAPSHOT_FILE=$(ls -vd "${BACKUP_DIR}"/snapshot*.db | tail -1) || true
      STATIC_POD_LIST=("kube-apiserver-pod.yaml" "kube-controller-manager-pod.yaml" "kube-scheduler-pod.yaml")
      STATIC_POD_CONTAINERS=("etcd" "etcdctl" "etcd-metrics" "kube-controller-manager" "kube-apiserver" "kube-scheduler")

      if [ ! -f "${SNAPSHOT_FILE}" ]; then
        echo "etcd snapshot ${SNAPSHOT_FILE} does not exist"
        exit 1
      fi

      # Download etcdctl and check the snapshot status
      dl_etcdctl
      check_snapshot_status "${SNAPSHOT_FILE}"

      # Move manifests and stop static pods
      if [ ! -d "$MANIFEST_STOPPED_DIR" ]; then
        mkdir -p "$MANIFEST_STOPPED_DIR"
      fi

      # Move static pod manifests out of MANIFEST_DIR
      for POD_FILE_NAME in "${STATIC_POD_LIST[@]}" etcd-pod.yaml; do
        echo "...stopping ${POD_FILE_NAME}"
        [ ! -f "${MANIFEST_DIR}/${POD_FILE_NAME}" ] && continue
        mv "${MANIFEST_DIR}/${POD_FILE_NAME}" "${MANIFEST_STOPPED_DIR}"
      done

      # wait for every static pod container to stop
      wait_for_containers_to_stop "${STATIC_POD_CONTAINERS[@]}"

      if [ ! -d "${ETCD_DATA_DIR_BACKUP}" ]; then
        mkdir -p "${ETCD_DATA_DIR_BACKUP}"
      fi

      # backup old data-dir
      if [ -d "${ETCD_DATA_DIR}/member" ]; then
        if [ -d "${ETCD_DATA_DIR_BACKUP}/member" ]; then
          echo "removing previous backup ${ETCD_DATA_DIR_BACKUP}/member"
          rm -rf "${ETCD_DATA_DIR_BACKUP}"/member
        fi
        echo "Moving etcd data-dir ${ETCD_DATA_DIR}/member to ${ETCD_DATA_DIR_BACKUP}"
        mv "${ETCD_DATA_DIR}"/member "${ETCD_DATA_DIR_BACKUP}"/
      fi

      # Restore static pod resources
      tar -C "${CONFIG_FILE_DIR}" -xzf "${BACKUP_FILE}" static-pod-resources

      # Copy snapshot to backupdir
      cp -p "${SNAPSHOT_FILE}" "${ETCD_DATA_DIR_BACKUP}"/snapshot.db

      echo "starting restore-etcd static pod"
      cp -p "${RESTORE_ETCD_POD_YAML}" "${MANIFEST_DIR}/etcd-pod.yaml"

      # start remaining static pods
      restore_static_pods "${BACKUP_FILE}" "${STATIC_POD_LIST[@]}"
    etcd-common-tools: |+
      # Common environment variables
      ASSET_DIR="/home/core/assets"
      CONFIG_FILE_DIR="/etc/kubernetes"
      MANIFEST_DIR="${CONFIG_FILE_DIR}/manifests"
      ETCD_DATA_DIR="/var/lib/etcd"
      ETCD_DATA_DIR_BACKUP="/var/lib/etcd-backup"
      MANIFEST_STOPPED_DIR="${ASSET_DIR}/manifests-stopped"
      RESTORE_ETCD_POD_YAML="${CONFIG_FILE_DIR}/static-pod-resources/etcd-certs/configmaps/restore-etcd-pod/pod.yaml"
      ETCDCTL_BIN_DIR="${CONFIG_FILE_DIR}/static-pod-resources/bin"
      PATH=${PATH}:${ETCDCTL_BIN_DIR}
      KUBECONFIG="/etc/kubernetes/static-pod-resources/kube-apiserver-certs/secrets/node-kubeconfigs/localhost.kubeconfig"
      export KUBECONFIG

      # download etcdctl from upstream release assets
      function dl_etcdctl {
        if [ -x "$(command -v etcdctl)" ]; then
          echo "etcdctl is already installed"
          return
        fi
        local etcdimg=${ETCD_IMAGE}
        local etcdctr=$(podman create ${etcdimg} --authfile=/var/lib/kubelet/config.json)
        local etcdmnt=$(podman mount "${etcdctr}")
        [ ! -d ${ETCDCTL_BIN_DIR} ] && mkdir -p ${ETCDCTL_BIN_DIR}
        cp ${etcdmnt}/bin/etcdctl ${ETCDCTL_BIN_DIR}/
        umount "${etcdmnt}"
        podman rm "${etcdctr}"
        etcdctl version
      }

      # execute etcdctl command inside of running etcdctl container
      function exec_etcdctl {
        local command="$@"
        local container_id=$(sudo crictl ps --label io.kubernetes.container.name=etcdctl -o json | jq -r '.containers[0].id') || true
        if [ -z "$container_id" ]; then
          echo "etcdctl container is not running"
          exit 1
        fi
        crictl exec -it $container_id /bin/sh -c "etcdctl $command"
      }

      function check_snapshot_status() {
        local snap_file="$1"
        if ! etcdctl snapshot status "${snap_file}" -w json; then
          echo "Backup integrity verification failed. Backup appears corrupted. Aborting!"
          return 1
        fi
      }

    etcd.env: |
      export ALL_ETCD_ENDPOINTS="https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
      export ETCDCTL_API="3"
      export ETCDCTL_CACERT="/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
      export ETCDCTL_CERT="/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
      export ETCDCTL_ENDPOINTS="https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
      export ETCDCTL_KEY="/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
      export ETCD_CIPHER_SUITES="TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
      export ETCD_DATA_DIR="/var/lib/etcd"
      export ETCD_ELECTION_TIMEOUT="1000"
      export ETCD_ENABLE_PPROF="true"
      export ETCD_EXPERIMENTAL_MAX_LEARNERS="3"
      export ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION="200ms"
      export ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL="5s"
      export ETCD_HEARTBEAT_INTERVAL="100"
      export ETCD_IMAGE="quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
      export ETCD_INITIAL_CLUSTER_STATE="existing"
      export ETCD_QUOTA_BACKEND_BYTES="8589934592"
      export ETCD_SOCKET_REUSE_ADDRESS="true"
      export NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME="ip-10-0-138-197.ec2.internal"
      export NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST="10.0.138.197"
      export NODE_ip_10_0_138_197_ec2_internal_IP="10.0.138.197"
      export NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME="ip-10-0-149-121.ec2.internal"
      export NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST="10.0.149.121"
      export NODE_ip_10_0_149_121_ec2_internal_IP="10.0.149.121"
      export NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME="ip-10-0-169-205.ec2.internal"
      export NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST="10.0.169.205"
      export NODE_ip_10_0_169_205_ec2_internal_IP="10.0.169.205"
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:08:30Z"
    name: etcd-scripts
    namespace: openshift-etcd
    resourceVersion: "24798"
    uid: d74924d2-6065-4a6c-bf7a-e2b0262db9c7
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:07:43Z"
    name: etcd-serving-ca
    namespace: openshift-etcd
    resourceVersion: "4568"
    uid: 6ce7644d-ec0f-42c6-88e9-d8ee449a1c10
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:08:34Z"
    name: etcd-serving-ca-2
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-2
      uid: e70a5166-7f2e-4820-a56b-351d4fce63e9
    resourceVersion: "7554"
    uid: 0e2b54a2-d80e-4c01-a341-5cb422a604fd
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:09:47Z"
    name: etcd-serving-ca-3
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-3
      uid: b7bb0d7a-0881-41ee-add2-913f7ab66104
    resourceVersion: "10049"
    uid: 87e87c4e-4dd1-4edc-a3ac-2aff23add787
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:11:22Z"
    name: etcd-serving-ca-4
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-4
      uid: 23a503bb-17b1-4769-ae19-e6085e21ec01
    resourceVersion: "12069"
    uid: f458317d-d4ac-42ac-ba91-b7d709a82fda
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:12:50Z"
    name: etcd-serving-ca-5
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-5
      uid: a38c6f1a-987b-4095-aa50-5dcb10e1bf90
    resourceVersion: "14339"
    uid: 962f466c-ee60-4b86-89d2-7f8e95e7723a
- apiVersion: v1
  data:
    ca-bundle.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDOTCCAiGgAwIBAgIIKdX3jsPuKm0wDQYJKoZIhvcNAQELBQAwKjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MRQwEgYDVQQDEwtldGNkLXNpZ25lcjAeFw0yMjA1MjQxODA0
      MTFaFw0zMjA1MjExODA0MTJaMCoxEjAQBgNVBAsTCW9wZW5zaGlmdDEUMBIGA1UE
      AxMLZXRjZC1zaWduZXIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDu
      kTxdejfwBMSohN0YJGb5QOS2yqgdkj4GaF11nxgPwh4cQwodDjh0JmY60/uWfEfy
      RLTrlF2UrFS8xxaoD0NXgvU2BH+WNb+s5Y/zepuC13rrtqa2rohWLaBN7BMket59
      FYfimnqxp9K4kF8awiYIA4IgJ4DFg6MKmA4BpZ8zKZeIW1sC2p+gpiXH9wfTLmbw
      1TzZ8EyG3agnT8apjMeAJDXGC2elOy6PAzdFfUyuwYHOR3CfkILrjLP8P7jYfZiM
      FtTcILiQQkEQKOyVvXxFfbMA0oj9aEr/e7hO5AQsTEwVnnMNsqjVur4iZvkoum16
      DTwA+1rBtHivKK5lHZWLAgMBAAGjYzBhMA4GA1UdDwEB/wQEAwICpDAPBgNVHRMB
      Af8EBTADAQH/MB0GA1UdDgQWBBRrXX6b6BMWe0+6kEOwpWH48cBBaDAfBgNVHSME
      GDAWgBRrXX6b6BMWe0+6kEOwpWH48cBBaDANBgkqhkiG9w0BAQsFAAOCAQEAzgKS
      pmJqWhR2c/AyIEDqlqbPqcijl1kvs/kWpBWCIAGOVeWbZV39GLmQlMVwmq5FxAPP
      XJJi6dw1IKcKA0iHX69nbReT+RPnp16rXRC9cURr2HWPTycJ/a7szOhopHS/WuNO
      ppk5WRX4eAjaVWwbteRs0N9zysBjsbUAcbiQmrWkL9c0+HozdGmXXk04djo1aela
      RIOeRvb+bY7w5alxJF+iSrMNlDSoe6UNJCHum2d0zUleya3BSgdIP0qQub39WxtE
      mFv6tgpEuP2O3RlNxb9si817Ne4943ganuPIl8M57iNYHlxk4vg8bxsAt9v7QOTv
      Jwiw2g+3RU6ni4x2fg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:19:17Z"
    name: etcd-serving-ca-6
    namespace: openshift-etcd
    ownerReferences:
    - apiVersion: v1
      kind: ConfigMap
      name: revision-status-6
      uid: fdcdd4fe-5b59-45c9-b30a-4b1b7650b38d
    resourceVersion: "24828"
    uid: 6180184c-1092-4796-9920-b1ca5e1a9d9b
- apiVersion: v1
  data:
    ca.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDMjCCAhqgAwIBAgIIaF6NeZ+aXe0wDQYJKoZIhvcNAQELBQAwNzESMBAGA1UE
      CxMJb3BlbnNoaWZ0MSEwHwYDVQQDExhrdWJlLWFwaXNlcnZlci1sYi1zaWduZXIw
      HhcNMjIwNTI0MTc1ODA5WhcNMzIwNTIxMTc1ODA5WjA3MRIwEAYDVQQLEwlvcGVu
      c2hpZnQxITAfBgNVBAMTGGt1YmUtYXBpc2VydmVyLWxiLXNpZ25lcjCCASIwDQYJ
      KoZIhvcNAQEBBQADggEPADCCAQoCggEBALwVpbI2tHFkVQrTfwH3tkneIikpA/hl
      b1BRaPs1bwvVxTgkv0ctRjuJGZpcLja8saZB/wlVIFCGq6c5J6dwNWmVoZu1KIGp
      9qNnNkRgttm8wSz2HA+lCW9yUxjDgUA8Pc5bCcUhY8qSPA2m9qq/tvPr4vGSa8x0
      AcGOlPheM8PeCv40Zc2EPmhKfFAp6ZuJ7ZLVJAO6ncnOTtkDqYMKORGdFgNYKdKZ
      sfJ9qnSH8Ps4fSyqwPxQAyQ85yjJEdahu2ZoKopiacH7uU6wS2Ni49XUGXeS5kct
      iDYCmMCJHtsF4F74qv2Gh8stWGyA9JLyMi/m342dr2f1VdgmgGn1io0CAwEAAaNC
      MEAwDgYDVR0PAQH/BAQDAgKkMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFKEH
      goCqgLWx3Ma0M2iSXtQFfXCsMA0GCSqGSIb3DQEBCwUAA4IBAQAofVvp05u+GGv7
      w34hPGfwXb0rupUhSbm+KzcZ9p7jZKPSN4lvkLRNUprfmP4gR33Xkjn91watSM2x
      FMsSMFvPoLQkfHu2cP3TlN2ddbYb+3v01fCYDKPyaoIAaCVUgpJ2gNYsVPhD3LQd
      sA/EkWyKs7Ggu8yL88ArKN8Nsv7WUtKHmqbiqrX6K0DM9pdI3upfXYCngeL5IsU8
      Fq1NyK086wVdYfjOnipTXtTvPiO/fE1oX2nVXsxNxowjhYVScC2T1ZH9cVSP26fq
      uoyj99JfxxDL9hpbK5K2YzNrDO7fkzn6UP0j+Fu96gVoHci2s0oK2JxQsxgfxcYZ
      8TfG1e82
      -----END CERTIFICATE-----
      -----BEGIN CERTIFICATE-----
      MIIDQDCCAiigAwIBAgIIM46x6byvII8wDQYJKoZIhvcNAQELBQAwPjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MSgwJgYDVQQDEx9rdWJlLWFwaXNlcnZlci1sb2NhbGhvc3Qt
      c2lnbmVyMB4XDTIyMDUyNDE3NTgwOVoXDTMyMDUyMTE3NTgwOVowPjESMBAGA1UE
      CxMJb3BlbnNoaWZ0MSgwJgYDVQQDEx9rdWJlLWFwaXNlcnZlci1sb2NhbGhvc3Qt
      c2lnbmVyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuVrAeaJosaY1
      E9o4oPkpxLDx8QF5Ji3uMMfoBAO+9Wt2tykPO9/CTghsDM1fN/kg94DE4rb6CMWb
      aFyUlBok97zlO7rjKBySOnTahRArHuzurQtMyDrUJD0pWLbXIiyjE4L26Rz3wW9C
      CZsXfwnmytPhraguIbUnKDz7ykSRzf79pqvP17dK+Vsiyy/ViOFqHuSGa2d2RlBI
      jshHo2jRZLPCVGUvfAQTT+pfbxrDcg3XpDmGukXTZnWqL12Qc22teoTjXAHCL0Ny
      XjitCo+nSyt+NcoZgJ3HZqEufO4F3DqfF6Ja7zNGbH0rDPKBQjsqkSR0sFz8VKXF
      xdvHKantCQIDAQABo0IwQDAOBgNVHQ8BAf8EBAMCAqQwDwYDVR0TAQH/BAUwAwEB
      /zAdBgNVHQ4EFgQUxGqZhXeomt9poP3ST8CNGz3NS2IwDQYJKoZIhvcNAQELBQAD
      ggEBALggP2dTHzzs9i5i5Vo04NuzosogdCK67tWd85nPwWza9s1P4KHpgIYTp+Ve
      nt7oRNqEmcDdV3LYLcqzfrghjChheEcrK35439VeUqdjQdmHM/WmYXzwzszBtbCY
      G/vkff8X5pzwIxJJp40u3iVtEbnVvz1BnrYg568WRctaZabKVzklPuMspOndOOSg
      8JT+V59RMrsnL2I8ccfOH/vABiU92Zq8TC483TBzwjX72+573pBTOigZCypSGaXo
      YeYj0nLVabALOLnwGxD/BJXS3X01Ehv1zVP1r58t2sxuF+k55nPXYDs9VSVgx5kT
      +odoALQyN4PXN/+lZCJK4ISHqyA=
      -----END CERTIFICATE-----
      -----BEGIN CERTIFICATE-----
      MIIDTDCCAjSgAwIBAgIISQR4oKgvETwwDQYJKoZIhvcNAQELBQAwRDESMBAGA1UE
      CxMJb3BlbnNoaWZ0MS4wLAYDVQQDEyVrdWJlLWFwaXNlcnZlci1zZXJ2aWNlLW5l
      dHdvcmstc2lnbmVyMB4XDTIyMDUyNDE3NTgwOVoXDTMyMDUyMTE3NTgwOVowRDES
      MBAGA1UECxMJb3BlbnNoaWZ0MS4wLAYDVQQDEyVrdWJlLWFwaXNlcnZlci1zZXJ2
      aWNlLW5ldHdvcmstc2lnbmVyMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC
      AQEA1azJdx1cmrP0oFXUtF+Y1TVVxLU6HC7k9CVwKpDSCHtzOY9cxXn3edBGYiok
      HcnIP2vziKS29enFK5H9Msqhc/dueYaFHzuKtAgteKGJifvWBxYA0R8FOYwRn2gC
      +NIlYlpeLPeiE7dvt1OQTaNnAn6ZwZKMvSsbwcmgi04C+XxkKgCx4oqFgGysg794
      d1YpTc1NoonJ85i3zeiJ5X3Z66EPWtQXIlU67IedX8Vd3jC7KqAoqV3hm4GyImT1
      q5OQzqb0+mAuxzIuLaCLQu8JhKKHB8j1I0qclpmotxWOju3jimgZ3i0QWl8LXKFv
      7+Hyrtisb+1BzSiLZz6vKgJxeQIDAQABo0IwQDAOBgNVHQ8BAf8EBAMCAqQwDwYD
      VR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQU8ZjsCxNdiq7xt0hqHLNElJK6SHEwDQYJ
      KoZIhvcNAQELBQADggEBAB9BOikS47zebhNtVkY7Lf4r3HVQ13zxsx9FthmqayXr
      KDRJ5AWiXASoF0lPgElsUQ0Qsp3etXR2POfd9Ei7ytwV3ftfRdR/JnCWTJ1jlqvc
      d3oUJlU/Mg3qFNVhYdfn0H6BMcdHkOibsyigkCeWzIC1VU04Dl8cD9IoltDWeJfM
      Bi30K2dJsJN3LYn8Ic0nwYzeccLxqG7ADEL8YjFPC8sL2YvTACYYJVkHZHuSyL+h
      qVv7odKp+x/LuAxJiTn8rZie0xYLt6Z+X8Hm72BaoikmerKInClM03DGrieHWDlY
      KFE/Boetn7nRsomkRsCoUJMC6HjMSFr5D7UrOok5LC0=
      -----END CERTIFICATE-----
      -----BEGIN CERTIFICATE-----
      MIIDlzCCAn+gAwIBAgIIA02EfcpLCEIwDQYJKoZIhvcNAQELBQAwWTFXMFUGA1UE
      AwxOb3BlbnNoaWZ0LWt1YmUtYXBpc2VydmVyLW9wZXJhdG9yX2xvY2FsaG9zdC1y
      ZWNvdmVyeS1zZXJ2aW5nLXNpZ25lckAxNjUzNDE1NjYzMB4XDTIyMDUyNDE4MDc0
      M1oXDTMyMDUyMTE4MDc0NFowWTFXMFUGA1UEAwxOb3BlbnNoaWZ0LWt1YmUtYXBp
      c2VydmVyLW9wZXJhdG9yX2xvY2FsaG9zdC1yZWNvdmVyeS1zZXJ2aW5nLXNpZ25l
      ckAxNjUzNDE1NjYzMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA4unV
      faO+MHjSSGkR9ZSXYfvdIuVRnfDBjl3lWRT6z4vdafaw+/tJAWgROgQ+2c80nGhD
      NYJMp+l1gHFAowaxblu38SqB8rhZTGa3dbvbIJZ/NCSEZsHKJwlahFaoyuOTnguv
      yzFRJnZPJY57IojaL0AtLLq5xxojzijiSPwZE/XoKxXTewfWoOKuANvGdtaKvWqG
      oQf8Iq4Lc130iEwTZgYYTQQIoNRkNwVSPL0mDJO2tR8q/m38HMtLFqOxZPrTms2H
      tGjH4gS9JIOtcuGSr3H6XlBnI+UrQa2IxhVCRvGMN9Yd/xZeygE0Ttl8Ux0jgKfM
      FT/7Cqlc5M24AVcZQQIDAQABo2MwYTAOBgNVHQ8BAf8EBAMCAqQwDwYDVR0TAQH/
      BAUwAwEB/zAdBgNVHQ4EFgQUBgHjWEA8cGDOxOEE9NeUoTgosCkwHwYDVR0jBBgw
      FoAUBgHjWEA8cGDOxOEE9NeUoTgosCkwDQYJKoZIhvcNAQELBQADggEBAKEkSDDM
      uNU0msYFwYzWVJ6ZuLqh/ZgwoKT/HfBpkxyX44rJo66ZDvapl4eBfF2Qho+WAyEY
      dUXiHAM+murwivPAhdBxafCockCQSygz8hLooUf4KICSOZdGYeR96BqArZ3aMEOU
      6DlxVOWfpowwT4FD/CUqbtSX5F4KmRdoD+1ks3WIcwPbl0zb+MZ2HLCpFPQMAomq
      A0s+eCJ/6oTNGTzttyUjeKlNQK7GcZZU3ZYqftf3f4kAxAyFWgG7wvUhFuxeoP8y
      OpVILyPvOqb3WBN+KDrGmXFUZFjzGzqD3buqED3NA4ZWx+Rc7hPZvFCRUQobSfQV
      tlOPSHzf9Y9rSgo=
      -----END CERTIFICATE-----
      -----BEGIN CERTIFICATE-----
      MIIFtjCCBJ6gAwIBAgISBFLw17r/CuNNqWSjg41GCK3OMA0GCSqGSIb3DQEBCwUA
      MDIxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MQswCQYDVQQD
      EwJSMzAeFw0yMjA1MjQxNzI3MDJaFw0yMjA4MjIxNzI3MDFaMDQxMjAwBgNVBAMT
      KWFwaS5vZGYtc2VydmljZS5kaWY1LnAxLm9wZW5zaGlmdGFwcHMuY29tMIIBIjAN
      BgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzd4EF451gHcY+pDj4YM2hLiIWuGX
      iCe9DGYzUNC4jrijeJVYs8tPp/iH63gOYvsY3fW7coZEbaFvq597qzKb6CAjsP72
      s0VBJH4vnljJysMv6VpU9D4NECYvAQjy1OHVP6VrURBhu61bOgLrYFfxCtGWD81a
      O7rNwquWsGqQDiGXfg6LbApX3Y9kg+zyuTL1Pc2b6fzAC3BEMviOI9o6QPZhHH1P
      7H0STFfEWRRt7IHC5KLi1IvQ1aPHG+LJcQ58etnoYNydkNkB3DN4CjjaXitdLnoi
      G2d2cVMXmCMMYPkSuZEIlhoAmn1BuUV/SHuoSs63XVjhy4bE1MV3arwCWwIDAQAB
      o4ICwjCCAr4wDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggr
      BgEFBQcDAjAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBQXbq8TuDsow74svn3WxCIX
      E6KtEjAfBgNVHSMEGDAWgBQULrMXt1hWy65QCUDmH6+dixTCxjBVBggrBgEFBQcB
      AQRJMEcwIQYIKwYBBQUHMAGGFWh0dHA6Ly9yMy5vLmxlbmNyLm9yZzAiBggrBgEF
      BQcwAoYWaHR0cDovL3IzLmkubGVuY3Iub3JnLzCBkgYDVR0RBIGKMIGHgiwqLmFw
      cHMub2RmLXNlcnZpY2UuZGlmNS5wMS5vcGVuc2hpZnRhcHBzLmNvbYIpYXBpLm9k
      Zi1zZXJ2aWNlLmRpZjUucDEub3BlbnNoaWZ0YXBwcy5jb22CLHJoLWFwaS5vZGYt
      c2VydmljZS5kaWY1LnAxLm9wZW5zaGlmdGFwcHMuY29tMEwGA1UdIARFMEMwCAYG
      Z4EMAQIBMDcGCysGAQQBgt8TAQEBMCgwJgYIKwYBBQUHAgEWGmh0dHA6Ly9jcHMu
      bGV0c2VuY3J5cHQub3JnMIIBAwYKKwYBBAHWeQIEAgSB9ASB8QDvAHYA36Veq2iC
      Tx9sre64X04+WurNohKkal6OOxLAIERcKnMAAAGA91KJLwAABAMARzBFAiAIZWF8
      HxoZi8Uc4gbb1tP92WtRG697l9lmSfXbnC1XLQIhAL/e0q4GXuEUlIkJW0jwqc6O
      Md7T/AizyojNvIRU5mVyAHUARqVV63X6kSAwtaKJafTzfREsQXS+/Um4havy/HD+
      bUcAAAGA91KJUwAABAMARjBEAiB7//joMC2x7OAo92PRcbaOuyjPQG2w51dX+xlF
      vucv0gIgaTD8sFKPppA70+k/s9M/FuUM61tUl21nI2FQ52/L8qowDQYJKoZIhvcN
      AQELBQADggEBAC05nXdp+2WBPR5Tg/tceka3INm7/IOC4sYIqxwUopF9ePmlk58F
      hSbZzvzM4teaH4o3kAke4bzzFhnnBqWG4cW52c7eOgO4tYzE3SkjfipqytT2Ed1D
      jOorCI+EQjV9EFZeEzvxtnZsAwgIjLvqpB/LXlnSf5EkmjtzHcHqucZcDFsqcMjL
      Qolbk1+a+TOTM4FPz4qlPAslLh8xCXZHCIYuM2n4r71XRPYeKUnj9JBRZVSN7znK
      s0uo646L0S4Slp/HBDrrDHHoqjucqO1ad40uKzP4jwtMp0w5wYtCzTrTZrLuyVEh
      emR91a/GVQgnV2LpWDwVXPpt5H1p/tDFA08=
      -----END CERTIFICATE-----
      -----BEGIN CERTIFICATE-----
      MIIFFjCCAv6gAwIBAgIRAJErCErPDBinU/bWLiWnX1owDQYJKoZIhvcNAQELBQAw
      TzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2Vh
      cmNoIEdyb3VwMRUwEwYDVQQDEwxJU1JHIFJvb3QgWDEwHhcNMjAwOTA0MDAwMDAw
      WhcNMjUwOTE1MTYwMDAwWjAyMQswCQYDVQQGEwJVUzEWMBQGA1UEChMNTGV0J3Mg
      RW5jcnlwdDELMAkGA1UEAxMCUjMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK
      AoIBAQC7AhUozPaglNMPEuyNVZLD+ILxmaZ6QoinXSaqtSu5xUyxr45r+XXIo9cP
      R5QUVTVXjJ6oojkZ9YI8QqlObvU7wy7bjcCwXPNZOOftz2nwWgsbvsCUJCWH+jdx
      sxPnHKzhm+/b5DtFUkWWqcFTzjTIUu61ru2P3mBw4qVUq7ZtDpelQDRrK9O8Zutm
      NHz6a4uPVymZ+DAXXbpyb/uBxa3Shlg9F8fnCbvxK/eG3MHacV3URuPMrSXBiLxg
      Z3Vms/EY96Jc5lP/Ooi2R6X/ExjqmAl3P51T+c8B5fWmcBcUr2Ok/5mzk53cU6cG
      /kiFHaFpriV1uxPMUgP17VGhi9sVAgMBAAGjggEIMIIBBDAOBgNVHQ8BAf8EBAMC
      AYYwHQYDVR0lBBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMBMBIGA1UdEwEB/wQIMAYB
      Af8CAQAwHQYDVR0OBBYEFBQusxe3WFbLrlAJQOYfr52LFMLGMB8GA1UdIwQYMBaA
      FHm0WeZ7tuXkAXOACIjIGlj26ZtuMDIGCCsGAQUFBwEBBCYwJDAiBggrBgEFBQcw
      AoYWaHR0cDovL3gxLmkubGVuY3Iub3JnLzAnBgNVHR8EIDAeMBygGqAYhhZodHRw
      Oi8veDEuYy5sZW5jci5vcmcvMCIGA1UdIAQbMBkwCAYGZ4EMAQIBMA0GCysGAQQB
      gt8TAQEBMA0GCSqGSIb3DQEBCwUAA4ICAQCFyk5HPqP3hUSFvNVneLKYY611TR6W
      PTNlclQtgaDqw+34IL9fzLdwALduO/ZelN7kIJ+m74uyA+eitRY8kc607TkC53wl
      ikfmZW4/RvTZ8M6UK+5UzhK8jCdLuMGYL6KvzXGRSgi3yLgjewQtCPkIVz6D2QQz
      CkcheAmCJ8MqyJu5zlzyZMjAvnnAT45tRAxekrsu94sQ4egdRCnbWSDtY7kh+BIm
      lJNXoB1lBMEKIq4QDUOXoRgffuDghje1WrG9ML+Hbisq/yFOGwXD9RiX8F6sw6W4
      avAuvDszue5L3sz85K+EC4Y/wFVDNvZo4TYXao6Z0f+lQKc0t8DQYzk1OXVu8rp2
      yJMC6alLbBfODALZvYH7n7do1AZls4I9d1P4jnkDrQoxB3UqQ9hVl3LEKQ73xF1O
      yK5GhDDX8oVfGKF5u+decIsH4YaTw7mP3GFxJSqv3+0lUFJoi5Lc5da149p90Ids
      hCExroL1+7mryIkXPeFM5TgO9r0rvZaBFOvV2z0gp35Z0+L4WPlbuEjN/lxPFin+
      HlUjr8gRsI3qfJOQFy/9rKIJR0Y/8Omwt/8oTWgy1mdeHmmjk7j1nYsvC9JSQ6Zv
      MldlTTKB3zhThV1+XWYp6rjd5JW1zbVWEkLNxE7GJThEUG3szgBVGP7pSWTUTsqX
      nLRbwHOoq7hHwg==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    annotations:
      kubernetes.io/description: Contains a CA bundle that can be used to verify the
        kube-apiserver when using internal endpoints such as the internal service
        IP or kubernetes.default.svc. No other usage is guaranteed across distributions
        of Kubernetes clusters.
    creationTimestamp: "2022-05-24T18:05:15Z"
    name: kube-root-ca.crt
    namespace: openshift-etcd
    resourceVersion: "65345"
    uid: 228f4d5b-bdae-4ceb-acbe-88954ebbcdb7
- apiVersion: v1
  data:
    service-ca.crt: |
      -----BEGIN CERTIFICATE-----
      MIIDUTCCAjmgAwIBAgIIQZrxiXiPOoYwDQYJKoZIhvcNAQELBQAwNjE0MDIGA1UE
      Awwrb3BlbnNoaWZ0LXNlcnZpY2Utc2VydmluZy1zaWduZXJAMTY1MzQxNTY2MjAe
      Fw0yMjA1MjQxODA3NDFaFw0yNDA3MjIxODA3NDJaMDYxNDAyBgNVBAMMK29wZW5z
      aGlmdC1zZXJ2aWNlLXNlcnZpbmctc2lnbmVyQDE2NTM0MTU2NjIwggEiMA0GCSqG
      SIb3DQEBAQUAA4IBDwAwggEKAoIBAQDetmL87oMhj0wEuFhthJTJ66WZzU8HPXlz
      hn/I4gNXxE37ctAAxpb77OPawZAOeZNuiac+3PujhxMfyWJwtWx3jzqfOa1qCz+3
      ZT2t/6XbhR8Ad1A+LjAd6FM1YQADJ5uHrnKMhFjnWGsLA17MezZNpfETj9YHrZmj
      O6KMxQ2KN4a/JG3LsQ8YgUbpmoxaxcjWUjIT+1gtU9txW677+UgO/tgqrhG18b0w
      /0vaVQMv8WF/ZNjTuoncCa0+Nr6C4tOo84lT7viaJTL+QhUwLaOxHqvP3KEOTO45
      WnRszRu+2if1nM3XCAHAsnsNHp3d6oLMyuosm1/ZF82xF0FzaqAXAgMBAAGjYzBh
      MA4GA1UdDwEB/wQEAwICpDAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBRy8veS
      PVLa9sdRIrn11Z9JJ5Vd0zAfBgNVHSMEGDAWgBRy8veSPVLa9sdRIrn11Z9JJ5Vd
      0zANBgkqhkiG9w0BAQsFAAOCAQEAQSRJ2413KVPJ6Zf6kJ5JMU8BZ4vJZC2NRI1J
      ZMHPzCRYPIS5ggI9mUcXg/M2Bv8y1j3EnuCI4DVsnfrUMvPj4Brga8OD+bop5CYp
      Hjdcdn1txCQFE49OnO9PdWIYTHvBdAMFb9cgfl4r9gYbMBIkbDEiv7cyaOQ/Krb6
      UELgwDWaX/Loh1f2waU2AAOXXNzsxpu6NpBcXpzkM/PYjvAPYdf0V9ow/Ub9RXDV
      cqoxX2rb64SDgOJNSmRTS8CXuvMBqXCgSXAqFdtPpztGHtMYGfSGpP5K9P3WnrNg
      dKMUuqbSu///kGv7VKcx95YACrQAB6dzZbtlkxOmoPvj5nVq3w==
      -----END CERTIFICATE-----
  kind: ConfigMap
  metadata:
    annotations:
      service.beta.openshift.io/inject-cabundle: "true"
    creationTimestamp: "2022-05-24T18:05:15Z"
    name: openshift-service-ca.crt
    namespace: openshift-etcd
    resourceVersion: "5212"
    uid: 53cf888b-4189-489b-b76e-c323f0ed9ef0
- apiVersion: v1
  data:
    forceRedeploymentReason: ""
    pod.yaml: |
      apiVersion: v1
      kind: Pod
      metadata:
        name: etcd
        namespace: openshift-etcd
        labels:
          app: etcd
          k8s-app: etcd
          etcd: "true"
          revision: "REVISION"
      spec:
        containers:
        - name: etcd
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: FallbackToLogsOnError
          command:
            - /bin/sh
            - -c
            - |
              #!/bin/sh
              set -euo pipefail

              export ETCD_NAME=${NODE_NODE_ENVVAR_NAME_ETCD_NAME}
              export ETCD_INITIAL_CLUSTER="${ETCD_NAME}=https://${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}:2380"
              env | grep ETCD | grep -v NODE
              export ETCD_NODE_PEER_URL=https://${NODE_NODE_ENVVAR_NAME_ETCD_URL_HOST}:2380

              # checking if data directory is empty, if not etcdctl restore will fail
              if [ ! -z $(ls -A "/var/lib/etcd") ]; then
                echo "please delete the contents of data directory before restoring, running the restore script will do this for you"
                exit 1
              fi

              # check if we have backup file to be restored
              # if the file exist, check if it has not changed size in last 5 seconds
              if [ ! -f /var/lib/etcd-backup/snapshot.db ]; then
                echo "please make a copy of the snapshot db file, then move that copy to /var/lib/etcd-backup/snapshot.db"
                exit 1
              else
                filesize=$(stat --format=%s "/var/lib/etcd-backup/snapshot.db")
                sleep 5
                newfilesize=$(stat --format=%s "/var/lib/etcd-backup/snapshot.db")
                if [ "$filesize" != "$newfilesize" ]; then
                  echo "file size has changed since last 5 seconds, retry sometime after copying is complete"
                  exit 1
                fi
              fi

              UUID=$(uuidgen)
              echo "restoring to a single node cluster"
              ETCDCTL_API=3 /usr/bin/etcdctl snapshot restore /var/lib/etcd-backup/snapshot.db \
               --name  $ETCD_NAME \
               --initial-cluster=$ETCD_INITIAL_CLUSTER \
               --initial-cluster-token "openshift-etcd-${UUID}" \
               --initial-advertise-peer-urls $ETCD_NODE_PEER_URL \
               --data-dir="/var/lib/etcd/restore-${UUID}"

              mv /var/lib/etcd/restore-${UUID}/* /var/lib/etcd/

              rmdir /var/lib/etcd/restore-${UUID}
              rm /var/lib/etcd-backup/snapshot.db

              set -x
              exec etcd \
                --logger=zap \
                --log-level=info \
                --initial-advertise-peer-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2380 \
                --cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.crt \
                --key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-serving-NODE_NAME.key \
                --trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt \
                --client-cert-auth=true \
                --peer-cert-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt \
                --peer-key-file=/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key \
                --peer-trusted-ca-file=/etc/kubernetes/static-pod-certs/configmaps/etcd-peer-client-ca/ca-bundle.crt \
                --peer-client-cert-auth=true \
                --advertise-client-urls=https://${NODE_NODE_ENVVAR_NAME_IP}:2379 \
                --listen-client-urls=https://0.0.0.0:2379 \
                --listen-peer-urls=https://0.0.0.0:2380 \
                --metrics=extensive \
                --listen-metrics-urls=https://0.0.0.0:9978
          env:
            - name: "ALL_ETCD_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_API"
              value: "3"
            - name: "ETCDCTL_CACERT"
              value: "/etc/kubernetes/static-pod-certs/configmaps/etcd-serving-ca/ca-bundle.crt"
            - name: "ETCDCTL_CERT"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.crt"
            - name: "ETCDCTL_ENDPOINTS"
              value: "https://10.0.138.197:2379,https://10.0.149.121:2379,https://10.0.169.205:2379"
            - name: "ETCDCTL_KEY"
              value: "/etc/kubernetes/static-pod-certs/secrets/etcd-all-certs/etcd-peer-NODE_NAME.key"
            - name: "ETCD_CIPHER_SUITES"
              value: "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256"
            - name: "ETCD_DATA_DIR"
              value: "/var/lib/etcd"
            - name: "ETCD_ELECTION_TIMEOUT"
              value: "1000"
            - name: "ETCD_ENABLE_PPROF"
              value: "true"
            - name: "ETCD_EXPERIMENTAL_MAX_LEARNERS"
              value: "3"
            - name: "ETCD_EXPERIMENTAL_WARNING_APPLY_DURATION"
              value: "200ms"
            - name: "ETCD_EXPERIMENTAL_WATCH_PROGRESS_NOTIFY_INTERVAL"
              value: "5s"
            - name: "ETCD_HEARTBEAT_INTERVAL"
              value: "100"
            - name: "ETCD_IMAGE"
              value: "quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:69322de62138a64e0614d12803b76bd0d9114a66a38165309d3f20dc60084f6f"
            - name: "ETCD_INITIAL_CLUSTER_STATE"
              value: "existing"
            - name: "ETCD_QUOTA_BACKEND_BYTES"
              value: "8589934592"
            - name: "ETCD_SOCKET_REUSE_ADDRESS"
              value: "true"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_NAME"
              value: "ip-10-0-138-197.ec2.internal"
            - name: "NODE_ip_10_0_138_197_ec2_internal_ETCD_URL_HOST"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_138_197_ec2_internal_IP"
              value: "10.0.138.197"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_NAME"
              value: "ip-10-0-149-121.ec2.internal"
            - name: "NODE_ip_10_0_149_121_ec2_internal_ETCD_URL_HOST"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_149_121_ec2_internal_IP"
              value: "10.0.149.121"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_NAME"
              value: "ip-10-0-169-205.ec2.internal"
            - name: "NODE_ip_10_0_169_205_ec2_internal_ETCD_URL_HOST"
              value: "10.0.169.205"
            - name: "NODE_ip_10_0_169_205_ec2_internal_IP"
              value: "10.0.169.205"
            - name: "ETCD_STATIC_POD_REV"
              value: "REVISION"
          resources:
            requests:
              memory: 600Mi
              cpu: 300m
          readinessProbe:
            tcpSocket:
              port: 2380
            failureThreshold: 3
            initialDelaySeconds: 3
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 5
          securityContext:
            privileged: true
          volumeMounts:
            - mountPath: /etc/kubernetes/manifests
              name: static-pod-dir
            - mountPath: /etc/kubernetes/static-pod-certs
              name: cert-dir
            - mountPath: /var/lib/etcd/
              name: data-dir
            - mountPath: /var/lib/etcd-backup/
              name: backup-dir
        hostNetwork: true
        priorityClassName: system-node-critical
        tolerations:
        - operator: "Exists"
        volumes:
          - hostPath:
              path: /etc/kubernetes/manifests
            name: static-pod-dir
          - hostPath:
              path: /etc/kubernetes/static-pod-resources/etcd-certs
            name: cert-dir
          - hostPath:
              path: /var/lib/etcd
              type: ""
            name: data-dir
          - hostPath:
              path: /var/lib/etcd-backup
              type: ""
            name: backup-dir
    version: 4.10.0-202204290637.p0.g9790f8d.assembly.stream-9790f8d
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:08:33Z"
    name: restore-etcd-pod
    namespace: openshift-etcd
    resourceVersion: "24814"
    uid: 3c96f894-1520-45c5-b9e6-223515d368bf
- apiVersion: v1
  data:
    reason: configmap "etcd-pod-1" not found
    revision: "2"
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:08:15Z"
    name: revision-status-2
    namespace: openshift-etcd
    resourceVersion: "7397"
    uid: e70a5166-7f2e-4820-a56b-351d4fce63e9
- apiVersion: v1
  data:
    reason: configmap/etcd-pod has changed,configmap/etcd-endpoints has changed
    revision: "3"
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:09:44Z"
    name: revision-status-3
    namespace: openshift-etcd
    resourceVersion: "10210"
    uid: b7bb0d7a-0881-41ee-add2-913f7ab66104
- apiVersion: v1
  data:
    reason: configmap/etcd-pod has changed,configmap/etcd-endpoints has changed
    revision: "4"
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:11:20Z"
    name: revision-status-4
    namespace: openshift-etcd
    resourceVersion: "12363"
    uid: 23a503bb-17b1-4769-ae19-e6085e21ec01
- apiVersion: v1
  data:
    reason: configmap/etcd-pod has changed,configmap/etcd-endpoints has changed
    revision: "5"
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:12:47Z"
    name: revision-status-5
    namespace: openshift-etcd
    resourceVersion: "15043"
    uid: a38c6f1a-987b-4095-aa50-5dcb10e1bf90
- apiVersion: v1
  data:
    reason: configmap/etcd-pod has changed
    revision: "6"
  kind: ConfigMap
  metadata:
    creationTimestamp: "2022-05-24T18:19:15Z"
    name: revision-status-6
    namespace: openshift-etcd
    resourceVersion: "24802"
    uid: fdcdd4fe-5b59-45c9-b30a-4b1b7650b38d
kind: ConfigMapList
metadata:
  resourceVersion: "310930"
