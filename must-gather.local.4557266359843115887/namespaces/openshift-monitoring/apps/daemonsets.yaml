---
apiVersion: apps/v1
items:
- apiVersion: apps/v1
  kind: DaemonSet
  metadata:
    annotations:
      deprecated.daemonset.template.generation: "1"
    creationTimestamp: "2022-05-24T18:08:56Z"
    generation: 1
    labels:
      app.kubernetes.io/component: exporter
      app.kubernetes.io/managed-by: cluster-monitoring-operator
      app.kubernetes.io/name: node-exporter
      app.kubernetes.io/part-of: openshift-monitoring
      app.kubernetes.io/version: 1.3.1
    name: node-exporter
    namespace: openshift-monitoring
    resourceVersion: "78551"
    uid: e8272b26-830f-410c-8fb6-22e0b2292a4d
  spec:
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app.kubernetes.io/component: exporter
        app.kubernetes.io/name: node-exporter
        app.kubernetes.io/part-of: openshift-monitoring
    template:
      metadata:
        annotations:
          kubectl.kubernetes.io/default-container: node-exporter
          target.workload.openshift.io/management: '{"effect": "PreferredDuringScheduling"}'
        creationTimestamp: null
        labels:
          app.kubernetes.io/component: exporter
          app.kubernetes.io/managed-by: cluster-monitoring-operator
          app.kubernetes.io/name: node-exporter
          app.kubernetes.io/part-of: openshift-monitoring
          app.kubernetes.io/version: 1.3.1
      spec:
        containers:
        - args:
          - --web.listen-address=127.0.0.1:9100
          - --path.sysfs=/host/sys
          - --path.rootfs=/host/root
          - --no-collector.wifi
          - --collector.filesystem.mount-points-exclude=^/(dev|proc|sys|run/k3s/containerd/.+|var/lib/docker/.+|var/lib/kubelet/pods/.+)($|/)
          - --collector.netclass.ignored-devices=^(veth.*|[a-f0-9]{15})$
          - --collector.netdev.device-exclude=^(veth.*|[a-f0-9]{15})$
          - --collector.cpu.info
          - --collector.textfile.directory=/var/node_exporter/textfile
          - --no-collector.cpufreq
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:957a2dc20cc01a3f2fbaa836927aa6833699322657915846e9a84c191fa25bb7
          imagePullPolicy: IfNotPresent
          name: node-exporter
          resources:
            requests:
              cpu: 8m
              memory: 32Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: FallbackToLogsOnError
          volumeMounts:
          - mountPath: /host/sys
            mountPropagation: HostToContainer
            name: sys
            readOnly: true
          - mountPath: /host/root
            mountPropagation: HostToContainer
            name: root
            readOnly: true
          - mountPath: /var/node_exporter/textfile
            name: node-exporter-textfile
            readOnly: true
          workingDir: /var/node_exporter/textfile
        - args:
          - --logtostderr
          - --secure-listen-address=[$(IP)]:9100
          - --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256
          - --upstream=http://127.0.0.1:9100/
          - --tls-cert-file=/etc/tls/private/tls.crt
          - --tls-private-key-file=/etc/tls/private/tls.key
          - --client-ca-file=/etc/tls/client/client-ca.crt
          - --config-file=/etc/kube-rbac-policy/config.yaml
          - --tls-min-version=VersionTLS12
          env:
          - name: IP
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: status.podIP
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:08e8b4004edaeeb125ced09ab2c4cd6d690afaf3a86309c91a994dec8e3ccbf3
          imagePullPolicy: IfNotPresent
          name: kube-rbac-proxy
          ports:
          - containerPort: 9100
            hostPort: 9100
            name: https
            protocol: TCP
          resources:
            requests:
              cpu: 1m
              memory: 15Mi
          securityContext:
            runAsGroup: 65532
            runAsNonRoot: true
            runAsUser: 65532
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: FallbackToLogsOnError
          volumeMounts:
          - mountPath: /etc/tls/private
            name: node-exporter-tls
          - mountPath: /etc/tls/client
            name: metrics-client-ca
          - mountPath: /etc/kube-rbac-policy
            name: node-exporter-kube-rbac-proxy-config
            readOnly: true
        dnsPolicy: ClusterFirst
        hostNetwork: true
        hostPID: true
        initContainers:
        - command:
          - /bin/sh
          - -c
          - '[[ ! -d /node_exporter/collectors/init ]] || find /node_exporter/collectors/init
            -perm /111 -type f -exec {} \;'
          env:
          - name: TMPDIR
            value: /tmp
          image: quay.io/openshift-release-dev/ocp-v4.0-art-dev@sha256:957a2dc20cc01a3f2fbaa836927aa6833699322657915846e9a84c191fa25bb7
          imagePullPolicy: IfNotPresent
          name: init-textfile
          resources:
            requests:
              cpu: 1m
              memory: 1Mi
          securityContext:
            privileged: true
            runAsUser: 0
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: FallbackToLogsOnError
          volumeMounts:
          - mountPath: /var/node_exporter/textfile
            name: node-exporter-textfile
          - mountPath: /var/log/wtmp
            name: node-exporter-wtmp
            readOnly: true
          workingDir: /var/node_exporter/textfile
        nodeSelector:
          kubernetes.io/os: linux
        priorityClassName: system-cluster-critical
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: node-exporter
        serviceAccountName: node-exporter
        terminationGracePeriodSeconds: 30
        tolerations:
        - operator: Exists
        volumes:
        - hostPath:
            path: /sys
            type: ""
          name: sys
        - hostPath:
            path: /
            type: ""
          name: root
        - emptyDir: {}
          name: node-exporter-textfile
        - name: node-exporter-tls
          secret:
            defaultMode: 420
            secretName: node-exporter-tls
        - hostPath:
            path: /var/log/wtmp
            type: File
          name: node-exporter-wtmp
        - configMap:
            defaultMode: 420
            name: metrics-client-ca
          name: metrics-client-ca
        - name: node-exporter-kube-rbac-proxy-config
          secret:
            defaultMode: 420
            secretName: node-exporter-kube-rbac-proxy-config
    updateStrategy:
      rollingUpdate:
        maxSurge: 0
        maxUnavailable: 10%
      type: RollingUpdate
  status:
    currentNumberScheduled: 9
    desiredNumberScheduled: 9
    numberAvailable: 9
    numberMisscheduled: 0
    numberReady: 9
    observedGeneration: 1
    updatedNumberScheduled: 9
- apiVersion: apps/v1
  kind: DaemonSet
  metadata:
    annotations:
      deprecated.daemonset.template.generation: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"DaemonSet","metadata":{"annotations":{},"labels":{"hive.openshift.io/managed":"true","name":"sre-dns-latency-exporter"},"name":"sre-dns-latency-exporter","namespace":"openshift-monitoring"},"spec":{"selector":{"matchLabels":{"name":"sre-dns-latency-exporter"}},"template":{"metadata":{"labels":{"name":"sre-dns-latency-exporter"},"name":"sre-dns-latency-exporter"},"spec":{"containers":[{"command":["/bin/sh","/monitor/start.sh"],"env":[{"name":"PYTHONPATH","value":"/openshift-python/packages:/support/packages"}],"image":"quay.io/app-sre/managed-prometheus-exporter-base:latest","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":2,"httpGet":{"path":"/","port":8080},"initialDelaySeconds":420,"periodSeconds":360,"timeoutSeconds":240},"name":"main","ports":[{"containerPort":8080,"protocol":"TCP"}],"readinessProbe":{"httpGet":{"path":"/","port":8080},"initialDelaySeconds":3,"timeoutSeconds":240},"volumeMounts":[{"mountPath":"/monitor","name":"monitor-volume","readOnly":true},{"mountPath":"/etc/pki/ca-trust/extracted/pem","name":"trusted-ca-bundle","readOnly":true}],"workingDir":"/monitor"}],"dnsPolicy":"ClusterFirst","restartPolicy":"Always","serviceAccountName":"sre-dns-latency-exporter","tolerations":[{"operator":"Exists"}],"volumes":[{"configMap":{"name":"sre-dns-latency-exporter-code"},"name":"monitor-volume"},{"configMap":{"defaultMode":420,"items":[{"key":"ca-bundle.crt","path":"tls-ca-bundle.pem"}],"name":"sre-dns-latency-exporter-trusted-ca-bundle"},"name":"trusted-ca-bundle"}]}}}}
    creationTimestamp: "2022-05-24T18:25:30Z"
    generation: 1
    labels:
      hive.openshift.io/managed: "true"
      name: sre-dns-latency-exporter
    name: sre-dns-latency-exporter
    namespace: openshift-monitoring
    resourceVersion: "78848"
    uid: 70b79ab5-c7d4-4dbf-96af-4a340318b62a
  spec:
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        name: sre-dns-latency-exporter
    template:
      metadata:
        creationTimestamp: null
        labels:
          name: sre-dns-latency-exporter
        name: sre-dns-latency-exporter
      spec:
        containers:
        - command:
          - /bin/sh
          - /monitor/start.sh
          env:
          - name: PYTHONPATH
            value: /openshift-python/packages:/support/packages
          image: quay.io/app-sre/managed-prometheus-exporter-base:latest
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 2
            httpGet:
              path: /
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 420
            periodSeconds: 360
            successThreshold: 1
            timeoutSeconds: 240
          name: main
          ports:
          - containerPort: 8080
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 240
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /monitor
            name: monitor-volume
            readOnly: true
          - mountPath: /etc/pki/ca-trust/extracted/pem
            name: trusted-ca-bundle
            readOnly: true
          workingDir: /monitor
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: sre-dns-latency-exporter
        serviceAccountName: sre-dns-latency-exporter
        terminationGracePeriodSeconds: 30
        tolerations:
        - operator: Exists
        volumes:
        - configMap:
            defaultMode: 420
            name: sre-dns-latency-exporter-code
          name: monitor-volume
        - configMap:
            defaultMode: 420
            items:
            - key: ca-bundle.crt
              path: tls-ca-bundle.pem
            name: sre-dns-latency-exporter-trusted-ca-bundle
          name: trusted-ca-bundle
    updateStrategy:
      rollingUpdate:
        maxSurge: 0
        maxUnavailable: 1
      type: RollingUpdate
  status:
    currentNumberScheduled: 9
    desiredNumberScheduled: 9
    numberAvailable: 9
    numberMisscheduled: 0
    numberReady: 9
    observedGeneration: 1
    updatedNumberScheduled: 9
kind: DaemonSetList
metadata:
  resourceVersion: "322405"
